"use strict";(self.webpackChunkarcgis_webpack01=self.webpackChunkarcgis_webpack01||[]).push([[51211],{75743:(e,t,i)=>{i.d(t,{a:()=>h});const s=2654435761,r=2246822519,n=3266489917,a=668265263,o=374761393;function l(e){const t=[];for(let i=0,s=e.length;i<s;i++){let s=e.charCodeAt(i);s<128?t.push(s):s<2048?t.push(192|s>>6,128|63&s):s<55296||s>=57344?t.push(224|s>>12,128|s>>6&63,128|63&s):(i++,s=65536+((1023&s)<<10|1023&e.charCodeAt(i)),t.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s))}return new Uint8Array(t)}class h{constructor(e){this._seed=e,this._totallen=0,this._bufs=[],this.init()}init(){return this._bufs=[],this._totallen=0,this}updateFloatArray(e){const t=[];for(const i of e)isNaN(i)?t.push("NaN"):i===1/0?t.push("Infinity"):i===-1/0?t.push("-Infinity"):0===i?t.push("0"):t.push(i.toString(16));this.update(l(t.join("")))}updateIntArray(e){const t=Int32Array.from(e);this.update(new Uint8Array(t.buffer))}updateUint8Array(e){this.update(Uint8Array.from(e))}updateWithString(e){return this.update(l(e))}update(e){return this._bufs.push(e),this._totallen+=e.length,this}digest(){const e=new Uint8Array(this._totallen);let t=0;for(const i of this._bufs)e.set(i,t),t+=i.length;return this.init(),this._xxHash32(e,this._seed)}_xxHash32(e,t=0){const i=e;let l=t+o&4294967295,h=0;if(i.length>=16){const i=[t+s+r&4294967295,t+r&4294967295,t+0&4294967295,t-s&4294967295],n=e,a=n.length-16;let o=0;for(h=0;(4294967280&h)<=a;h+=4){const e=h,t=n[e]+(n[e+1]<<8),a=n[e+2]+(n[e+3]<<8),l=t*r+(a*r<<16);let u=i[o]+l&4294967295;u=u<<13|u>>>19;const c=65535&u,d=u>>>16;i[o]=c*s+(d*s<<16)&4294967295,o=o+1&3}l=(i[0]<<1|i[0]>>>31)+(i[1]<<7|i[1]>>>25)+(i[2]<<12|i[2]>>>20)+(i[3]<<18|i[3]>>>14)&4294967295}l=l+e.length&4294967295;const u=e.length-4;for(;h<=u;h+=4){const e=h,t=i[e]+(i[e+1]<<8),s=i[e+2]+(i[e+3]<<8);l=l+(t*n+(s*n<<16))&4294967295,l=l<<17|l>>>15,l=(65535&l)*a+((l>>>16)*a<<16)&4294967295}for(;h<i.length;++h)l+=i[h]*o,l=l<<11|l>>>21,l=(65535&l)*s+((l>>>16)*s<<16)&4294967295;return l^=l>>>15,l=((65535&l)*r&4294967295)+((l>>>16)*r<<16),l^=l>>>13,l=((65535&l)*n&4294967295)+((l>>>16)*n<<16),l^=l>>>16,l<0?l+4294967296:l}}},28800:(e,t,i)=>{i.d(t,{A:()=>u});var s=i(36663),r=i(23148),n=i(78668),a=i(76868),o=i(81977),l=(i(39994),i(13802),i(4157),i(40266)),h=i(64862);const u=e=>{let t=class extends e{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(){super.postscript(),(0,h.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const e=new AbortController,t=e.signal;this.addHandles((0,r.kB)((()=>e.abort()))),await(0,a.whenOnce)((()=>this.view.defaultsFromMap?.heightModelInfoReady),t),(0,n.k_)(t);const i=(0,h.Wt)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}};return(0,s._)([(0,o.Cb)()],t.prototype,"view",void 0),(0,s._)([(0,o.Cb)()],t.prototype,"slicePlaneEnabled",void 0),t=(0,s._)([(0,l.j)("esri.views.3d.layers.LayerView3D")],t),t}},93694:(e,t,i)=>{i.d(t,{_:()=>d});var s=i(36663),r=i(74396),n=i(31355),a=i(76868),o=i(81977),l=(i(39994),i(13802),i(4157),i(40266)),h=i(31441),u=i(53448),c=i(22167);let d=class extends r.Z{constructor(e){super(e),this._dirtyExtents=new h.D,this._globalDirty=!1,this._averageExtentUpdateSize=0,this._dirtyGraphicsSet=new Set,this._updateElevation=!1,this.graphicsCoreOwner=null,this.graphicsCore=null,this.events=new n.Z}initialize(){const e=this.elevationProvider,t=this.graphicsCoreOwner.view.resourceController.scheduler;this._task=t.registerTask(p(this.graphicsCore.layer.elevationInfo?.mode),this),this.addHandles([e.on("elevation-change",(e=>this._elevationChanged(e))),(0,a.watch)((()=>this.graphicsCoreOwner.suspended),(()=>this._suspendedChange())),this._task,(0,a.watch)((()=>p(this.graphicsCore.layer.elevationInfo?.mode)),(e=>this._task.priority=e))])}destroy(){this._dirtyGraphicsSet.clear(),this.graphicsCoreOwner=null,this.graphicsCore=null,this.queryGraphicUIDsInExtent=null,this.elevationProvider=null}clear(){this._dirtyGraphicsSet.clear(),this.notifyChange("updating")}_suspendedChange(){!0===this.graphicsCoreOwner.suspended?this._updateElevation=!1:!1===this.graphicsCoreOwner.suspended&&this._updateElevation&&(this._globalDirty=!0,this.notifyChange("updating"))}elevationInfoChange(){this._globalDirty=!0,this.notifyChange("updating")}get updating(){return this.running}get running(){return this._dirtyGraphicsSet.size>0||this._dirtyExtents&&!this._dirtyExtents.empty||this._globalDirty}get updatingRemaining(){return this._dirtyGraphicsSet.size+this._dirtyExtents.size*this._averageExtentUpdateSize}runTask(e){for(this._globalDirty&&(this._markAllGraphicsElevationDirty(),this._globalDirty=!1,e.madeProgress()),e.run((()=>this._dirtyExtents.merge(e)));this.running&&!e.done;)this._updateDirtyGraphics(e),this._updateDirtyExtents(e);this.notifyChange("updating")}_updateDirtyGraphics(e){const t=this.graphicsCoreOwner.view.renderCoordsHelper,i=this.graphicsCore.effectiveUpdatePolicy===u.j.ASYNC;for(const s of this._dirtyGraphicsSet.keys()){const r=this.graphicsCore.getGraphics3DGraphicById(s);if(this._dirtyGraphicsSet.delete(s),null!=r&&(r.alignWithElevation(this.elevationProvider,t,i),this.graphicsCore.deconflictor?.setDirty(),e.madeProgress()),e.done)return}}_updateDirtyExtents(e){for(;!this._dirtyExtents.empty&&!e.done;){const t=this._dirtyExtents.pop(),i=this.elevationProvider.spatialReference;this.events.emit("invalidate-elevation",{extent:t,spatialReference:i});const s=this._dirtyGraphicsSet.size;this.queryGraphicUIDsInExtent(t,i,(e=>{const t=this.graphicsCore.getGraphics3DGraphicById(e);null!=t&&t.needsElevationUpdates()&&this._dirtyGraphicsSet.add(e)})),this._averageExtentUpdateSize=.1*(this._dirtyGraphicsSet.size-s)+.9*this._averageExtentUpdateSize,e.madeProgress()}}_markAllGraphicsElevationDirty(){this._dirtyExtents.clear(),this._dirtyGraphicsSet.clear(),this.graphicsCore.graphics3DGraphics.forEach(((e,t)=>this._dirtyGraphicsSet.add(t)))}_elevationChanged(e){if("scene"===e.context&&(!this.graphicsCore.layer.elevationInfo||"relative-to-scene"!==this.graphicsCore.layer.elevationInfo.mode))return;const t=e.extent;if(this.graphicsCoreOwner.suspended){if(!this._updateElevation){const e=this.graphicsCore.computedExtent;e&&t[2]>e.xmin&&t[0]<e.xmax&&t[3]>e.ymin&&t[1]<e.ymax&&(this._updateElevation=!0)}this.events.emit("invalidate-elevation",e)}else t[0]===-1/0?this._globalDirty=!0:this._dirtyExtents.add(t),this.notifyChange("updating")}};function p(e){return null==e?c.T8.ELEVATION_ALIGNMENT:"relative-to-scene"===e?c.T8.ELEVATION_ALIGNMENT_SCENE:c.T8.ELEVATION_ALIGNMENT}(0,s._)([(0,o.Cb)()],d.prototype,"graphicsCoreOwner",void 0),(0,s._)([(0,o.Cb)()],d.prototype,"graphicsCore",void 0),(0,s._)([(0,o.Cb)()],d.prototype,"queryGraphicUIDsInExtent",void 0),(0,s._)([(0,o.Cb)()],d.prototype,"elevationProvider",void 0),(0,s._)([(0,o.Cb)({readOnly:!0})],d.prototype,"updating",null),(0,s._)([(0,o.Cb)({readOnly:!0})],d.prototype,"updatingRemaining",null),d=(0,s._)([(0,l.j)("esri.views.3d.layers.graphics.Graphics3DElevationAlignment")],d)},5556:(e,t,i)=>{i.d(t,{I:()=>H});var s=i(36663),r=i(80085),n=i(75743),a=i(27755),o=i(23148),l=i(61681),h=i(64189),u=i(78668),c=i(76868),d=i(81977),p=(i(13802),i(4157),i(40266)),y=i(27281),g=i(98940),_=i(39536),b=i(67905),f=i(14626),C=i(77631),m=i(43977),v=i(9423),x=i(51978),S=i(71850),w=i(93694),E=i(91496),I=i(82404),O=i(31153),R=i(14923),F=i(19405),V=i(50533),G=i(72139),A=i(53448),j=i(67235);let H=class extends h.Z{constructor(e){super(e),this.type="graphics-3d",this._updatingHandles=new g.R,this.elevationFeatureExpressionEnabled=!1,this.scaleVisibilityEnabled=!1,this.filterVisibilityEnabled=!1,this.frustumVisibilityEnabled=!1,this.elevationAlignmentEnabled=!1,this.timeExtentEnabled=!1,this.setUidToIdOnAdd=!0,this.dataExtent=null,this.drapeSourceType=m.Lw.Features,this.preferredUpdatePolicy=A.j.ASYNC,this._suspendResumeExtent=null}initialize(){const e=this.owner,t=(this.filterVisibilityEnabled||this.timeExtentEnabled)&&"multipatch"!==e.layer.geometryType,i=new S.w({owner:this,layer:this.layer,preferredUpdatePolicy:this.preferredUpdatePolicy,elevationFeatureExpressionEnabled:this.elevationFeatureExpressionEnabled,graphicSymbolSupported:!1,hasZ:e.hasZ,hasM:e.hasM,setUidToIdOnAdd:this.setUidToIdOnAdd,componentFactories:{deconflictor:t=>e.view.deconflictor.addGraphicsOwner(t),labeler:(t,i)=>e.view.labeler.addGraphicsOwner(t,i),elevationAlignment:this.elevationAlignmentEnabled?(t,i)=>new w._({graphicsCoreOwner:this,graphicsCore:t,queryGraphicUIDsInExtent:i,elevationProvider:e.view.elevationProvider}):null,scaleVisibility:this.scaleVisibilityEnabled?(t,i)=>new O.c({graphicsCoreOwner:this,layer:this.layer,queryGraphicUIDsInExtent:i,graphicsCore:t,basemapTerrain:e.view.basemapTerrain}):null,filterVisibility:t?t=>new V.n({context:{...t,configuration:e}}):null,objectStates:e=>new I.d(e)}});this._set("graphicsCore",i),this.frustumVisibilityEnabled&&this._set("frustumVisibility",new E.L({graphicsCoreOwner:this})),this.elevationAlignment&&this._updatingHandles.add((()=>this.layer.elevationInfo),((e,t)=>{(0,y.Hg)(e,t)&&this._updatingHandles.addPromise(this.graphicsCore.elevationInfoChange())})),this._updatingHandles.add((()=>this.layer.labelsVisible),(()=>this.graphicsCore.updateVisibilityInfo())),this._updatingHandles.add((()=>this.layer.labelingInfo),((e,t)=>{(0,y.Hg)(e,t)&&this.graphicsCore.updateLabelingInfo()})),this._updatingHandles.add((()=>this.preferredUpdatePolicy),(e=>this.graphicsCore.preferredUpdatePolicy=e)),this.addResolvingPromise(this._initializeAsync())}async _initializeAsync(){await(0,u.U3)(this.graphicsCore.initializePromise);const e=this.owner;this._updatingHandles.add((()=>this.renderer),(e=>this._updatingHandles.addPromise(this.graphicsCore.rendererChange(e)))),this._updatingHandles.add((()=>e.fullOpacity),(()=>this.graphicsCore.opacityChange())),this._setupSuspendResumeExtent(),this.updateClippingExtent&&(this._updatingHandles.add((()=>e.view.clippingArea),(()=>this._updateClippingExtent())),this._updateClippingExtent()),this.graphicsCore.startCreateGraphics(),this.graphicsCore.labelsEnabled&&await(0,u.U3)(this.graphicsCore.updateLabelingInfo())}destroy(){this._updatingHandles.destroy(),this._set("frustumVisibility",(0,l.SC)(this.frustumVisibility)),this._set("graphicsCore",(0,l.SC)(this.graphicsCore)),this._set("owner",null)}get layer(){return this.owner.layer}get dataUpdating(){return this.graphicsCore?.dataUpdating??!1}get renderer(){const{renderer:e,objectIdField:t}=this.layer;if(!e||!t||"heatmap"===e.type||!e.visualVariables)return e;const i=e.visualVariables.findIndex((e=>"rotation"===e.type&&null!=e.valueExpression&&(0,C.v)(e.valueExpression)===t&&(null==e.axis||"heading"===e.axis)&&"geographic"===e.rotationType));if(i<0)return e;const s=e.clone();return s.visualVariables?(s.visualVariables.splice(i,1),this._randomRotationRenderers??=new WeakMap,this._randomRotationRenderers.set(s,t),s):e}get scaleVisibility(){return this.graphicsCore?.scaleVisibility}get filterVisibility(){return this.graphicsCore?.filterVisibility}get elevationAlignment(){return this.graphicsCore?.elevationAlignment}get suspendResumeExtentMode(){return this.owner.suspendResumeExtentMode??"computed"}get scaleVisibilitySuspended(){return null!=this.scaleVisibility&&this.scaleVisibility.suspended}get suspended(){return this.owner.suspended}get legendEnabled(){return null==this.frustumVisibility||!this.frustumVisibility.suspended}get suspendInfo(){const e={};return this.scaleVisibilitySuspended&&(e.outsideScaleRange=!0),null!=this.frustumVisibility&&this.frustumVisibility.suspended&&(e.outsideOfView=!0),e}get updating(){return!!(this.graphicsCore?.updating||this.frustumVisibility?.updating||this._updatingHandles.updating)}get updatingRemaining(){return this.graphicsCore?.updatingRemaining??0}get featureStore(){return this.graphicsCore?.featureStore}get view(){return this.owner.view}get loadedGraphics(){return this.owner.loadedGraphics}get fullOpacity(){return this.owner?.fullOpacity}get filter(){return"filter"in this.owner?this.owner.filter:null}get slicePlaneEnabled(){return this.owner.slicePlaneEnabled}get updatePolicy(){return this.owner.updatePolicy}get featureSpatialReference(){return"featureSpatialReference"in this.owner?this.owner.featureSpatialReference:this.owner.view.spatialReference}get graphics3DGraphics(){return this.graphicsCore?.graphics3DGraphics}get graphics3DGraphicsByObjectID(){return this.graphicsCore?.graphics3DGraphicsByObjectID}get symbolUpdateType(){return this.graphicsCore?.symbolUpdateType}get displayFeatureLimit(){const e=this.view.quality,t=this.graphicsCore?.displayFeatureLimit;if(1===e)return t;const i=Math.ceil(t.maximumNumberOfFeatures*e);return new x.J(t.maximumTotalNumberOfVertices,i,t.averageSymbolComplexity)}get usedMemory(){return this.graphicsCore?.usedMemory??0}get loadedFeatures(){return this.graphicsCore?.numberOfGraphics??0}get usedMemoryPerFeature(){return this.graphicsCore?.usedMemoryPerGraphic??0}get unprocessedMemoryEstimate(){return this.graphicsCore?.unprocessedMemoryEstimate??0}get performanceInfo(){return this.graphicsCore.performanceInfo}maskOccludee(e){const t=this.graphicsCore?.objectStates;if(!t)return(0,o.kB)();const{set:i,handle:s}=t.acquireOccludeeSet(null);return t.setUid(i,e.uid),s}highlight(e,t=null,i){const s=this.graphicsCore?.objectStates;if(!s)return G.qK;if(i??=j.b,e instanceof f.Z){const{set:r,handle:n}=s.acquireHighlightSet(i,t);return this.owner.queryObjectIds(e).then((e=>s.setObjectIds(r,e))),n}let n=(0,G.OL)(e);if(0===n.length)return G.qK;if(n[0]instanceof r.Z){const e=n;if(null==(0,F.g)(this.layer.fieldsIndex,e[0].attributes,t)){const t=e.map((e=>e.uid)),{set:r,handle:n}=s.acquireHighlightSet(i,null);return s.setUids(r,t),n}n=e.map((e=>(0,F.g)(this.layer.fieldsIndex,e.attributes,t)))}if((0,G.Nl)(n[0])){const e=n,{set:r,handle:a}=s.acquireHighlightSet(i,t);return s.setObjectIds(r,e),a}return G.qK}resetObjectStates(){this.graphicsCore?.objectStates?.reset()}whenGraphicBounds(e,t){return this.graphicsCore?.whenGraphicBounds(e,t)}computeAttachmentOrigin(e,t){return this.graphicsCore?.computeAttachmentOrigin(e,t)}notifyGraphicGeometryChanged(e){this.graphicsCore.notifyGraphicGeometryChanged(e)}notifyGraphicVisibilityChanged(e){this.graphicsCore.notifyGraphicVisibilityChanged(e)}getRenderingInfo(e,t,i){const s=(0,b.Kb)(e,{renderer:t,arcade:i});if(s?.color){const e=s.color;e[0]=e[0]/255,e[1]=e[1]/255,e[2]=e[2]/255}if(null!=s&&null!=t&&this._randomRotationRenderers?.has(t)){const i=this._randomRotationRenderers.get(t),r=e.attributes[i],a=new n.a(0);a.updateFloatArray([r]),a.updateUint8Array([173]),s.heading=8.381e-8*a.digest()}return s}getRenderingInfoAsync(e,t,i,s){return(0,b.xn)(e,{renderer:t,arcade:i,...s})}getSymbolLayerSize(e,t){return this.graphicsCore?.getSymbolLayerSize(e,t)}setObjectIdVisibility(e,t){this.graphicsCore?.setObjectIdVisibility(e,t)}refreshFilter(){null!=this.filterVisibility&&this.filterVisibility.reapply()}getGraphics3DGraphicByObjectId(e){return this.graphicsCore?.getGraphics3DGraphicByObjectId(e)}_updateClippingExtent(){const e=this.owner.view.clippingArea;this.graphicsCore.setClippingExtent(e,this.owner.view.spatialReference)&&(this.updateClippingExtent(e)||this.graphicsCore.recreateAllGraphics())}_setupSuspendResumeExtent(){(this.frustumVisibility||this.scaleVisibility)&&this.addHandles((0,c.watch)((()=>this.suspendResumeExtentMode),(()=>{switch(this.removeHandles(N),this.suspendResumeExtentMode){case"computed":this.addHandles([(0,c.watch)((()=>this.graphicsCore.computedExtent),(e=>this._updateSuspendResumeExtent(e)),c.initial),(0,c.watch)((()=>this.graphicsCore.extentPadding),(()=>this._updateSuspendResumeExtent(this.graphicsCore.computedExtent)))],N);break;case"data":this.addHandles([(0,c.when)((()=>this.dataExtent),(e=>this._updateSuspendResumeExtent(e)),c.initial),(0,c.watch)((()=>this.graphicsCore.extentPadding),(()=>this._updateSuspendResumeExtent(this.dataExtent)))],N);break;default:(0,a.Bg)(this.suspendResumeExtentMode)}}),c.initial))}_updateSuspendResumeExtent(e){e?this._suspendResumeExtentChanged(this._extentToSuspendResumeRect(e,this._suspendResumeExtent)):this._suspendResumeExtentChanged(null)}_extentToSuspendResumeRect(e,t){const i=this.owner.view.spatialReference;if(!e.spatialReference.equals(i)){if(!(0,_.Q8)(e,i))return;e=(0,_.iV)(e,i)}return(0,R.Go)(e,t,v.PY,this.graphicsCore.extentPadding)}_suspendResumeExtentChanged(e){null!=this.frustumVisibility&&this.frustumVisibility.setExtent(e),null!=this.scaleVisibility&&this.scaleVisibility.setExtent(e)}};(0,s._)([(0,d.Cb)()],H.prototype,"type",void 0),(0,s._)([(0,d.Cb)({constructOnly:!0})],H.prototype,"owner",void 0),(0,s._)([(0,d.Cb)()],H.prototype,"layer",null),(0,s._)([(0,d.Cb)({readOnly:!0})],H.prototype,"dataUpdating",null),(0,s._)([(0,d.Cb)()],H.prototype,"renderer",null),(0,s._)([(0,d.Cb)({constructOnly:!0})],H.prototype,"updateClippingExtent",void 0),(0,s._)([(0,d.Cb)({constructOnly:!0})],H.prototype,"elevationFeatureExpressionEnabled",void 0),(0,s._)([(0,d.Cb)({constructOnly:!0})],H.prototype,"graphicsCore",void 0),(0,s._)([(0,d.Cb)({constructOnly:!0})],H.prototype,"scaleVisibilityEnabled",void 0),(0,s._)([(0,d.Cb)({constructOnly:!0})],H.prototype,"filterVisibilityEnabled",void 0),(0,s._)([(0,d.Cb)({constructOnly:!0})],H.prototype,"frustumVisibilityEnabled",void 0),(0,s._)([(0,d.Cb)({constructOnly:!0})],H.prototype,"elevationAlignmentEnabled",void 0),(0,s._)([(0,d.Cb)({constructOnly:!0})],H.prototype,"timeExtentEnabled",void 0),(0,s._)([(0,d.Cb)({constructOnly:!0})],H.prototype,"setUidToIdOnAdd",void 0),(0,s._)([(0,d.Cb)()],H.prototype,"scaleVisibility",null),(0,s._)([(0,d.Cb)()],H.prototype,"filterVisibility",null),(0,s._)([(0,d.Cb)()],H.prototype,"elevationAlignment",null),(0,s._)([(0,d.Cb)({constructOnly:!0})],H.prototype,"frustumVisibility",void 0),(0,s._)([(0,d.Cb)()],H.prototype,"suspendResumeExtentMode",null),(0,s._)([(0,d.Cb)()],H.prototype,"dataExtent",void 0),(0,s._)([(0,d.Cb)()],H.prototype,"scaleVisibilitySuspended",null),(0,s._)([(0,d.Cb)()],H.prototype,"suspended",null),(0,s._)([(0,d.Cb)()],H.prototype,"legendEnabled",null),(0,s._)([(0,d.Cb)()],H.prototype,"suspendInfo",null),(0,s._)([(0,d.Cb)()],H.prototype,"updating",null),(0,s._)([(0,d.Cb)()],H.prototype,"updatingRemaining",null),(0,s._)([(0,d.Cb)()],H.prototype,"featureStore",null),(0,s._)([(0,d.Cb)()],H.prototype,"view",null),(0,s._)([(0,d.Cb)()],H.prototype,"loadedGraphics",null),(0,s._)([(0,d.Cb)()],H.prototype,"fullOpacity",null),(0,s._)([(0,d.Cb)()],H.prototype,"filter",null),(0,s._)([(0,d.Cb)()],H.prototype,"slicePlaneEnabled",null),(0,s._)([(0,d.Cb)()],H.prototype,"drapeSourceType",void 0),(0,s._)([(0,d.Cb)()],H.prototype,"updatePolicy",null),(0,s._)([(0,d.Cb)()],H.prototype,"preferredUpdatePolicy",void 0),(0,s._)([(0,d.Cb)({readOnly:!0})],H.prototype,"displayFeatureLimit",null),H=(0,s._)([(0,p.j)("esri.views.3d.layers.graphics.Graphics3DFeatureProcessor")],H);const N="suspendResumeExtentMode"},91496:(e,t,i)=>{i.d(t,{L:()=>D});var s=i(36663),r=i(74396),n=i(76868),a=i(81977),o=(i(39994),i(13802),i(4157),i(40266)),l=i(69442),h=i(27755),u=i(19431),c=i(32114),d=i(3308),p=i(86717),y=i(81095),g=i(7845),_=i(72884),b=i(49757),f=i(37116),C=i(24568),m=i(59934),v=i(56215),x=i(69430),S=i(97537),w=i(65684),E=i(18979);const I=.5*Math.PI,O=I/Math.PI*180;class R{constructor(e){this._extent=new Array(4),this._planes=new Array(6),this._maxSpan=0,this._center={origin:(0,y.Ue)(),direction:(0,y.Ue)()},this._renderCoordsHelper=e.renderCoordsHelper;for(let e=0;e<4;e++)this._extent[e]={origin:(0,y.Ue)(),direction:(0,y.Ue)(),cap:{next:null,direction:(0,y.Ue)()}},this._planes[e]=(0,x.Ue)();this._planes[m.Nu.NEAR]=(0,x.Ue)(),this._planes[m.Nu.FAR]=(0,x.Ue)(),this._planesWithoutFar=this._planes.slice(0,5)}update(e,t,i,s=!0){const r=this._extent;this._toRenderBoundingExtent(e,t,i),(0,p.g)(this._center.origin,r[0].origin,r[2].origin),(0,p.h)(this._center.origin,this._center.origin,.5),this._renderCoordsHelper.worldUpAtPosition(this._center.origin,this._center.direction),s||(0,p.h)(this._center.direction,this._center.direction,-1);for(let e=0;e<4;e++){const t=r[e];this._renderCoordsHelper.worldUpAtPosition(t.origin,t.direction);const i=r[3===e?0:e+1];t.cap.next=i.origin,(0,p.o)(t.cap.direction,t.origin,i.origin),(0,x.my)(t.direction,t.cap.direction,t.origin,this._planes[e]),s||(0,p.h)(t.direction,t.direction,-1)}(0,x.my)(r[0].cap.direction,r[1].cap.direction,r[0].origin,this._planes[m.Nu.NEAR]),s?(0,x.tk)(this._planes[m.Nu.NEAR],this._planes[m.Nu.FAR]):((0,x.JG)(this._planes[m.Nu.FAR],this._planes[m.Nu.NEAR]),(0,x.tk)(this._planes[m.Nu.NEAR],this._planes[m.Nu.NEAR])),this._maxSpan=Math.max(Math.abs(e[0]-e[2]),Math.abs(e[1]-e[3])),this._maxSpanSpatialReference=t,this._minGlobalAltitude=.9*(0,l.Iu)(this._maxSpanSpatialReference).radius}isVisibleInFrustum(e,t,i=!1){if(null==e)return!1;if(this._renderCoordsHelper.viewingMode===w.JY.Global){const i=this._maxSpanSpatialReference.isGeographic?O:I*t;if(this._maxSpan>i)return!0;if(null!=e.altitude&&e.altitude>=this._minGlobalAltitude)return this._isVisibleInFrustumGlobal(e)}if(0===this._maxSpan){const t=this._extent[0];return!(i||!e.intersectsRay((0,S.re)(t.origin,t.direction)))}for(let t=0;t<this._extent.length;t++){const s=this._extent[t];if(!i&&e.intersectsRay((0,S.re)(s.origin,s.direction)))return!0;if(e.intersectsLineSegment((0,v.zk)(s.origin,s.cap.next,N),s.cap.direction))return!0}const s=i?this._planes:this._planesWithoutFar;for(let t=0;t<e.lines.length;t++){const i=e.lines[t];if((0,E.kD)(s,i.origin,i.endpoint,i.direction))return!0}return!1}_toRenderBoundingExtentGlobal(e,t,i){(0,C.be)(e,V),V[2]=i,(0,g.B)(t,V,G,this._renderCoordsHelper.spatialReference),(0,c.U_)(A,G),(0,f.cS)(j);for(const{x0:s,x1:r,y0:n,y1:a}of F)for(let o=0;o<5;o++){const l=o/4;V[0]=(0,u.t7)(e[s],e[r],l),V[1]=(0,u.t7)(e[n],e[a],l),V[2]=i,(0,b.S)(V,t,V,this._renderCoordsHelper.spatialReference),(0,p.t)(V,V,A),(0,f.pp)(j,V)}(0,p.i)(this._extent[0].origin,j[0],j[1],j[2]),(0,p.i)(this._extent[1].origin,j[3],j[1],j[2]),(0,p.i)(this._extent[2].origin,j[3],j[4],j[2]),(0,p.i)(this._extent[3].origin,j[0],j[4],j[2]);for(let e=0;e<4;++e)(0,p.t)(this._extent[e].origin,this._extent[e].origin,G)}_toRenderBoundingExtentLocal(e,t,i){(0,_.d)(e,t,H,this._renderCoordsHelper.spatialReference),(0,p.i)(this._extent[0].origin,H[0],H[1],i),(0,p.i)(this._extent[1].origin,H[2],H[1],i),(0,p.i)(this._extent[2].origin,H[2],H[3],i),(0,p.i)(this._extent[3].origin,H[0],H[3],i)}_toRenderBoundingExtent(e,t,i){switch(this._renderCoordsHelper.viewingMode){case w.JY.Global:this._toRenderBoundingExtentGlobal(e,t,i);break;case w.JY.Local:this._toRenderBoundingExtentLocal(e,t,i);break;default:(0,h.Bg)(this._renderCoordsHelper.viewingMode)}}_isVisibleInFrustumGlobal(e){if((0,x.jH)(e.planes[m.Nu.NEAR],this._center.origin)<0&&(0,p.f)(this._center.direction,e.direction)<0)return!0;for(let t=0;t<4;t++){const i=this._extent[t];if((0,x.jH)(e.planes[m.Nu.NEAR],i.origin)<0&&(0,p.f)(i.direction,e.direction)<0)return!0}return!1}}const F=[{x0:0,y0:1,x1:2,y1:1},{x0:0,y0:3,x1:2,y1:3},{x0:0,y0:1,x1:0,y1:3},{x0:2,y0:1,x1:2,y1:3}],V=(0,y.Ue)(),G=(0,d.Ue)(),A=(0,d.Ue)(),j=(0,f.Ue)(),H=(0,C.Ue)(),N=(0,v.Ue)();var T=i(22167),U=i(14169);let D=class extends r.Z{constructor(e){super(e),this.suspended=!1,this._extent=null,this._extentIntersectionDirty=!0,this._isVisibleBelowSurfaceInternal=!1,this.graphicsCoreOwner=null,this.updating=!0}initialize(){const{graphicsCoreOwner:e}=this;this._extentIntersection=new R({renderCoordsHelper:e.view.renderCoordsHelper});const t=e.view,i=t.basemapTerrain,s=t.resourceController.scheduler;this.addHandles([t.on("resize",(()=>this._viewChange())),(0,n.watch)((()=>t.state.camera),(()=>this._viewChange()),n.sync),s.registerTask(T.T8.FRUSTUM_VISIBILITY,this),(0,n.watch)((()=>i.visibleElevationBounds),(()=>this._elevationBoundsChange()))]),"local"===t.viewingMode?this._isVisibleBelowSurface=!0:this.addHandles([(0,n.watch)((()=>[i.baseOpacity,i.wireframe,t.map?.ground?.navigationConstraint?.type]),(()=>this._updateIsVisibleBelowSurface()),n.initial)])}destroy(){this._set("graphicsCoreOwner",null),this._extent=null,this._extentIntersection=null}_setDirty(){this.updating||this._set("updating",!0)}setExtent(e){this._extent=e,this._extentIntersectionDirty=!0,this._setDirty()}_viewChange(){this._setDirty()}_elevationBoundsChange(){this._setDirty(),this._extentIntersectionDirty=!0}set _isVisibleBelowSurface(e){this._isVisibleBelowSurfaceInternal=e,this._setDirty(),this._extentIntersectionDirty=!0}_updateIsVisibleBelowSurface(){const e=this.graphicsCoreOwner.view,t=e.basemapTerrain,i="local"===e.viewingMode,s="none"===e.map.ground?.navigationConstraint?.type;this._isVisibleBelowSurface=i||!t.opaque||s}_updateExtentIntersection(){if(!this._extentIntersectionDirty)return;this._extentIntersectionDirty=!1;const e=this.graphicsCoreOwner.view;let t;if(this._isVisibleBelowSurfaceInternal)t=-.3*(0,l.Iu)(e.spatialReference).radius;else{const{min:i,max:s}=e.basemapTerrain.visibleElevationBounds;t=i-Math.max(1,(s-i)*(1.2-1))}this._extentIntersection.update(this._extent,e.spatialReference,t)}get running(){return this.updating}runTask(e){if(this._set("updating",!1),!this._extent)return this._set("suspended",!1),U.J;this._updateExtentIntersection();const t=this.graphicsCoreOwner.view.frustum,i=(0,l.Iu)(this.graphicsCoreOwner.view.spatialReference).radius;this._set("suspended",!this._extentIntersection.isVisibleInFrustum(t,i)),e.madeProgress()}};(0,s._)([(0,a.Cb)({readOnly:!0})],D.prototype,"suspended",void 0),(0,s._)([(0,a.Cb)({constructOnly:!0})],D.prototype,"graphicsCoreOwner",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],D.prototype,"updating",void 0),D=(0,s._)([(0,o.j)("esri.views.3d.layers.graphics.Graphics3DFrustumVisibility")],D)},82404:(e,t,i)=>{i.d(t,{d:()=>g});var s=i(23148),r=(i(39994),i(70984));class n{}class a extends n{constructor(e,t){super(),this.objectStateId=e,this.object=t}remove(){this.object.removeStateID(this.objectStateId)}}class o extends n{constructor(e,t,i){super(),this.objectStateId=e,this.object=t,this.owner=i}remove(){this.owner.removeRenderGeometryObjectState(this.object,this.objectStateId)}}class l extends n{constructor(e,t){super(),this.objectStateId=e,this._removeCallback=t,this.object=null}remove(){this._removeCallback(this.objectStateId)}}class h{constructor(){this._items=[]}addObject(e,t){this._items.push(new a(t,e))}addRenderGeometry(e,t,i){this._items.push(new o(t,e,i))}addExternal(e,t){this._items.push(new l(t,e))}remove(e){this._remove((t=>t.objectStateId===e))}removeByObject(e){this._remove((t=>t.object===e))}removeAll(){this._items.forEach((e=>e.remove())),this._items=[]}_remove(e){const{_items:t}=this;for(let i=t.length-1;i>=0;--i){const s=t[i];e(s)&&(s.remove(),t.splice(i,1))}}}class u extends h{constructor(){super(...arguments),this.stateType=r.V_.MaskOccludee}}class c extends h{constructor(e){super(),this.highlightName=e,this.stateType=r.V_.Highlight}}class d{constructor(e){this.objectIdField=e,this.ids=new Set,this.paused=!1}hasGraphic(e){const t=this.objectIdField?e.graphic.attributes[this.objectIdField]:e.graphic.uid;return this.ids.has(t)}}class p extends d{constructor(e){super(e),this.stateType=r.V_.MaskOccludee,this.objectStateSet=new u}}class y extends d{constructor(e,t){super(t),this.highlightName=e,this.stateType=r.V_.Highlight,this.objectStateSet=new c(e)}}class g{constructor(e){this._graphicsCore=e,this._stateSets=new Array}destroy(){this.reset(),this._stateSets=null}reset(){this._stateSets&&(this._stateSets.forEach((e=>e.objectStateSet.removeAll())),this._stateSets.length=0)}acquireOccludeeSet(e){const t=new p(e);this._stateSets.push(t);const i=(0,s.kB)((()=>this.releaseSet(t)));return{set:t,handle:i}}acquireHighlightSet(e,t){const i=new y(e,t);this._stateSets.push(i);const r=(0,s.kB)((()=>this.releaseSet(i)));return{set:i,handle:r}}releaseSet(e){e.objectStateSet.removeAll();const t=this._stateSets?this._stateSets.indexOf(e):-1;-1!==t&&this._stateSets.splice(t,1)}setUid(e,t){e.ids.add(t);const i=this._graphicsCore.graphics3DGraphics.get(t);i&&i.addObjectStateSet(e.objectStateSet)}setUids(e,t){t.forEach((t=>this.setUid(e,t)))}setObjectIds(e,t){t.forEach((t=>e.ids.add(t))),this._initializeSet(e)}addGraphic(e){this._stateSets.forEach((t=>{!t.paused&&t.hasGraphic(e)&&e.addObjectStateSet(t.objectStateSet)}))}removeGraphic(e){this._stateSets.forEach((t=>{t.hasGraphic(e)&&e.removeObjectState(t.objectStateSet)}))}allGraphicsDeleted(){this._stateSets&&this._stateSets.forEach((e=>e.objectStateSet.removeAll()))}_initializeSet(e){const t=this._graphicsCore.graphics3DGraphics;e.objectIdField?t.forEach((t=>{t&&e.hasGraphic(t)&&t.addObjectStateSet(e.objectStateSet)})):e.ids.forEach((i=>{const s=t.get(i);s&&s.addObjectStateSet(e.objectStateSet)}))}get test(){}}},56144:(e,t,i)=>{i.d(t,{q:()=>b});var s=i(36663),r=i(74396),n=i(81977),a=(i(39994),i(13802),i(4157),i(40266)),o=i(91772),l=i(59659),h=i(21185),u=i(28790),c=i(51211),d=i(14626),p=i(99235);class y{constructor(e){this._cache=e.newCache("QueryEngine",null,-1)}clear(){this._cache.clear()}destroy(){this._cache.destroy()}get(e){return this._cache.get(e)?.items}put(e,t){this._cache.put(e,new g(t))}get test(){}}class g{constructor(e){this.items=e}get cachedMemory(){return this.items.reduce(((e,t)=>e+t.usedMemory),p.HG+p.Mm)}}const _=h.qq;let b=class extends r.Z{constructor(e){super(e),this._dataQueryEngineInstance=null}destroy(){this.clear()}get layer(){return this.context.layer}get spatialReference(){return this.context.spatialReference}get _queryGeometryType(){switch(this.layer.geometryType){case"multipoint":case"point":case"polygon":case"polyline":return this.layer.geometryType;case"mesh":return"polygon";default:return}}get defaultQueryJSON(){return new d.Z({outSpatialReference:this.spatialReference}).toJSON()}clear(){return!!this._dataQueryEngineInstance&&(this._dataQueryEngineInstance.destroy(),this._dataQueryEngineInstance=null,!0)}async executeQueryForIdSet(e,t,i){return this._dataQueryEngine.executeQueryForIdSet(this._ensureQueryJSON(e,t),i)}async executeQueryForCount(e,t){return this._dataQueryEngine.executeQueryForCount(this._ensureQueryJSON(e),t)}async executeQueryForExtent(e,t){const{count:i,extent:s}=await this._dataQueryEngine.executeQueryForExtent(this._ensureQueryJSON(e),t);return{count:i,extent:o.Z.fromJSON(s)}}async executeQueryForIds(e,t){return this._dataQueryEngine.executeQueryForIds(this._ensureQueryJSON(e),t)}async executeQueryForLatestObservations(e,t){const i=await this._dataQueryEngine.executeQueryForLatestObservations(this._ensureQueryJSON(e),t),s=c.Z.fromJSON(i);return s.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),s}async executeQuery(e,t){const i=await this._dataQueryEngine.executeQuery(this._ensureQueryJSON(e),t),s=c.Z.fromJSON(i);return s.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),s}_ensureQueryJSON(e,t){let i=this.defaultQueryJSON;if(null!=e&&("outSpatialReference"in e&&!e.outSpatialReference&&(e.outSpatialReference=this.spatialReference),i=e.toJSON(),i.cacheHint=!0),null!=t){const e=t.geometries.map((e=>e.toJSON())).reduce(((e,t)=>(e.rings=e.rings.concat(t.rings),e)));i={...i,cacheHint:!0,sceneFilter:{...t,geometry:e}}}return i}get _dataQueryEngine(){if(this._dataQueryEngineInstance)return this._dataQueryEngineInstance;const{priority:e,layer:t}=this,i="timeInfo"in t&&t.timeInfo?.toJSON()||null,s=t.objectIdField,r=l.Mk.toJSON(this._queryGeometryType),n=t.fieldsIndex?.toJSON()||new u.Z([]),a=this.spatialReference.toJSON(),{hasZ:o,hasM:h,featureStore:c,scheduler:d,memoryController:p}=this.context,g=new y(p);return this._dataQueryEngineInstance=new _({hasZ:o,hasM:h,geometryType:r,fieldsIndex:n,timeInfo:i,spatialReference:a,objectIdField:s,featureStore:c,scheduler:d,cache:g,priority:e}),this._dataQueryEngineInstance}};(0,s._)([(0,n.Cb)({constructOnly:!0})],b.prototype,"context",void 0),(0,s._)([(0,n.Cb)({constructOnly:!0})],b.prototype,"priority",void 0),(0,s._)([(0,n.Cb)()],b.prototype,"layer",null),(0,s._)([(0,n.Cb)()],b.prototype,"spatialReference",null),(0,s._)([(0,n.Cb)()],b.prototype,"_queryGeometryType",null),(0,s._)([(0,n.Cb)()],b.prototype,"defaultQueryJSON",null),b=(0,s._)([(0,a.j)("esri.views.3d.layers.graphics.QueryEngine")],b)},60480:(e,t,i)=>{i.d(t,{s:()=>s});class s{constructor(e,t,i,s,r,n){this.spatialReference=e,this.layer=t,this.resourceController=i,this._getFeatureStore=s,this.hasZ=r,this.hasM=n}get scheduler(){return this.resourceController.scheduler}get memoryController(){return this.resourceController.memoryController}get featureStore(){return this._getFeatureStore()}}},50533:(e,t,i)=>{i.d(t,{n:()=>f});var s=i(36663),r=i(74396),n=i(13802),a=i(61681),o=i(78668),l=i(76868),h=i(84684),u=i(81977),c=(i(39994),i(4157),i(40266)),d=i(98940),p=i(15553),y=i(21586),g=i(56144),_=i(60480),b=i(22167);let f=class extends r.Z{constructor(e){super(e),this._frameTask=null,this._queryEngine=null,this._updateRequested=!0,this._updatingHandles=new d.R,this._abortController=new AbortController}initialize(){const e=b.T8.FILTER_VISIBILITY,{layer:t,view:i}=this._configuration,{featureStore:s}=this.context,{spatialReference:r,resourceController:n}=i,a=this._configuration.hasZ??!1,h=this._configuration.hasM??!1,u=new _.s(r,t,n,(()=>s),a,h);this._queryEngine=new g.q({context:u,priority:e}),this._frameTask=i.resourceController.scheduler.registerTask(e),this._updatingHandles.add((()=>[this._compositedFeatureFilter,this._sceneFilter]),(()=>this._updateRequested=!0),l.initial),this._updatingHandles.addWhen((()=>!this._frameTask.updating&&this._updateRequested),(()=>{this._frameTask.schedule((()=>this._updateVisibility()),this._abortController.signal).catch(o.H9),this._updateRequested=!1}),l.initial)}destroy(){this._abortController.abort(),this._updatingHandles.destroy(),this.clear(),this._frameTask=(0,a.hw)(this._frameTask),this._queryEngine=(0,a.SC)(this._queryEngine),this._set("context",null)}get updating(){return this._updateRequested||this._updatingHandles.updating||this._frameTask.updating}get defaultVisibility(){return null==this._compositedFeatureFilter&&null==this._sceneFilter}get _featureFilter(){return"filter"in this._configuration?this._configuration.filter:null}get _effectiveDisplayFilter(){return"effectiveDisplayFilter"in this._configuration?this._configuration.effectiveDisplayFilter:null}get _sceneFilter(){return"layerFilter"in this._configuration?this._configuration.layerFilter:null}get _floorFilter(){return(0,y.c)(this._configuration)}get _timeExtent(){return"timeExtent"in this._configuration?this._configuration.timeExtent:null}get _compositedFeatureFilter(){const{_featureFilter:e,_effectiveDisplayFilter:t,_timeExtent:i,_floorFilter:s}=this;let r=e?.clone();if(null!=t&&(r??=new p.Z,r.where=(0,h._$)(r.where,t.where)),null!=i&&(r??=new p.Z,r.timeExtent=r.timeExtent?.intersection(i)??i),null!=s){r??=new p.Z;const e=null==r.where||""===r.where;r.where=e?s:(0,h._$)(r.where,s)}return r}get _configuration(){return this.context.configuration}reapply(){this._updateRequested=!0}clear(){this._queryEngine.clear(),this.context.clearFeaturesVisibility()}async _updateVisibility(){const{signal:e}=this._abortController,{context:t,_frameTask:i,_sceneFilter:s,_compositedFeatureFilter:r}=this;if((0,o.k_)(e),null==r&&null==s||0===t.getFeatureCount())return await i.schedule((()=>this.clear()),e);try{const n=await this._queryEngine.executeQueryForIdSet(r,s,e);return(0,o.k_)(e),await i.schedule((()=>{t.updateFeatureVisibilities((e=>n.has(e)))}),e)}catch(s){return(0,o.r9)(s),n.Z.getLogger(this).warn(`FeatureFilter query failed: ${s}`,{error:s}),await i.schedule((()=>{t.setAllFeaturesVisibility(!0)}),e)}}};(0,s._)([(0,u.Cb)({constructOnly:!0})],f.prototype,"context",void 0),(0,s._)([(0,u.Cb)()],f.prototype,"updating",null),(0,s._)([(0,u.Cb)()],f.prototype,"defaultVisibility",null),(0,s._)([(0,u.Cb)()],f.prototype,"_featureFilter",null),(0,s._)([(0,u.Cb)()],f.prototype,"_effectiveDisplayFilter",null),(0,s._)([(0,u.Cb)()],f.prototype,"_sceneFilter",null),(0,s._)([(0,u.Cb)()],f.prototype,"_floorFilter",null),(0,s._)([(0,u.Cb)()],f.prototype,"_timeExtent",null),(0,s._)([(0,u.Cb)()],f.prototype,"_compositedFeatureFilter",null),(0,s._)([(0,u.Cb)()],f.prototype,"_configuration",null),(0,s._)([(0,u.Cb)()],f.prototype,"_updateRequested",void 0),f=(0,s._)([(0,c.j)("esri.views.3d.layers.support.FeatureVisibilityFilter")],f)},19405:(e,t,i)=>{function s(e,t,i){if(!i||null==t)return null;if(!e)return function(e,t){const i=t.toLowerCase();for(const t in e)if(t.toLowerCase()===i)return e[t];return null}(t,i);const s=e.get(i);return s?t[s.name]:null}i.d(t,{g:()=>s})},26216:(e,t,i)=>{i.d(t,{Z:()=>g});var s=i(36663),r=i(74396),n=i(31355),a=i(86618),o=i(13802),l=i(61681),h=i(64189),u=i(81977),c=(i(39994),i(4157),i(40266)),d=i(98940),p=i(42780);let y=class extends(a.Z.IdentifiableMixin(h.Z.EsriPromiseMixin(n.Z.EventedMixin(r.Z)))){get spatialReferenceSupported(){return!0}constructor(e){super(e),this._updatingHandles=new d.R,this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",i=this.layer?.title||"no title";o.Z.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${i}', id: '${t}')`,e)}}))}destroy(){this._updatingHandles=(0,l.SC)(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome("visible",e)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){const e=this.view.timeExtent,t=this.layer?.visibilityTimeExtent;return!e||!t||!e.intersection(t).isEmpty}canResume(){const e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&this.parent&&!this.parent.suspended&&this.view?.ready&&(0,p.Cy)(e)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){const e=this.parent?.suspended?this.parent.suspendInfo:{};this.view?.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0);const t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return(0,p.Cy)(t)&&this.visibleAtCurrentScale||(e.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(e.outsideVisibilityTimeExtent=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};(0,s._)([(0,u.Cb)({readOnly:!0})],y.prototype,"spatialReferenceSupported",null),(0,s._)([(0,u.Cb)()],y.prototype,"view",void 0),(0,s._)([(0,u.Cb)()],y.prototype,"fullOpacity",null),(0,s._)([(0,u.Cb)()],y.prototype,"layer",void 0),(0,s._)([(0,u.Cb)()],y.prototype,"parent",void 0),(0,s._)([(0,u.Cb)({readOnly:!0})],y.prototype,"suspended",null),(0,s._)([(0,u.Cb)({readOnly:!0})],y.prototype,"suspendInfo",null),(0,s._)([(0,u.Cb)({readOnly:!0})],y.prototype,"legendEnabled",null),(0,s._)([(0,u.Cb)({type:Boolean,readOnly:!0})],y.prototype,"updating",null),(0,s._)([(0,u.Cb)({readOnly:!0})],y.prototype,"updatingProgress",null),(0,s._)([(0,u.Cb)()],y.prototype,"updateSuspended",null),(0,s._)([(0,u.Cb)()],y.prototype,"visible",null),(0,s._)([(0,u.Cb)({readOnly:!0})],y.prototype,"visibleAtCurrentScale",null),(0,s._)([(0,u.Cb)({readOnly:!0})],y.prototype,"visibleAtCurrentTimeExtent",null),y=(0,s._)([(0,c.j)("esri.views.layers.LayerView")],y);const g=y}}]);