"use strict";(self.webpackChunkarcgis_webpack01=self.webpackChunkarcgis_webpack01||[]).push([[63932,95970],{55709:(e,t,r)=>{r.d(t,{a:()=>s,f:()=>i,n:()=>o});var n=r(86098);function o(e,t){s(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function s(e,t,r=2,o=r){const s=t.length/2;let i=0,a=0;if(!(0,n.fU)(t)||(0,n.Q7)(t)){for(let n=0;n<s;++n)e[i]=t[a],e[i+1]=t[a+1],i+=r,a+=o;return}const l=(0,n.Op)(t);if((0,n.B3)(t))for(let n=0;n<s;++n)e[i]=Math.max(t[a]/l,-1),e[i+1]=Math.max(t[a+1]/l,-1),i+=r,a+=o;else for(let n=0;n<s;++n)e[i]=t[a]/l,e[i+1]=t[a+1]/l,i+=r,a+=o}function i(e,t,r,n){const o=e.typedBuffer,s=e.typedBufferStride,i=n?.count??e.count;let a=(n?.dstIndex??0)*s;for(let e=0;e<i;++e)o[a]=t,o[a+1]=r,a+=s}Object.freeze(Object.defineProperty({__proto__:null,fill:i,normalizeIntegerBuffer:s,normalizeIntegerBufferView:o},Symbol.toStringTag,{value:"Module"}))},94140:(e,t,r)=>{r.d(t,{a:()=>s,b:()=>c,l:()=>u,n:()=>a,t:()=>i});var n=r(86875),o=(r(39994),r(13802));function s(e,t,r){i(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function i(e,t,r,n=4,o=n){if(e.length/n!=t.length/o)return;const s=e.length/n,i=r[0],a=r[1],l=r[2],u=r[3],c=r[4],f=r[5],d=r[6],m=r[7],p=r[8];let h=0,g=0;for(let r=0;r<s;r++){const r=t[h],s=t[h+1],x=t[h+2],T=t[h+3];e[g]=i*r+u*s+d*x,e[g+1]=a*r+c*s+m*x,e[g+2]=l*r+f*s+p*x,e[g+3]=T,h+=o,g+=n}}function a(e,t){const r=Math.min(e.count,t.count),n=e.typedBuffer,o=e.typedBufferStride,s=t.typedBuffer,i=t.typedBufferStride;for(let e=0;e<r;e++){const t=e*o,r=e*i,a=s[r],l=s[r+1],u=s[r+2],c=a*a+l*l+u*u;if(c>0){const e=1/Math.sqrt(c);n[t]=e*a,n[t+1]=e*l,n[t+2]=e*u}}}function l(e,t,r,n=4){const o=Math.min(e.length/n,t.count),s=t.typedBuffer,i=t.typedBufferStride;let a=0,l=0;for(let t=0;t<o;t++)e[l]=r*s[a],e[l+1]=r*s[a+1],e[l+2]=r*s[a+2],e[l+3]=r*s[a+3],a+=i,l+=n}function u(e,t,r,n){c(e.typedBuffer,t,r,n,e.typedBufferStride)}function c(e,t,r,o,s=4){const i=Math.min(e.length/s,t.count),a=t.typedBuffer,l=t.typedBufferStride;let u=0,c=0;const f=1/n.jm;for(let t=0;t<i;t++)e[c]=o*(r*a[u])**f,e[c+1]=o*(r*a[u+1])**f,e[c+2]=o*(r*a[u+2])**f,e[c+3]=o*r*a[u+3],u+=l,c+=s}Object.freeze(Object.defineProperty({__proto__:null,linearToSRGB:c,linearToSRGBView:u,normalize:a,scale:l,scaleView:function(e,t,r){l(e.typedBuffer,t,r,e.typedBufferStride)},transformMat3:i,transformMat3View:s,transformMat4:function(e,t,r,n=4,s=n){if(e.length/n!=t.length/s)return void o.Z.getLogger("esri.views.3d.support.buffer.math").error("source and destination buffers need to have the same number of elements");const i=e.length/n,a=r[0],l=r[1],u=r[2],c=r[3],f=r[4],d=r[5],m=r[6],p=r[7],h=r[8],g=r[9],x=r[10],T=r[11],y=r[12],b=r[13],w=r[14],B=r[15];let v=0,S=0;for(let r=0;r<i;r++){const r=t[v],o=t[v+1],i=t[v+2],R=t[v+3];e[S]=a*r+f*o+h*i+y*R,e[S+1]=l*r+d*o+g*i+b*R,e[S+2]=u*r+m*o+x*i+w*R,e[S+3]=c*r+p*o+T*i+B*R,v+=s,S+=n}},transformMat4View:function(e,t,r){if(e.count!==t.count)return;const n=e.count,o=r[0],s=r[1],i=r[2],a=r[3],l=r[4],u=r[5],c=r[6],f=r[7],d=r[8],m=r[9],p=r[10],h=r[11],g=r[12],x=r[13],T=r[14],y=r[15],b=e.typedBuffer,w=e.typedBufferStride,B=t.typedBuffer,v=t.typedBufferStride;for(let e=0;e<n;e++){const t=e*w,r=e*v,n=B[r],S=B[r+1],R=B[r+2],M=B[r+3];b[t]=o*n+l*S+d*R+g*M,b[t+1]=s*n+u*S+m*R+x*M,b[t+2]=i*n+c*S+p*R+T*M,b[t+3]=a*n+f*S+h*R+y*M}}},Symbol.toStringTag,{value:"Module"}))},57989:(e,t,r)=>{function n(e){return e=e||globalThis.location.hostname,u.some((t=>null!=e?.match(t)))}function o(e,t){return e?(t=t||globalThis.location.hostname)?null!=t.match(s)||null!=t.match(a)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(i)||null!=t.match(l)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e:null}r.d(t,{XO:()=>n,pJ:()=>o});const s=/^devext\.arcgis\.com$/,i=/^qaext\.arcgis\.com$/,a=/^[\w-]*\.mapsdevext\.arcgis\.com$/,l=/^[\w-]*\.mapsqa\.arcgis\.com$/,u=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,s,i,/^jsapps\.esri\.com$/,a,l]},98726:(e,t,r)=>{r.d(t,{i:()=>i});var n=r(3965),o=r(45867),s=r(46332);function i(e){if(null==e)return null;const t=null!=e.offset?e.offset:o.AG,r=null!=e.rotation?e.rotation:0,i=null!=e.scale?e.scale:o.hq,a=(0,n.al)(1,0,0,0,1,0,t[0],t[1],1),l=(0,n.al)(Math.cos(r),-Math.sin(r),0,Math.sin(r),Math.cos(r),0,0,0,1),u=(0,n.al)(i[0],0,0,0,i[1],0,0,0,1),c=(0,n.Ue)();return(0,s.Jp)(c,l,u),(0,s.Jp)(c,a,c),c}},1731:(e,t,r)=>{r.d(t,{p:()=>i});var n=r(86098),o=r(35914),s=r(91907);function i(e,t){switch(t){case s.MX.TRIANGLES:return"number"==typeof(r=e)?(0,o.KF)(r):(0,n.lq)(r)?new Uint16Array(r):r;case s.MX.TRIANGLE_STRIP:return function(e){const t="number"==typeof e?e:e.length;if(t<3)return[];const r=t-2,n=(0,o.$z)(3*r);if("number"==typeof e){let e=0;for(let t=0;t<r;t+=1)t%2==0?(n[e++]=t,n[e++]=t+1,n[e++]=t+2):(n[e++]=t+1,n[e++]=t,n[e++]=t+2)}else{let t=0;for(let o=0;o<r;o+=1)o%2==0?(n[t++]=e[o],n[t++]=e[o+1],n[t++]=e[o+2]):(n[t++]=e[o+1],n[t++]=e[o],n[t++]=e[o+2])}return n}(e);case s.MX.TRIANGLE_FAN:return function(e){const t="number"==typeof e?e:e.length;if(t<3)return new Uint16Array(0);const r=t-2,n=r<=65536?new Uint16Array(3*r):new Uint32Array(3*r);if("number"==typeof e){let e=0;for(let t=0;t<r;++t)n[e++]=0,n[e++]=t+1,n[e++]=t+2;return n}const o=e[0];let s=e[1],i=0;for(let t=0;t<r;++t){const r=e[t+2];n[i++]=o,n[i++]=s,n[i++]=r,s=r}return n}(e)}var r}},95970:(e,t,r)=>{r.d(t,{$A:()=>i,Ml:()=>l,NM:()=>s,i$:()=>a});var n=r(39994),o=r(70984);class s{constructor(e){this.data=e,this.type="encoded-mesh-texture",this.encoding=o.Ti.KTX2_ENCODING}}function i(e){return"encoded-mesh-texture"===e?.type}async function a(e){const t=new Blob([e]),r=await t.text();return JSON.parse(r)}async function l(e,t){if(t===o.Ti.KTX2_ENCODING)return new s(e);const r=new Blob([e],{type:t});let i=URL.createObjectURL(r);switch(t){case"image/jpeg":i+="#.jpg";break;case"image/png":i+="#.png"}const a=new Image;if((0,n.Z)("esri-iPhone"))return new Promise(((e,t)=>{const r=()=>{o(),e(a)},n=e=>{o(),t(e)},o=()=>{URL.revokeObjectURL(i),a.removeEventListener("load",r),a.removeEventListener("error",n)};a.addEventListener("load",r),a.addEventListener("error",n),a.src=i}));try{a.src=i,await a.decode()}catch(e){console.warn("Failed decoding HTMLImageElement")}return URL.revokeObjectURL(i),a}},63932:(e,t,r)=>{r.r(t),r.d(t,{fetch:()=>F,parseUrl:()=>C});var n=r(86875),o=r(57989),s=r(19431),i=r(46332),a=r(3965),l=r(32114),u=r(3308),c=r(84164),f=r(86717),d=r(81095),m=r(37116),p=r(31725),h=r(81936),g=r(6766),x=r(94140),T=r(55709),y=r(91420),b=r(1731),w=r(95970),B=r(98726);class v{constructor(){this.geometries=new Array,this.materials=new Array,this.textures=new Array}}class S{constructor(e,t,r){this.name=e,this.lodThreshold=t,this.pivotOffset=r,this.stageResources=new v,this.numberOfVertices=0}}var R=r(1305),M=r(7792),A=r(85799),L=r(70984),O=r(63885),E=r(44101),I=r(21414),U=r(46151),_=r(19765);async function F(e,t){const a=C((0,o.pJ)(e));if("wosr"===a.fileType){const e=await(t.cache?t.cache.loadWOSR(a.url,t):(0,R.zD)(a.url,t)),{engineResources:r,referenceBoundingBox:n}=(0,R.p2)(e,t);return{lods:r,referenceBoundingBox:n,isEsriSymbolResource:!1,isWosr:!0}}let v;if(t.cache)v=await t.cache.loadGLTF(a.url,t,!!t.usePBR);else{const{loadGLTF:e}=await r.e(85636).then(r.bind(r,85636));v=await e(new y.C(t.streamDataRequester),a.url,t,t.usePBR)}const F=v.model.meta?.ESRI_proxyEllipsoid,k=v.meta.isEsriSymbolResource&&null!=F&&"EsriRealisticTreesStyle"===v.meta.ESRI_webstyle;k&&!v.customMeta.esriTreeRendering&&(v.customMeta.esriTreeRendering=!0,function(e,t){for(let r=0;r<e.model.lods.length;++r){const o=e.model.lods[r];for(const s of o.parts){const o=s.attributes.normal;if(null==o)return;const i=s.attributes.position,a=i.count,c=(0,d.Ue)(),m=(0,d.Ue)(),p=(0,d.Ue)(),g=new Float32Array(4*a),x=new Float32Array(3*a),T=(0,l.U_)((0,u.Ue)(),s.transform);let y=0,b=0;for(let l=0;l<a;l++){i.getVec(l,m),o.getVec(l,c),(0,f.t)(m,m,s.transform),(0,f.d)(p,m,t.center),(0,f.E)(p,p,t.radius);const a=p[2],u=(0,f.l)(p),d=Math.min(.45+.55*u*u,1)**n.jm;(0,f.E)(p,p,t.radius),null!==T&&(0,f.t)(p,p,T),(0,f.n)(p,p),r+1!==e.model.lods.length&&e.model.lods.length>1&&(0,f.m)(p,p,c,a>-1?.2:Math.min(-4*a-3.8,1)),x[y]=p[0],x[y+1]=p[1],x[y+2]=p[2],y+=3,g[b]=d,g[b+1]=d,g[b+2]=d,g[b+3]=1,b+=4}s.attributes.normal=new h.ct(x),s.attributes.color=new h.ek(g)}}}(v,F));const j=!!t.usePBR,G=v.meta.isEsriSymbolResource?{usePBR:j,isSchematic:!1,treeRendering:k,mrrFactors:_.eP}:{usePBR:j,isSchematic:!1,treeRendering:!1,mrrFactors:_.xq},J={...t.materialParameters,treeRendering:k},{engineResources:P,referenceBoundingBox:V}=function(e,t,r,o,a){const l=e.model,u=new Array,f=new Map,d=new Map,y=l.lods.length,v=(0,m.cS)();return l.lods.forEach(((e,R)=>{const F=!0===o.skipHighLods&&(y>1&&0===R||y>3&&1===R)||!1===o.skipHighLods&&null!=a&&R!==a;if(F&&0!==R)return;const C=new S(e.name,e.lodThreshold,[0,0,0]);e.parts.forEach((e=>{const a=F?new U.Gp({},o):function(e,t,r,o,s,i,a,l){const u=e.materials.get(t.material);if(null==u)return null;const{normal:f,color:d,texCoord0:m,tangent:p}=t.attributes,h=t.material+(f?"_normal":"")+(d?"_color":"")+(m?"_texCoord0":"")+(p?"_tangent":""),g=null!=t.attributes.texCoord0,x=null!=t.attributes.normal,T=function(e){switch(e){case"BLEND":return L.JJ.Blend;case"MASK":return L.JJ.Mask;case"OPAQUE":case null:case void 0:return L.JJ.Opaque}}(u.alphaMode);if(!i.has(h)){if(g){const t=(t,r=!1)=>{if(null!=t&&!a.has(t)){const n=e.textures.get(t);if(n){const e=n.data;a.set(t,new E.x((0,w.$A)(e)?e.data:e,{...n.parameters,preMultiplyAlpha:!(0,w.$A)(e)&&r,encoding:(0,w.$A)(e)?e.encoding:void 0}))}}};t(u.colorTexture,T!==L.JJ.Opaque),t(u.normalTexture),t(u.occlusionTexture),t(u.emissiveTexture),t(u.metallicRoughnessTexture)}const r=1/n.jm,f=u.color[0]**r,d=u.color[1]**r,m=u.color[2]**r,p=u.emissiveFactor[0]**r,y=u.emissiveFactor[1]**r,b=u.emissiveFactor[2]**r,v=null!=u.colorTexture&&g?a.get(u.colorTexture):null,S=(0,_.Ih)(u),R=null!=u.normalTextureTransform?.scale?u.normalTextureTransform?.scale:c.hq;i.set(h,new U.Gp({...o,transparent:T===L.JJ.Blend,customDepthTest:L.Gv.Lequal,textureAlphaMode:T,textureAlphaCutoff:u.alphaCutoff,diffuse:[f,d,m],ambient:[f,d,m],opacity:u.opacity,doubleSided:u.doubleSided,doubleSidedType:"winding-order",cullFace:u.doubleSided?L.Vr.None:L.Vr.Back,hasVertexColors:!!t.attributes.color,hasVertexTangents:!!t.attributes.tangent,normalType:x?M.r.Attribute:M.r.ScreenDerivative,castShadows:!0,receiveShadows:u.receiveShadows,receiveAmbientOcclusion:u.receiveAmbientOcclustion,textureId:null!=v?v.id:void 0,colorMixMode:u.colorMixMode,normalTextureId:null!=u.normalTexture&&g?a.get(u.normalTexture).id:void 0,textureAlphaPremultiplied:null!=v&&!!v.parameters.preMultiplyAlpha,occlusionTextureId:null!=u.occlusionTexture&&g?a.get(u.occlusionTexture).id:void 0,emissiveTextureId:null!=u.emissiveTexture&&g?a.get(u.emissiveTexture).id:void 0,metallicRoughnessTextureId:null!=u.metallicRoughnessTexture&&g?a.get(u.metallicRoughnessTexture).id:void 0,emissiveFactor:[p,y,b],mrrFactors:S?_.S7:[u.metallicFactor,u.roughnessFactor,o.mrrFactors[2]],isSchematic:S,colorTextureTransformMatrix:(0,B.i)(u.colorTextureTransform),normalTextureTransformMatrix:(0,B.i)(u.normalTextureTransform),scale:[R[0],R[1]],occlusionTextureTransformMatrix:(0,B.i)(u.occlusionTextureTransform),emissiveTextureTransformMatrix:(0,B.i)(u.emissiveTextureTransform),metallicRoughnessTextureTransformMatrix:(0,B.i)(u.metallicRoughnessTextureTransform),...s},l))}const y=i.get(h);if(r.stageResources.materials.push(y),g){const e=e=>{null!=e&&r.stageResources.textures.push(a.get(e))};e(u.colorTexture),e(u.normalTexture),e(u.occlusionTexture),e(u.emissiveTexture),e(u.metallicRoughnessTexture)}return y}(l,e,C,t,r,f,d,o),{geometry:u,vertexCount:y}=function(e,t){const r=e.attributes.position.count,n=(0,b.p)(e.indices||r,e.primitiveType),o=(0,p.xx)(3*r),{typedBuffer:a,typedBufferStride:l}=e.attributes.position;(0,g.t)(o,a,e.transform,3,l);const u=[[I.T.POSITION,new A.a(o,n,3,!0)]];if(null!=e.attributes.normal){const t=(0,p.xx)(3*r),{typedBuffer:o,typedBufferStride:a}=e.attributes.normal;(0,i.XL)(N,e.transform),(0,g.b)(t,o,N,3,a),(0,s.oc)(N)&&(0,g.n)(t,t),u.push([I.T.NORMAL,new A.a(t,n,3,!0)])}if(null!=e.attributes.tangent){const t=(0,p.xx)(4*r),{typedBuffer:o,typedBufferStride:a}=e.attributes.tangent;(0,i.xO)(N,e.transform),(0,x.t)(t,o,N,4,a),(0,s.oc)(N)&&(0,g.n)(t,t,4),u.push([I.T.TANGENT,new A.a(t,n,4,!0)])}if(null!=e.attributes.texCoord0){const t=(0,p.xx)(2*r),{typedBuffer:o,typedBufferStride:s}=e.attributes.texCoord0;(0,T.a)(t,o,2,s),u.push([I.T.UV0,new A.a(t,n,2,!0)])}const c=e.attributes.color;if(null!=c){const t=new Uint8Array(4*r);4===c.elementCount?c instanceof h.ek?(0,x.b)(t,c,1,255):(c instanceof h.mc||c instanceof h.v6)&&(0,x.b)(t,c,1/255,255):(t.fill(255),c instanceof h.ct?(0,g.f)(t,c.typedBuffer,1,255,4,c.typedBufferStride):(e.attributes.color instanceof h.ne||e.attributes.color instanceof h.mw)&&(0,g.f)(t,c.typedBuffer,1/255,255,4,e.attributes.color.typedBufferStride)),u.push([I.T.COLOR,new A.a(t,n,4,!0)])}return{geometry:new O.Z(t,u),vertexCount:r}}(e,a??new U.Gp({},o)),S=u.boundingInfo;null!=S&&0===R&&((0,m.pp)(v,S.bbMin),(0,m.pp)(v,S.bbMax)),null!=a&&(C.stageResources.geometries.push(u),C.numberOfVertices+=y)})),F||u.push(C)})),{engineResources:u,referenceBoundingBox:v}}(v,G,J,t,a.specifiedLodIndex);return{lods:P,referenceBoundingBox:V,isEsriSymbolResource:v.meta.isEsriSymbolResource,isWosr:!1}}function C(e){const t=e.match(/(.*\.(gltf|glb))(\?lod=([0-9]+))?$/);return t?{fileType:"gltf",url:t[1],specifiedLodIndex:null!=t[4]?Number(t[4]):null}:e.match(/(.*\.(json|json\.gz))$/)?{fileType:"wosr",url:e,specifiedLodIndex:null}:{fileType:"unknown",url:e,specifiedLodIndex:null}}const N=(0,a.Ue)()}}]);