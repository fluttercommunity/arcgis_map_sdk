"use strict";(self.webpackChunkarcgis_webpack01=self.webpackChunkarcgis_webpack01||[]).push([[94136],{94136:(e,t,i)=>{i.r(t),i.d(t,{ElevationProfileView2D:()=>L});var o=i(44584),n=i(61681),s=i(76868),r=i(89815),a=i(55109),l=i(67979),h=i(78668),d=i(42780);class c{constructor(e){this._params=e,this._highlightTask=null,this._highlightHandle=null}destroy(){this.remove()}remove(){this._highlightTask=(0,n.IM)(this._highlightTask),this._highlightHandle=(0,n.hw)(this._highlightHandle)}update(e){if(this.remove(),null==e||(null==(t=e).geometry||"polyline"!==t.geometry.type))return;var t;const i=e.layer;this._highlightTask=(0,l.vr)((async t=>{const o=await this._params.view.whenLayerView(i);(0,h.k_)(t);const n=(0,d.tl)(o)?o:null;n&&(this._highlightHandle=n.highlight(e))}))}}var p=i(36663),u=i(80085),v=i(74396),_=i(39043),y=i(618),g=i(81977),w=(i(39994),i(13802),i(4157),i(40266)),m=i(45857),f=i(62589),b=i(91792);let P=class extends v.Z{constructor(e){super(e),this._chartData=null,this._graphic=new u.Z,this._layer=new m.Z({listMode:"hide",internal:!0,title:"Profile line"}),this._update=e=>{const{chartData:t}=e;if(null==t)return this.remove();if(!t.refined)return;const i=t.lines.find((e=>e.viewVisualizationEnabled));if(!i)return;this._graphic.geometry=(0,b.L)(i,e.spatialReference),this._graphic.symbol=new f.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[5,10],lineDashEnding:"HalfPattern",controlPointEnding:"HalfPattern"}],capStyle:"Butt",width:1.5,color:i.color.toArray()},{type:"CIMSolidStroke",capStyle:"Butt",width:2,color:(0,_.mj)(i.color).toArray()}]}}});const o=this.view?.map?.layers;o&&!o.includes(this._layer)&&o.add(this._layer)}}initialize(){this._layer.add(this._graphic);const e=(0,r.iE)().profileLinesUpdateThrottleMillis;let t=this._update;if(e>0){const i=(0,y.P)(this._update,e);this.addHandles(i),t=i}this.addHandles((0,s.YP)((()=>({spatialReference:this.view.spatialReference,chartData:this._chartData})),t,s.tX))}destroy(){this.remove()}remove(){this.view?.map?.remove(this._layer)}update(e){this._chartData=e}};(0,p._)([(0,g.Cb)()],P.prototype,"view",void 0),(0,p._)([(0,g.Cb)()],P.prototype,"_chartData",void 0),P=(0,p._)([(0,w.j)("esri.widgets.ElevationProfile.support.ProfileLine2D")],P);class L{constructor(e,t){this._handles=new o.Z,this._inputRepresentation=new c({view:e}),this._hoveredPoints=new a.l({view:e}),this._profileLine=new P({view:e}),this._handles.add([(0,s.YP)((()=>t.viewModel.hoveredPoints),(e=>this._hoveredPoints.update(e)),s.tX),(0,s.YP)((()=>{const{state:e,highlightEnabled:i,viewModel:o}=t;return{input:o.input,state:e,highlightEnabled:i}}),(e=>this._updateInputRepresentation(e)),s.tX),(0,s.YP)((()=>t.viewModel.chartData),(e=>this._profileLine.update(e)),s.tX),(0,s.YP)((()=>t.viewModel.input?.geometry),(()=>{this._profileLine.remove()}),s.tX)])}destroy(){this._handles=(0,n.SC)(this._handles),this._inputRepresentation=(0,n.SC)(this._inputRepresentation),this._hoveredPoints=(0,n.SC)(this._hoveredPoints),this._profileLine=(0,n.SC)(this._profileLine)}_updateInputRepresentation({input:e,state:t,highlightEnabled:i}){t===r.dd.Selected&&i?this._inputRepresentation.update(e):this._inputRepresentation.remove()}}},55109:(e,t,i)=>{i.d(t,{l:()=>c});var o=i(36663),n=i(74396),s=i(41831),r=i(76868),a=i(81977),l=(i(39994),i(13802),i(4157),i(40266)),h=i(89815),d=i(83097);let c=class extends n.Z{constructor(e){super(e),this._hoveredPoints=new s.Z}initialize(){this.addHandles((0,r.YP)((()=>this._hoveredPoints.toArray().map((({anchor:e,element:t})=>({screenLocation:e.screenLocation,element:t})))),(e=>{for(const{screenLocation:t,element:i}of e)t&&(i.style.transform=`translate(${t.x}px, ${t.y}px)`)}),r.tX))}destroy(){this._hoveredPoints.drain((e=>this._destroyHoveredPoint(e)))}update(e){const t=this.view,i=this._hoveredPoints,o=e.length;for(;this._hoveredPoints.length>o;)this._destroyHoveredPoint(this._hoveredPoints.pop());for(;this._hoveredPoints.length<o;){const e=this._makeHoveredPoint();i.push(e),t.surface?.appendChild(e.element)}for(let t=0;t<o;++t){const n=i.at(o-1-t),s=e[t];this._updateHoveredPoint(n,s)}}_makeHoveredPoint(){const{size:e,borderStyle:t,borderColor:i,borderWidth:o,boxShadow:n}=(0,h.iE)().hoveredPointsStyle,s=this.view,r=new d.Z({view:s,screenLocationEnabled:!0}),a=document.createElement("div"),l=a.style;return l.position="absolute",l.top="0",l.left="0",l.contain="strict",l.boxSizing="border-box",l.width=`${e}px`,l.height=`${e}px`,l.marginTop=`-${e/2}px`,l.marginLeft=`-${e/2}px`,l.border=`${t} ${o}px ${i}`,l.borderRadius=`${e}px`,l.boxShadow=n,{anchor:r,element:a}}_updateHoveredPoint({anchor:e,element:t},i){e.screenLocationEnabled=!0,e.location=i.hoveredPoint;const o=t.style;o.display="block",o.background=i.color.toCss()}_destroyHoveredPoint({anchor:e,element:t}){e.destroy(),this.view.surface?.removeChild(t)}};(0,o._)([(0,a.Cb)()],c.prototype,"view",void 0),(0,o._)([(0,a.Cb)()],c.prototype,"_hoveredPoints",void 0),c=(0,o._)([(0,l.j)("esri.widgets.ElevationProfile.support.HoveredPoints")],c)},91792:(e,t,i)=>{i.d(t,{L:()=>n});var o=i(90819);function n(e,t){const i=e.samples??[],n=i.length-1,s=[];let r=[];for(let e=0;e<=n;e++){const{x:t,y:o,z:a}=i[e];null!=a&&r.push([t,o,a]),e!==n&&null!=a||!r.length||(s.push(r),r=[])}return new o.Z({paths:s,hasZ:!0,spatialReference:t})}},83097:(e,t,i)=>{i.d(t,{Z:()=>d});var o=i(36663),n=i(31355),s=i(76868),r=i(81977),a=(i(39994),i(13802),i(4157),i(40266)),l=i(90472);let h=class extends n.Z.EventedAccessor{constructor(e){super(e),this.location=null,this.screenLocationEnabled=!1,this.view=null,this.addHandles([(0,s.gx)((()=>{const e=this.screenLocationEnabled?this.view:null;return e?[e.size,"3d"===e.type?e.camera:e.viewpoint]:null}),(()=>this.notifyChange("screenLocation"))),(0,s.YP)((()=>this.screenLocation),((e,t)=>{null!=e&&null!=t&&this.emit("view-change")}))])}destroy(){this.view=null}get screenLocation(){const{location:e,view:t,screenLocationEnabled:i}=this,o=t?.spatialReference,n=o?(0,l.projectOrLoad)(e,o).geometry:null;return i&&n&&t?.ready?t.toScreen(n):null}};(0,o._)([(0,r.Cb)()],h.prototype,"location",void 0),(0,o._)([(0,r.Cb)()],h.prototype,"screenLocation",null),(0,o._)([(0,r.Cb)()],h.prototype,"screenLocationEnabled",void 0),(0,o._)([(0,r.Cb)()],h.prototype,"view",void 0),h=(0,o._)([(0,a.j)("esri.widgets.support.AnchorElementViewModel")],h);const d=h}}]);