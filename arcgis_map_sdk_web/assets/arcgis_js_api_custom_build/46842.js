"use strict";(self.webpackChunkarcgis_webpack01=self.webpackChunkarcgis_webpack01||[]).push([[46842],{46842:(t,e,r)=>{r.r(e),r.d(e,{default:()=>U});var o=r(36663),s=r(66341),n=r(70375),i=r(19431),p=r(15842),a=r(76868),u=r(81977),l=(r(39994),r(13802),r(4157),r(34248)),c=r(40266),d=r(91772),y=r(90819),h=r(14685),m=r(38481),C=r(27668),v=r(63989),g=r(95874),f=r(20692),b=r(23072),_=r(41151),S=r(82064);let O=class extends(_.Z.ClonableMixin(S.Z)){constructor(t){super(t),this.framerate=null,this.containerFormat=null,this.gop=null,this.aspectRatio=null,this.klv=null}};(0,o._)([(0,u.Cb)({type:String})],O.prototype,"framerate",void 0),(0,o._)([(0,u.Cb)({type:String})],O.prototype,"containerFormat",void 0),(0,o._)([(0,u.Cb)({type:Number})],O.prototype,"gop",void 0),(0,o._)([(0,u.Cb)({type:String})],O.prototype,"aspectRatio",void 0),(0,o._)([(0,u.Cb)({type:Object})],O.prototype,"klv",void 0),O=(0,o._)([(0,c.j)("esri.layers.support.PlaybackInfo")],O);const T=O;var x=r(86254),P=r(99347),Q=r(14148),R=r(74396),F=r(39835),w=r(10186);let A=class extends R.Z{constructor(){super(...arguments),this.sourcePoint=null,this.mapPoint=null}};(0,o._)([(0,u.Cb)()],A.prototype,"sourcePoint",void 0),(0,o._)([(0,u.Cb)({type:w.Z})],A.prototype,"mapPoint",void 0),A=(0,o._)([(0,c.j)("esri.layers.support.VideoFrame.ControlPoint")],A);let B=class extends(_.Z.ClonableMixin(S.Z)){constructor(t){super(t),this.frame=null,this.controlPoints=null}readControlPoints(t){return t.map((t=>({sourcePoint:{x:t.frameX,y:t.frameY},mapPoint:new w.Z(t.point)})))}writeControlPoints(t,e){null!=t&&function(t){return null!=t?.sourcePoint&&null!=t.mapPoint}(t[0])&&(e.controlPoints=t.map((t=>{const e=t.sourcePoint,r=t.mapPoint;return{frameX:e.x,frameY:e.y,point:r.toJSON()}})))}};(0,o._)([(0,u.Cb)({type:String})],B.prototype,"frame",void 0),(0,o._)([(0,u.Cb)({type:[A],json:{write:{allowNull:!1,isRequired:!0}}})],B.prototype,"controlPoints",void 0),(0,o._)([(0,l.r)("controlPoints")],B.prototype,"readControlPoints",null),(0,o._)([(0,F.c)("controlPoints")],B.prototype,"writeControlPoints",null),B=(0,o._)([(0,c.j)("esri.layers.support.VideoFrame")],B);const I=B;var E=r(80974),D=r(90581);let M=class extends((0,C.h7)((0,g.M)((0,p.R)((0,v.N)(m.Z))))){constructor(t){super(t),this._trailPoints=[],this.capabilities=null,this.connectionInfo=null,this.controller=new E.default,this.copyright=null,this.created=null,this.description=null,this.elevationSource=null,this.frame=null,this.frameCount=null,this.fullExtent=null,this.initialExtent=null,this.layerId=null,this.playbackInfo=null,this.posterUrl=null,this.qualities=null,this.serviceItemId=null,this.sourceJSON=null,this.sourceQuality=null,this.sourceType=null,this.spatialReference=h.Z.WGS84,this.telemetryDisplay=null,this.title=null,this.type="video",this.url=null,this.videoLayersInfo=null,this.videoTimeExtent=null}initialize(){this.telemetryDisplay=new Q.Z({frame:!1,frameCenter:!1,frameOutline:!0,lineOfSight:!0,sensorLocation:!0,sensorTrail:!0}),this.addHandles([(0,a.watch)((()=>this.metadata),(()=>{this.notifyChange("telemetry"),this.notifyChange("groundControlPoints"),this.notifyChange("frameHorizonPoints")})),(0,a.watch)((()=>this.telemetry?.sensorLocation),(t=>this._setSensorTrail(t)),a.initial)])}load(t){const e=null!=t?t.signal:null;return this.addResolvingPromise(this._fetchService(e)),Promise.resolve(this)}get buffered(){return this.controller.buffered}readCapabilitiesFromService(t,e){return(0,x.j)(e)}readConnectionInfo(t,e){const r=Object.values(e.connectionUrl);return r?.length&&(this.controller.playerUrl=r[0]),e.connectionUrl}get currentTime(){return this.controller.currentTime}get duration(){return this.controller.duration}get ended(){return this.controller.ended}get frameHorizonPoints(){return(0,D.F8)(this.metadata)}get groundControlPoints(){return(0,D.Hi)(this.metadata)}get loop(){return this.controller.loop}set loop(t){this.controller.loop=t}get metadata(){return this.controller?.currentMetadata}get mimeType(){return this.controller?.mimeType}get muted(){return this.controller.muted}set muted(t){this.controller.muted=t}get playbackRate(){return this.controller.rate}set playbackRate(t){this.controller.rate=t}get playerUrl(){return this.controller.playerUrl}get playing(){return this.controller.playing}get state(){return this.controller.state}get telemetry(){return(0,D.ME)(this.metadata)}get videoElement(){return this.controller?.element}get videoHeight(){return this.controller?.videoHeight}readLayerInfosFromService(t,e){return(0,D.ge)(e)}get videoWidth(){return this.controller?.videoWidth}get waiting(){return this.controller.waiting}play(){this.controller.play()}pause(){this.controller.pause()}reset(){this.controller.reset()}setCurrentTime(t){if(!this.duration)return;const e=(0,i.uZ)(t,0,this.duration);this.controller.setCurrentTime(e)}toGround(t,e){return this.controller?.sensorModel?.metadataSupportsTransforms?this.controller.sensorModel.transformImageToGeo(t,e):null}toVideo(t){if(!this.controller?.sensorModel?.metadataSupportsTransforms)return null;const e=this.controller.sensorModel.transformGeoToImage(t.x,t.y,t.z);return{x:e[0],y:e[1]}}async _fetchService(t){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const e=(0,f.Qc)(this.parsedUrl?.path);if(null==e)throw new n.Z("arcgis-layers:url-mismatch","The url is not a valid arcgis resource");let r=null;const{data:o,ssl:i}=await(0,s.Z)(e.url.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters},signal:t}),p=o;if(this.url=e.url.path,i&&(this.url=this.url.replace(/^http:/i,"https:")),!p?.currentVersion)return p.currentVersion="11.2",this.sourceJSON=p,void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});let a=e?.sublayer;if(null==a&&p.layers?.length&&(a=p.layers[0].id),null==a)throw new n.Z("arcgis-layers:url-mismatch","The url is not a valid arcgis resource");this.url=`${e.url.path}/${a}`,r=await(0,s.Z)(this.url,{query:{f:"json",...this.customParameters},signal:t});const u={...p,...r.data};this.sourceJSON=u,this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl})}_setSensorTrail(t){if(!t)return;const e=(0,D.F7)(t,this._trailPoints);this._trailPoints=[...e];const r=this._trailPoints.map((t=>t.toArray())),o=new y.Z({hasZ:t.hasZ,paths:[r]});this.telemetry.sensorTrail=o.clone()}};(0,o._)([(0,u.Cb)({readOnly:!0})],M.prototype,"buffered",null),(0,o._)([(0,u.Cb)({readOnly:!0,json:{read:!1}})],M.prototype,"capabilities",void 0),(0,o._)([(0,l.r)("service","capabilities",["supportsAppend","supportsCoverageQuery","supportsExportClip","supportsExportFrameset","supportsMensuration","supportsUpdate"])],M.prototype,"readCapabilitiesFromService",null),(0,o._)([(0,u.Cb)({readOnly:!0})],M.prototype,"connectionInfo",void 0),(0,o._)([(0,l.r)("connectionInfo",["connectionUrl"])],M.prototype,"readConnectionInfo",null),(0,o._)([(0,u.Cb)()],M.prototype,"controller",void 0),(0,o._)([(0,u.Cb)({type:String})],M.prototype,"copyright",void 0),(0,o._)([(0,u.Cb)({readOnly:!0,type:Date})],M.prototype,"created",void 0),(0,o._)([(0,u.Cb)({type:Number})],M.prototype,"currentTime",null),(0,o._)([(0,u.Cb)({type:String})],M.prototype,"description",void 0),(0,o._)([(0,u.Cb)({type:Number})],M.prototype,"duration",null),(0,o._)([(0,u.Cb)({readOnly:!0})],M.prototype,"elevationSource",void 0),(0,o._)([(0,u.Cb)({type:Boolean})],M.prototype,"ended",null),(0,o._)([(0,u.Cb)({type:I})],M.prototype,"frame",void 0),(0,o._)([(0,u.Cb)({readOnly:!0,type:Number})],M.prototype,"frameCount",void 0),(0,o._)([(0,u.Cb)({type:d.Z})],M.prototype,"fullExtent",void 0),(0,o._)([(0,u.Cb)({readOnly:!0})],M.prototype,"frameHorizonPoints",null),(0,o._)([(0,u.Cb)({readOnly:!0})],M.prototype,"groundControlPoints",null),(0,o._)([(0,u.Cb)({type:d.Z})],M.prototype,"initialExtent",void 0),(0,o._)([(0,u.Cb)({readOnly:!0,json:{read:{source:"id"}}})],M.prototype,"layerId",void 0),(0,o._)([(0,u.Cb)({type:Boolean})],M.prototype,"loop",null),(0,o._)([(0,u.Cb)({readOnly:!0})],M.prototype,"metadata",null),(0,o._)([(0,u.Cb)({readOnly:!0})],M.prototype,"mimeType",null),(0,o._)([(0,u.Cb)({type:Boolean})],M.prototype,"muted",null),(0,o._)([(0,u.Cb)({type:T})],M.prototype,"playbackInfo",void 0),(0,o._)([(0,u.Cb)({type:Number})],M.prototype,"playbackRate",null),(0,o._)([(0,u.Cb)({type:String})],M.prototype,"playerUrl",null),(0,o._)([(0,u.Cb)({readOnly:!0})],M.prototype,"playing",null),(0,o._)([(0,u.Cb)({readOnly:!0,json:{read:{source:"poster"}}})],M.prototype,"posterUrl",void 0),(0,o._)([(0,u.Cb)({readOnly:!0})],M.prototype,"qualities",void 0),(0,o._)([(0,u.Cb)({readOnly:!0})],M.prototype,"serviceItemId",void 0),(0,o._)([(0,u.Cb)()],M.prototype,"sourceJSON",void 0),(0,o._)([(0,u.Cb)({readOnly:!0})],M.prototype,"sourceQuality",void 0),(0,o._)([(0,u.Cb)({readOnly:!0,json:{name:"serviceType"}})],M.prototype,"sourceType",void 0),(0,o._)([(0,u.Cb)()],M.prototype,"spatialReference",void 0),(0,o._)([(0,u.Cb)({readOnly:!0,type:String})],M.prototype,"state",null),(0,o._)([(0,u.Cb)({readOnly:!0,type:P.Z})],M.prototype,"telemetry",null),(0,o._)([(0,u.Cb)({type:Q.Z})],M.prototype,"telemetryDisplay",void 0),(0,o._)([(0,u.Cb)({readOnly:!1,json:{read:{source:"name"}}})],M.prototype,"title",void 0),(0,o._)([(0,u.Cb)({readOnly:!0})],M.prototype,"type",void 0),(0,o._)([(0,u.Cb)(b.HQ)],M.prototype,"url",void 0),(0,o._)([(0,u.Cb)({readOnly:!0})],M.prototype,"videoElement",null),(0,o._)([(0,u.Cb)({readOnly:!0})],M.prototype,"videoHeight",null),(0,o._)([(0,u.Cb)({readOnly:!0,json:{read:!1}})],M.prototype,"videoLayersInfo",void 0),(0,o._)([(0,l.r)("service","videoLayersInfo",["id","name","poster","serviceType","type"])],M.prototype,"readLayerInfosFromService",null),(0,o._)([(0,u.Cb)({readOnly:!0,nonNullable:!1,json:{read:{reader:D.VW,source:"time"}}})],M.prototype,"videoTimeExtent",void 0),(0,o._)([(0,u.Cb)({readOnly:!0})],M.prototype,"videoWidth",null),(0,o._)([(0,u.Cb)({readOnly:!0})],M.prototype,"waiting",null),M=(0,o._)([(0,c.j)("esri.layers.VideoLayer")],M);const U=M},14148:(t,e,r)=>{r.d(e,{Z:()=>u});var o=r(36663),s=r(41151),n=r(82064),i=r(81977),p=(r(39994),r(13802),r(4157),r(40266));let a=class extends(s.Z.ClonableMixin(n.Z)){constructor(t){super(t),this.frame=null,this.frameCenter=null,this.frameOutline=null,this.lineOfSight=null,this.sensorLocation=null,this.sensorTrail=null}};(0,o._)([(0,i.Cb)({type:Boolean})],a.prototype,"frame",void 0),(0,o._)([(0,i.Cb)({type:Boolean})],a.prototype,"frameCenter",void 0),(0,o._)([(0,i.Cb)({type:Boolean})],a.prototype,"frameOutline",void 0),(0,o._)([(0,i.Cb)({type:Boolean})],a.prototype,"lineOfSight",void 0),(0,o._)([(0,i.Cb)({type:Boolean})],a.prototype,"sensorLocation",void 0),(0,o._)([(0,i.Cb)({type:Boolean})],a.prototype,"sensorTrail",void 0),a=(0,o._)([(0,p.j)("esri.layers.support.TelemetryDisplay")],a);const u=a},86254:(t,e,r)=>{r.d(e,{h:()=>h,j:()=>x});var o=r(39994),s=r(20692),n=r(13449);function i(t,e,r){return!!a(t,e,r)}function p(t,e,r){return a(t,e,r)}function a(t,e,r){return t&&t.hasOwnProperty(e)?t[e]:r}const u={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function l(t){const e=t?.supportedSpatialAggregationStatistics?.map((t=>t.toLowerCase()));return{envelope:!!e?.includes("envelopeaggregate"),centroid:!!e?.includes("centroidaggregate"),convexHull:!!e?.includes("convexhullaggregate")}}function c(t,e){const r=t?.supportedOperationsWithCacheHint?.map((t=>t.toLowerCase()));return!!r?.includes(e.toLowerCase())}function d(t){const e=t?.supportedStatisticTypes?.map((t=>t.toLowerCase()));return{count:!!e?.includes("count"),sum:!!e?.includes("sum"),min:!!e?.includes("min"),max:!!e?.includes("max"),avg:!!e?.includes("avg"),var:!!e?.includes("var"),stddev:!!e?.includes("stddev"),percentileContinuous:!!e?.includes("percentile_continuous"),percentileDiscrete:!!e?.includes("percentile_discrete"),envelope:!!e?.includes("envelopeaggregate"),centroid:!!e?.includes("centroidaggregate"),convexHull:!!e?.includes("convexhullaggregate")}}function y(t){const e=t?.supportedNormalizationTypes?.map((t=>t.toLowerCase()));return{field:!!e?.includes("field"),log:!!e?.includes("log"),naturalLog:!!e?.includes("naturallog"),percentOfTotal:!!e?.includes("percentoftotal"),squareRoot:!!e?.includes("squareroot")}}function h(t,e){return{analytics:m(t),attachment:C(t),data:v(t),metadata:g(t),operations:f(t.capabilities,t,e),query:b(t,e),queryAttributeBins:O(t),queryRelated:_(t),queryTopFeatures:S(t),editing:T(t)}}function m(t){return{supportsCacheHint:c(t.advancedQueryCapabilities,"queryAnalytics")}}function C(t){const e=t.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:c(t.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:i(t.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:i(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach((t=>{const e=u[t.name];e&&(r[e]=!!t.isEnabled)})),r}function v(t){return{isVersioned:i(t,"isDataVersioned",!1),isBranchVersioned:i(t,"isDataBranchVersioned",!1),supportsAttachment:i(t,"hasAttachments",!1),supportsM:i(t,"hasM",!1),supportsZ:i(t,"hasZ",!1)}}function g(t){return{supportsAdvancedFieldProperties:i(t,"supportsFieldDescriptionProperty",!1)}}function f(t,e,r){const o=t?t.toLowerCase().split(",").map((t=>t.trim())):[],n=r?(0,s.Qc)(r):null,p=o.includes(null!=n&&"MapServer"===n.serverType?"data":"query"),a=o.includes("editing")&&!e.datesInUnknownTimezone;let u=a&&o.includes("create"),l=a&&o.includes("delete"),c=a&&o.includes("update");const d=o.includes("changetracking"),y=e.advancedQueryCapabilities;return a&&!(u||l||c)&&(u=l=c=!0),{supportsCalculate:i(e,"supportsCalculate",!1),supportsTruncate:i(e,"supportsTruncate",!1),supportsValidateSql:i(e,"supportsValidateSql",!1),supportsAdd:u,supportsDelete:l,supportsEditing:a,supportsChangeTracking:d,supportsQuery:p,supportsQueryAnalytics:i(y,"supportsQueryAnalytic",!1),supportsQueryAttachments:i(y,"supportsQueryAttachments",!1),supportsQueryBins:i(y,"supportsQueryBins",!1),supportsQueryTopFeatures:i(y,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:i(e,"supportsAttachmentsResizing",!1),supportsSync:o.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:i(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:i(e,"supportsAsyncConvert3D",!1)}}function b(t,e){const r=t.advancedQueryCapabilities,a=t.ownershipBasedAccessControlForFeatures,u=t.archivingInfo,d=t.currentVersion,y=e?.includes("MapServer"),h=!y||d>=(0,o.Z)("mapserver-pbf-version-support"),m=(0,s.M8)(e),C=new Set((t.supportedQueryFormats??"").split(",").map((t=>t.toLowerCase().trim())));return{maxRecordCount:p(t,"maxRecordCount",void 0),maxRecordCountFactor:p(t,"maxRecordCountFactor",void 0),standardMaxRecordCount:p(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:l(r),supportsCacheHint:i(r,"supportsQueryWithCacheHint",!1)||c(r,"query"),supportsCentroid:i(r,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:m,supportsCurrentUser:i(r,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:i(r,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:i(r,"supportsDisjointSpatialRel",!1),supportsDistance:i(r,"supportsQueryWithDistance",!1),supportsDistinct:i(r,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:i(r,"supportsReturningQueryExtent",!1),supportsFormatPBF:h&&C.has("pbf"),supportsFullTextSearch:i(r,"supportsFullTextSearch",!1),supportsGeometryProperties:i(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:i(r,"supportsHavingClause",!1),supportsHistoricMoment:i(u,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:i(r,"supportsMaxRecordCountFactor",!1),supportsOrderBy:i(r,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:i(r,"supportsPagination",!1),supportsPercentileStatistics:i(r,"supportsPercentileStatistics",!1),supportsQuantization:i(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:i(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:i(a,"allowAnonymousToQuery",!0),supportsQueryByOthers:i(a,"allowOthersToQuery",!0),supportsQueryGeometry:i(t,"supportsReturningQueryGeometry",!1),supportsResultType:i(r,"supportsQueryWithResultType",!1),supportsReturnMesh:!!(0,n.Si)(t.infoFor3D),supportsSpatialAggregationStatistics:i(r,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:i(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:i(t,"useStandardizedQueries",!1),supportsStatistics:i(r,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:i(r,"supportsTopFeaturesQuery",!1),supportsTrueCurve:i(r,"supportsTrueCurve",!1),tileMaxRecordCount:p(t,"tileMaxRecordCount",void 0)}}function _(t){const e=t.advancedQueryCapabilities,r=i(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:i(e,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:c(e,"queryRelated")}}function S(t){return{supportsCacheHint:c(t.advancedQueryCapabilities,"queryTopFilter")}}function O(t){const e=t?t.queryBinsCapabilities:void 0;return{supportsDate:i(e,"supportsDateBin",!1),supportsFixedInterval:i(e,"supportsFixedIntervalBin",!1),supportsAutoInterval:i(e,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:i(e,"supportsFixedBoundariesBin",!1),supportsStackBy:i(e,"supportsStackBy",!1),supportsSplitBy:i(e,"supportsSplitBy",!1),supportsSnapToData:i(e,"supportsSnapToData",!1),supportsReturnFullIntervalBin:i(e,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:i(e,"supportsFirstDayOfWeek",!1),supportsNormalization:i(e,"supportsNormalization",!1),supportedStatistics:d(e),supportedNormalizationTypes:y(e)}}function T(t){const e=t.ownershipBasedAccessControlForFeatures,r=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:i(t,"allowGeometryUpdates",!0),supportsGlobalId:i(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:i(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:i(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:i(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:i(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:i(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:i(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:i(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:i(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:i(r,"supportsAsyncApplyEdits",!1),zDefault:p(t,"zDefault",void 0)}}function x(t){return{operations:{supportsAppend:i(t,"supportsAppend",!1),supportsCoverageQuery:t?.playbackInfo?.klv["0601"]??!1,supportsExportClip:i(t,"supportsExportClip",!1),supportsExportFrameset:i(t,"supportsExportFrameset",!1),supportsMensuration:i(t,"supportsMensuration",!1),supportsUpdate:i(t,"supportsUpdate",!1)}}}}}]);