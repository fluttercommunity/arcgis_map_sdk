"use strict";(self.webpackChunkarcgis_webpack01=self.webpackChunkarcgis_webpack01||[]).push([[53549,73041],{53549:(e,n,t)=>{t.r(n),t.d(n,{executeScript:()=>W,extend:()=>z,functionHelper:()=>_});var r=t(79570),a=t(32070),o=t(93674),i=t(31196),l=t(19249),c=t(7182),s=t(94634),u=t(30359),f=t(94837),w=t(61125),d=t(33556),p=t(56101),h=t(91630),m=t(73041),g=t(32200),y=t(63038),v=t(47154),S=t(37614),b=t(20031),H=t(14685),V=t(32646);async function N(e,n){const t=[];for(let r=0;r<n.arguments.length;r++)t.push(await F(e,n.arguments[r]));return t}async function I(e,n,t){return!0===n.preparsed?t(e,null,n.arguments):t(e,n,await N(e,n))}class O extends u.Rm{constructor(e,n){super(),this.definition=null,this.context=null,this.definition=e,this.context=n}createFunction(e){return(...n)=>{const t={spatialReference:this.context.spatialReference,console:this.context.console,lrucache:this.context.lrucache,timeZone:this.context.timeZone??null,exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,localScope:{},depthCounter:{depth:e.depthCounter+1},globalScope:this.context.globalScope};if(t.depthCounter.depth>64)throw new c.aV(e,c.rH.MaximumCallDepth,null);return K(this.definition,t,n,null)}}call(e,n){return Z(e,n,((t,r,a)=>{const o={spatialReference:e.spatialReference,services:e.services,console:e.console,libraryResolver:e.libraryResolver,exports:e.exports,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:{},abortSignal:e.abortSignal,globalScope:e.globalScope,depthCounter:{depth:e.depthCounter.depth+1}};if(o.depthCounter.depth>64)throw new c.aV(e,c.rH.MaximumCallDepth,n);return K(this.definition,o,a,n)}))}marshalledCall(e,n,t,r){return r(e,n,(async(a,o,i)=>{const l={spatialReference:e.spatialReference,globalScope:t.globalScope,depthCounter:{depth:e.depthCounter.depth+1},libraryResolver:e.libraryResolver,exports:e.exports,console:e.console,abortSignal:e.abortSignal,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:{}};return i=i.map((n=>!(0,f.i)(n)||n instanceof u.Vg?n:(0,u.aq)(n,e,r))),(0,u.aq)(await K(this.definition,l,i,n),t,r)}))}}class x extends a.P{constructor(e){super(),this.source=e}global(e){const n=this.executingContext.globalScope[(0,r.D)(e)];if((0,f.i)(n.value)&&!(n.value instanceof u.Vg)){const e=new u.Vg;e.fn=n.value,e.parameterEvaluator=Z,e.context=this.executingContext,n.value=e}return n.value}setGlobal(e,n){if((0,f.i)(n))throw new c.aV(null,c.rH.AssignModuleFunction,null);this.executingContext.globalScope[(0,r.D)(e)]={value:n}}hasGlobal(e){return void 0===this.executingContext.exports[e]&&(e=(0,r.D)(e)),void 0!==this.executingContext.exports[e]}async loadModule(e){let n=e.spatialReference;null==n&&(n=new H.Z({wkid:102100})),this.moduleScope=G({},e.customfunctions,e.timeZone),this.executingContext={spatialReference:n,services:e.services,libraryResolver:new o.s(e.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},abortSignal:void 0===e.abortSignal||null===e.abortSignal?{aborted:!1}:e.abortSignal,globalScope:this.moduleScope,console:e.console??T,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:null,depthCounter:{depth:1}},await E(this.executingContext,this.source.syntax)}}async function Z(e,n,t){return!0===n.preparsed?t(e,null,n.arguments):t(e,n,await N(e,n))}async function F(e,n){n.breakpoint&&await n.breakpoint();try{switch(n.type){case"UpdateExpression":return await async function(e,n){const t=n.argument;if("CallExpression"===t.type)throw new c.aV(e,c.rH.NeverReach,n);if("MemberExpression"===t.type){const r=await F(e,t.object);let a,o;if(!0===t.computed)a=await F(e,t.property);else{if("Identifier"!==t.property.type)throw new c.aV(e,c.rH.Unrecognized,n);a=t.property.name}if((0,V.kJ)(r)){if(!(0,V.hj)(a))throw new c.aV(e,c.rH.ArrayAccessorMustBeNumber,n);if(a<0&&(a=r.length+a),a<0||a>=r.length)throw new c.aV(e,c.rH.OutOfBounds,n);o=(0,f.t)(r[a]),r[a]="++"===n.operator?o+1:o-1}else if(r instanceof l.Z){if(!1===(0,V.HD)(a))throw new c.aV(e,c.rH.KeyAccessorMustBeString,n);if(!0!==r.hasField(a))throw new c.aV(e,c.rH.FieldNotFound,n,{key:a});o=(0,f.t)(r.field(a)),r.setField(a,"++"===n.operator?o+1:o-1)}else if(r instanceof x){if(!1===(0,V.HD)(a))throw new c.aV(e,c.rH.ModuleAccessorMustBeString,n);if(!0!==r.hasGlobal(a))throw new c.aV(e,c.rH.ModuleExportNotFound,n);o=(0,f.t)(r.global(a)),r.setGlobal(a,"++"===n.operator?o+1:o-1)}else{if(!(0,f.n)(r))throw(0,f.m)(r)?new c.aV(e,c.rH.Immutable,n):new c.aV(e,c.rH.InvalidParameter,n);if(!1===(0,V.HD)(a))throw new c.aV(e,c.rH.KeyAccessorMustBeString,n);if(!0!==r.hasField(a))throw new c.aV(e,c.rH.FieldNotFound,n,{key:a});o=(0,f.t)(r.field(a)),r.setField(a,"++"===n.operator?o+1:o-1)}return!1===n.prefix?o:"++"===n.operator?o+1:o-1}const a=(0,r.D)(t);let o;if(null!=e.localScope&&void 0!==e.localScope[a])return o=(0,f.t)(e.localScope[a].value),e.localScope[a]={value:"++"===n.operator?o+1:o-1},!1===n.prefix?o:"++"===n.operator?o+1:o-1;if(void 0!==e.globalScope[a])return o=(0,f.t)(e.globalScope[a].value),e.globalScope[a]={value:"++"===n.operator?o+1:o-1},!1===n.prefix?o:"++"===n.operator?o+1:o-1;throw new c.aV(e,c.rH.InvalidIdentifier,n)}(e,n);case"AssignmentExpression":return await async function(e,n){const t=n.left;if("MemberExpression"===t.type){const r=await F(e,t.object);let a;if(!0===t.computed)a=await F(e,t.property);else{if("Identifier"!==t.property.type)throw new c.aV(e,c.rH.InvalidIdentifier,n);a=t.property.name}const o=await F(e,n.right);if((0,V.kJ)(r)){if(!(0,V.hj)(a))throw new c.aV(e,c.rH.ArrayAccessorMustBeNumber,n);if(a<0&&(a=r.length+a),a<0||a>r.length)throw new c.aV(e,c.rH.OutOfBounds,n);if(a===r.length){if("="!==n.operator)throw new c.aV(e,c.rH.OutOfBounds,n);r[a]=k(o,n.operator,r[a],n,e)}else r[a]=k(o,n.operator,r[a],n,e)}else if(r instanceof l.Z){if(!1===(0,V.HD)(a))throw new c.aV(e,c.rH.KeyAccessorMustBeString,n);if(!0===r.hasField(a))r.setField(a,k(o,n.operator,r.field(a),n,e));else{if("="!==n.operator)throw new c.aV(e,c.rH.FieldNotFound,n,{key:a});r.setField(a,k(o,n.operator,null,n,e))}}else if(r instanceof x){if(!1===(0,V.HD)(a))throw new c.aV(e,c.rH.KeyAccessorMustBeString,n);if(!0!==r.hasGlobal(a))throw new c.aV(e,c.rH.ModuleExportNotFound,n);r.setGlobal(a,k(o,n.operator,r.global(a),n,e))}else{if(!(0,f.n)(r))throw(0,f.m)(r)?new c.aV(e,c.rH.Immutable,n):new c.aV(e,c.rH.InvalidParameter,n);if(!1===(0,V.HD)(a))throw new c.aV(e,c.rH.KeyAccessorMustBeString,n);if(!0===r.hasField(a))r.setField(a,k(o,n.operator,r.field(a),n,e));else{if("="!==n.operator)throw new c.aV(e,c.rH.FieldNotFound,n,{key:a});r.setField(a,k(o,n.operator,null,n,e))}}return f.w}const a=(0,r.D)(t);if(null!=e.localScope&&void 0!==e.localScope[a]){const t=await F(e,n.right);return e.localScope[a]={value:k(t,n.operator,e.localScope[a].value,n,e)},f.w}if(void 0!==e.globalScope[a]){const t=await F(e,n.right);return e.globalScope[a]={value:k(t,n.operator,e.globalScope[a].value,n,e)},f.w}throw new c.aV(e,c.rH.InvalidIdentifier,n)}(e,n);case"TemplateLiteral":return await async function(e,n){let t="",r=0;for(const a of n.quasis)if(t+=a.value?a.value.cooked:"",!1===a.tail){if(n.expressions[r]){const a=await F(e,n.expressions[r]);if((0,f.i)(a))throw new c.aV(e,c.rH.NoFunctionInTemplateLiteral,n);t+=(0,f.f)(a)}r++}return t}(e,n);case"Identifier":return M(e,n);case"MemberExpression":return await async function(e,n){const t=await F(e,n.object);if(null===t)throw new c.aV(e,c.rH.MemberOfNull,n);if(!1===n.computed){if("Identifier"===n.property.type){if(t instanceof l.Z||(0,f.z)(t))return t.field(n.property.name);if(t instanceof b.Z)return(0,i.Zg)(t,n.property.name,e,n);if(t instanceof x){if(!t.hasGlobal(n.property.name))throw new c.aV(e,c.rH.InvalidIdentifier,n);return t.global(n.property.name)}throw new c.aV(e,c.rH.InvalidMemberAccessKey,n)}throw new c.aV(e,c.rH.InvalidMemberAccessKey,n)}let r=await F(e,n.property);if(t instanceof l.Z||(0,f.z)(t)){if((0,V.HD)(r))return t.field(r);throw new c.aV(e,c.rH.InvalidMemberAccessKey,n)}if(t instanceof x){if((0,V.HD)(r))return t.global(r);throw new c.aV(e,c.rH.InvalidMemberAccessKey,n)}if(t instanceof b.Z){if((0,V.HD)(r))return(0,i.Zg)(t,r,e,n);throw new c.aV(e,c.rH.InvalidMemberAccessKey,n)}if((0,V.kJ)(t)){if((0,V.hj)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length+r),r>=t.length||r<0)throw new c.aV(e,c.rH.OutOfBounds,n);return t[r]}throw new c.aV(e,c.rH.InvalidMemberAccessKey,n)}if((0,f.m)(t)){if((0,V.hj)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length()+r),r>=t.length()||r<0)throw new c.aV(e,c.rH.OutOfBounds,n);return t.get(r)}throw new c.aV(e,c.rH.InvalidMemberAccessKey,n)}if((0,V.HD)(t)){if((0,V.hj)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length+r),r>=t.length||r<0)throw new c.aV(e,c.rH.OutOfBounds,n);return t[r]}throw new c.aV(e,c.rH.InvalidMemberAccessKey,n)}throw new c.aV(e,c.rH.InvalidMemberAccessKey,n)}(e,n);case"Literal":return n.value;case"CallExpression":return await async function(e,n){if("MemberExpression"===n.callee.type){const t=await F(e,n.callee.object);if(!(t instanceof x))throw new c.aV(e,c.rH.FunctionNotFound,n);const r=!1===n.callee.computed?n.callee.property.name:await F(e,n.callee.property);if(!t.hasGlobal(r))throw new c.aV(e,c.rH.FunctionNotFound,n);const a=t.global(r);if(!(0,f.i)(a))throw new c.aV(e,c.rH.CallNonFunction,n);return a.call(e,n)}if("Identifier"!==n.callee.type)throw new c.aV(e,c.rH.FunctionNotFound,n);const t=(0,r.D)(n.callee);if(null!=e.localScope&&void 0!==e.localScope[t]){const r=e.localScope[t];if((0,f.i)(r.value))return r.value.call(e,n);throw new c.aV(e,c.rH.CallNonFunction,n)}if(void 0!==e.globalScope[t]){const r=e.globalScope[t];if((0,f.i)(r.value))return r.value.call(e,n);throw new c.aV(e,c.rH.CallNonFunction,n)}throw new c.aV(e,c.rH.FunctionNotFound,n)}(e,n);case"UnaryExpression":return await async function(e,n){const t=await F(e,n.argument);if((0,V.jn)(t)){if("!"===n.operator)return!t;if("-"===n.operator)return-1*(0,f.t)(t);if("+"===n.operator)return 1*(0,f.t)(t);if("~"===n.operator)return~(0,f.t)(t);throw new c.aV(e,c.rH.UnsupportedUnaryOperator,n)}if("-"===n.operator)return-1*(0,f.t)(t);if("+"===n.operator)return 1*(0,f.t)(t);if("~"===n.operator)return~(0,f.t)(t);throw new c.aV(e,c.rH.UnsupportedUnaryOperator,n)}(e,n);case"BinaryExpression":return await async function(e,n){const t=await F(e,n.left),r=await F(e,n.right);switch(n.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,f.C)((0,f.t)(t),(0,f.t)(r),n.operator);case"==":return(0,f.B)(t,r);case"!=":return!(0,f.B)(t,r);case"<":case">":case"<=":case">=":return(0,f.A)(t,r,n.operator);case"+":return(0,V.HD)(t)||(0,V.HD)(r)?(0,f.f)(t)+(0,f.f)(r):(0,f.t)(t)+(0,f.t)(r);case"-":return(0,f.t)(t)-(0,f.t)(r);case"*":return(0,f.t)(t)*(0,f.t)(r);case"/":return(0,f.t)(t)/(0,f.t)(r);case"%":return(0,f.t)(t)%(0,f.t)(r);default:throw new c.aV(e,c.rH.UnsupportedOperator,n)}}(e,n);case"LogicalExpression":return await async function(e,n){const t=await F(e,n.left);if(!(0,V.jn)(t))throw new c.aV(e,c.rH.LogicalExpressionOnlyBoolean,n);switch(n.operator){case"||":{if(!0===t)return t;const r=await F(e,n.right);if((0,V.jn)(r))return r;throw new c.aV(e,c.rH.LogicExpressionOrAnd,n)}case"&&":{if(!1===t)return t;const r=await F(e,n.right);if((0,V.jn)(r))return r;throw new c.aV(e,c.rH.LogicExpressionOrAnd,n)}default:throw new c.aV(e,c.rH.LogicExpressionOrAnd,n)}}(e,n);case"ArrayExpression":return await async function(e,n){const t=[];for(let r=0;r<n.elements.length;r++)t.push(await F(e,n.elements[r]));for(let r=0;r<t.length;r++){if((0,f.i)(t[r]))throw new c.aV(e,c.rH.NoFunctionInArray,n);t[r]===f.w&&(t[r]=null)}return t}(e,n);case"ObjectExpression":return await async function(e,n){const t=[];for(let r=0;r<n.properties.length;r++){const a=n.properties[r],o=await F(e,a.value),i="Identifier"===a.key.type?a.key.name:await F(e,a.key);t[r]={key:i,value:o}}const r={},a=new Map;for(let o=0;o<t.length;o++){const i=t[o];if((0,f.i)(i.value))throw new c.aV(e,c.rH.NoFunctionInDictionary,n);if(!1===(0,V.HD)(i.key))throw new c.aV(e,c.rH.KeyMustBeString,n);let l=i.key.toString();const s=l.toLowerCase();a.has(s)?l=a.get(s):a.set(s,l),i.value===f.w?r[l]=null:r[l]=i.value}const o=new l.Z(r);return o.immutable=!1,o}(e,n);default:throw new c.aV(e,c.rH.Unrecognized,n)}}catch(t){throw(0,c.VO)(e,n,t)}}async function A(e,n){n.breakpoint&&await n.breakpoint();try{switch(n.type){case"ImportDeclaration":return await async function(e,n){const t=(0,r.D)(n.specifiers[0].local),a=e.libraryResolver.loadLibrary(t);let o;return e.libraryResolver._moduleSingletons?.has(a.uri)?o=e.libraryResolver._moduleSingletons.get(a.uri):(o=new x(a),await o.loadModule(e),e.libraryResolver._moduleSingletons?.set(a.uri,o)),e.globalScope[t]={value:o},f.w}(e,n);case"ExportNamedDeclaration":return await async function(e,n){if(await A(e,n.declaration),"FunctionDeclaration"===n.declaration.type)e.exports[(0,r.D)(n.declaration.id)]="function";else if("VariableDeclaration"===n.declaration.type)for(const t of n.declaration.declarations)e.exports[(0,r.D)(t.id)]="variable";return f.w}(e,n);case"VariableDeclaration":return await C(e,n,0);case"BlockStatement":return await E(e,n);case"FunctionDeclaration":return await async function(e,n){const t=(0,r.D)(n.id);return e.globalScope[t]={value:new O(n,e)},f.w}(e,n);case"ReturnStatement":return await async function(e,n){if(null===n.argument)return new f.R(f.w);const t=await F(e,n.argument);return new f.R(t)}(e,n);case"IfStatement":return await async function(e,n){const t=await F(e,n.test);if(!0===t)return A(e,n.consequent);if(!1===t)return null!==n.alternate?A(e,n.alternate):f.w;throw new c.aV(e,c.rH.BooleanConditionRequired,n)}(e,n);case"ExpressionStatement":return await async function(e,n){const t=await F(e,n.expression);return t===f.w?f.w:new f.I(t)}(e,n);case"ForStatement":return await async function(e,n){try{for(null!==n.init&&("VariableDeclaration"===n.init.type?await A(e,n.init):await F(e,n.init));;){if(null!==n.test){const t=await F(e,n.test);if(!0===e.abortSignal?.aborted)throw new c.aV(e,c.rH.Cancelled,n);if(!1===t)break;if(!0!==t)throw new c.aV(e,c.rH.BooleanConditionRequired,n)}const t=await A(e,n.body);if(t===f.x)break;if(t instanceof f.R)return t;null!==n.update&&await F(e,n.update)}return f.w}catch(e){throw e}}(e,n);case"WhileStatement":return await async function(e,n){let t=await F(e,n.test);if(!1===t)return f.w;if(!0!==t)throw new c.aV(e,c.rH.BooleanConditionRequired,n);for(;!0===t;){const r=await A(e,n.body);if(r===f.x)break;if(r instanceof f.R)return r;if(t=await F(e,n.test),!0!==t&&!1!==t)throw new c.aV(e,c.rH.BooleanConditionRequired,n)}return f.w}(e,n);case"ForInStatement":return await async function(e,n){const t=await F(e,n.right);"VariableDeclaration"===n.left.type&&await A(e,n.left);const a=(0,r.D)("VariableDeclaration"===n.left.type?n.left.declarations[0].id:n.left);let o=null;if(null!=e.localScope&&void 0!==e.localScope[a]&&(o=e.localScope[a]),null===o&&void 0!==e.globalScope[a]&&(o=e.globalScope[a]),null===o)throw new c.aV(e,c.rH.InvalidIdentifier,n);return(0,V.kJ)(t)||(0,V.HD)(t)?await D(e,n,t,o):(0,f.m)(t)?await J(e,n,t,o):t instanceof l.Z||(0,f.z)(t)?await D(e,n,t.keys(),o,"k"):(0,f.p)(t)?await R(e,n,t,o):(0,f.l)(t)?await D(e,n,(0,i.mw)(t),o,"k"):f.w}(e,n);case"ForOfStatement":return await async function(e,n){const t=await F(e,n.right);"VariableDeclaration"===n.left.type&&await A(e,n.left);const a=(0,r.D)("VariableDeclaration"===n.left.type?n.left.declarations[0].id:n.left);let o=null;if(null!=e.localScope&&void 0!==e.localScope[a]&&(o=e.localScope[a]),null===o&&void 0!==e.globalScope[a]&&(o=e.globalScope[a]),null===o)throw new c.aV(e,c.rH.InvalidIdentifier,n);return(0,V.kJ)(t)||(0,V.HD)(t)?await D(e,n,t,o,"k"):(0,f.m)(t)?await J(e,n,t,o,"k"):t instanceof l.Z||(0,f.z)(t)?await async function(e,n,t,r){for(const a of t.keys()){const o=t.field(a);r.value=new l.Z({key:a,value:o});const i=await A(e,n.body);if(i===f.x)break;if(i instanceof f.R)return i}return f.w}(e,n,t,o):(0,f.p)(t)?await R(e,n,t,o):(0,f.l)(t)?await async function(e,n,t,r){for(const a of(0,i.mw)(t)){const o=(0,i.Zg)(t,a,e,n,1);r.value=new l.Z({key:a,value:o});const c=await A(e,n.body);if(c===f.x)break;if(c instanceof f.R)return c}return f.w}(e,n,t,o):f.w}(e,n);case"BreakStatement":return f.x;case"EmptyStatement":return f.w;case"ContinueStatement":return f.y;default:throw new c.aV(e,c.rH.Unrecognized,n)}}catch(t){throw(0,c.VO)(e,n,t)}}async function D(e,n,t,r,a="i"){const o=t.length;for(let i=0;i<o;i++){if("k"===a){if(i>=t.length)throw new c.aV(e,c.rH.OutOfBounds,n);r.value=t[i]}else r.value=i;const o=await A(e,n.body);if(o===f.x)break;if(o instanceof f.R)return o}return f.w}async function J(e,n,t,r,a="i"){const o=t.length();for(let i=0;i<o;i++){r.value="k"===a?t.get(i):i;const o=await A(e,n.body);if(o===f.x)break;if(o instanceof f.R)return o}return f.w}async function R(e,n,t,r){const a=t.iterator(e.abortSignal);let o;for(;null!=(o=await a.next());){const a=s.Z.createFromGraphicLikeObject(o.geometry,o.attributes,t,e.timeZone);a._underlyingGraphic=o,r.value=a;const i=await A(e,n.body);if(i===f.x)break;if(i instanceof f.R)return i}return f.w}function k(e,n,t,r,a){switch(n){case"=":return e===f.w?null:e;case"/=":return(0,f.t)(t)/(0,f.t)(e);case"*=":return(0,f.t)(t)*(0,f.t)(e);case"-=":return(0,f.t)(t)-(0,f.t)(e);case"+=":return(0,V.HD)(t)||(0,V.HD)(e)?(0,f.f)(t)+(0,f.f)(e):(0,f.t)(t)+(0,f.t)(e);case"%=":return(0,f.t)(t)%(0,f.t)(e);default:throw new c.aV(a,c.rH.UnsupportedOperator,r)}}async function E(e,n){return P(e,n,0)}async function P(e,n,t){if(t>=n.body.length)return f.w;const r=await A(e,n.body[t]);return r instanceof f.R||r===f.x||r===f.y||t===n.body.length-1?r:P(e,n,t+1)}async function C(e,n,t){return t>=n.declarations.length||(await async function(e,n){let t=null;if(t=null===n.init?null:await F(e,n.init),null!==e.localScope){if(t===f.w&&(t=null),"Identifier"!==n.id.type)throw new c.aV(e,c.rH.InvalidIdentifier,n);const a=(0,r.D)(n.id);return void(null!=e.localScope&&(e.localScope[a]={value:t}))}if("Identifier"!==n.id.type)throw new c.aV(e,c.rH.InvalidIdentifier,n);const a=(0,r.D)(n.id);t===f.w&&(t=null),e.globalScope[a]={value:t}}(e,n.declarations[t]),t===n.declarations.length-1||await C(e,n,t+1)),f.w}function M(e,n){const t=(0,r.D)(n);if(null!=e.localScope&&void 0!==e.localScope[t])return e.localScope[t].value;if(void 0!==e.globalScope[t])return e.globalScope[t].value;throw new c.aV(e,c.rH.InvalidIdentifier,n)}const B={};async function j(e,n,t,r){const a=await F(e,n.arguments[t]);if((0,f.B)(a,r))return F(e,n.arguments[t+1]);const o=n.arguments.length-t;return 1===o?F(e,n.arguments[t]):2===o?null:3===o?F(e,n.arguments[t+2]):j(e,n,t+2,r)}async function L(e,n,t,r){if(!0===r)return F(e,n.arguments[t+1]);if(3==n.arguments.length-t)return F(e,n.arguments[t+2]);const a=await F(e,n.arguments[t+2]);if(!1===(0,V.jn)(a))throw new c.aV(e,c.rH.ModuleExportNotFound,n.arguments[t+2]);return L(e,n,t+2,a)}async function K(e,n,t,a){const o=e.body;if(t.length!==e.params.length)throw new c.aV(n,c.rH.WrongNumberOfParameters,null);for(let a=0;a<t.length;a++){const o=e.params[a];"Identifier"===o.type&&null!=n.localScope&&(n.localScope[(0,r.D)(o)]={value:t[a]})}const i=await A(n,o);if(i instanceof f.R)return i.value;if(i===f.x)throw new c.aV(n,c.rH.UnexpectedToken,a);if(i===f.y)throw new c.aV(n,c.rH.UnexpectedToken,a);return i instanceof f.I?i.value:i}(0,p.r)(B,I),(0,S.r)(B,I),(0,h.r)(B,I,M),(0,y.r)(B,I),(0,g.r)(B,I),(0,v.r)(B,I),(0,m.registerFunctions)({functions:B,compiled:!1,signatures:null,evaluateIdentifier:null,mode:"async",standardFunction:I,standardFunctionAsync:Z}),B.iif=async function(e,n){(0,f.D)(null===n.arguments?[]:n.arguments,3,3,e,n);const t=await F(e,n.arguments[0]);if(!1===(0,V.jn)(t))throw new c.aV(e,c.rH.BooleanConditionRequired,n);return F(e,t?n.arguments[1]:n.arguments[2])},B.defaultvalue=async function(e,n){(0,f.D)(null===n.arguments?[]:n.arguments,2,3,e,n);const t=await F(e,n.arguments[0]);if(3===n.arguments.length){const r=await F(e,n.arguments[1]),a=(0,i.uV)(t,r);return null!=a&&""!==a?a:F(e,n.arguments[2])}return null==t||""===t?F(e,n.arguments[1]):t},B.decode=async function(e,n){if(n.arguments.length<2)throw new c.aV(e,c.rH.WrongNumberOfParameters,n);if(2===n.arguments.length)return F(e,n.arguments[1]);if((n.arguments.length-1)%2==0)throw new c.aV(e,c.rH.WrongNumberOfParameters,n);return j(e,n,1,await F(e,n.arguments[0]))},B.when=async function(e,n){if(n.arguments.length<3)throw new c.aV(e,c.rH.WrongNumberOfParameters,n);if(n.arguments.length%2==0)throw new c.aV(e,c.rH.WrongNumberOfParameters,n);const t=await F(e,n.arguments[0]);if(!1===(0,V.jn)(t))throw new c.aV(e,c.rH.BooleanConditionRequired,n.arguments[0]);return L(e,n,0,t)};const U={fixSpatialReference:f.u,parseArguments:N,standardFunction:I,standardFunctionAsync:Z,evaluateIdentifier:M};for(const e in B)B[e]={value:new u.Bx(B[e])};const q=function(){};function G(e,n,t){const r=new q;null==e&&(e={}),null==n&&(n={});const a=new l.Z({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});a.immutable=!1,r.textformatting={value:a};for(const e in n)r[e]={value:new u.Bx(n[e])};for(const n in e)r[n]={value:(0,V.Kf)(e[n])?s.Z.createFromGraphic(e[n],t):e[n]};return r}function T(e){console.log(e)}(q.prototype=B).infinity={value:Number.POSITIVE_INFINITY},q.prototype.pi={value:Math.PI};const _=U;function z(e){const n={mode:"async",compiled:!1,functions:{},signatures:[],standardFunction:I,standardFunctionAsync:Z,evaluateIdentifier:M};for(let t=0;t<e.length;t++)e[t].registerFunctions(n);for(const e in n.functions)B[e]={value:new u.Bx(n.functions[e])},q.prototype[e]=B[e];for(let e=0;e<n.signatures.length;e++)(0,w.gW)(n.signatures[e],"async")}async function W(e,n){let t=n.spatialReference;null==t&&(t=new H.Z({wkid:102100}));let r=null;e.usesModules&&(r=new o.s(new Map,e.loadedModules));const a=G(n.vars,n.customfunctions,n.timeZone),i={spatialReference:t,services:n.services,exports:{},libraryResolver:r,abortSignal:void 0===n.abortSignal||null===n.abortSignal?{aborted:!1}:n.abortSignal,globalScope:a,console:n.console??T,timeZone:n.timeZone??null,lrucache:n.lrucache,interceptor:n.interceptor,localScope:null,depthCounter:{depth:1}},l=await E(i,e);if(l instanceof f.R||l instanceof f.I){const e=l.value;if(e===f.w)return null;if((0,f.i)(e))throw new c.aV(i,c.rH.IllegalResult,null);return e}if(l===f.w)return null;if(l===f.x)throw new c.aV(i,c.rH.IllegalResult,null);if(l===f.y)throw new c.aV(i,c.rH.IllegalResult,null);throw new c.aV(i,c.rH.NeverReach,null)}z([d.A])},73041:(e,n,t)=>{t.r(n),t.d(n,{registerFunctions:()=>N});var r=t(58780),a=t(19249),o=t(7182),i=t(4080),l=t(94837),c=t(86727),s=t(76886),u=t(74799),f=t(91772),w=t(20031),d=t(74304),p=t(10186),h=t(89542),m=t(90819),g=t(53736),y=t(93968),v=t(88256),S=t(66341);async function b(e,n,t){const r=v.id?.findCredential(e.restUrl);if(!r)return null;if("loaded"===e.loadStatus&&""===n&&e.user?.sourceJSON&&!1===t)return e.user.sourceJSON;const a={responseType:"json",query:{f:"json"}};if(t&&(a.query.returnUserLicenseTypeExtensions=!0),""===n){const n=await(0,S.Z)(e.restUrl+"/community/self",a);if(n.data){const e=n.data;if(e?.username)return e}return null}const o=await(0,S.Z)(e.restUrl+"/community/users/"+n,a);if(o.data){const e=o.data;return e.error?null:e}return null}var H=t(32646);function V(e){if(null==e)return e;switch(typeof e){case"string":case"number":return e;default:throw new o.aV(null,o.rH.InvalidParameter,null)}}function N(e){"async"===e.mode&&(e.functions.disjoint=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.E)(a),(0,s.A9)(a,n,t),null===a[0]||null===a[1]||(0,u.c)("disjoint",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.intersects=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.E)(a),(0,s.A9)(a,n,t),null!==a[0]&&null!==a[1]&&(0,u.c)("intersects",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.touches=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.E)(a),(0,s.A9)(a,n,t),null!==a[0]&&null!==a[1]&&(0,u.c)("touches",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.crosses=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.E)(a),(0,s.A9)(a,n,t),null!==a[0]&&null!==a[1]&&(0,u.c)("crosses",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.within=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.E)(a),(0,s.A9)(a,n,t),null!==a[0]&&null!==a[1]&&(0,u.c)("within",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.contains=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.E)(a),(0,s.A9)(a,n,t),null!==a[0]&&null!==a[1]&&(0,u.c)("contains",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.overlaps=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.E)(a),(0,s.A9)(a,n,t),null!==a[0]&&null!==a[1]&&(0,u.c)("overlaps",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.equals=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>((0,l.D)(a,2,2,n,t),a[0]===a[1]||(a[0]instanceof w.Z&&a[1]instanceof w.Z?(0,u.c)("equals",[a[0].toJSON(),a[1].toJSON()]):((0,l.g)(a[0])&&(0,l.g)(a[1])||!!((0,l.k)(a[0])&&(0,l.k)(a[1])||(0,l.j)(a[0])&&(0,l.j)(a[1])))&&a[0].equals(a[1])))))},e.functions.relate=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,3,3,n,t),a[0]instanceof w.Z&&a[1]instanceof w.Z)return(0,u.c)("relate",[a[0].toJSON(),a[1].toJSON(),(0,l.f)(a[2])]);if(a[0]instanceof w.Z&&null===a[1])return!1;if(a[1]instanceof w.Z&&null===a[0])return!1;if(null===a[0]&&null===a[1])return!1;throw new o.aV(n,o.rH.InvalidParameter,t)}))},e.functions.intersection=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>(a=(0,l.E)(a),(0,s.A9)(a,n,t),null===a[0]||null===a[1]?null:(0,g.im)(await(0,u.c)("intersection",[a[0].toJSON(),a[1].toJSON()])))))},e.functions.union=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(0===(a=(0,l.E)(a)).length)throw new o.aV(n,o.rH.WrongNumberOfParameters,t);const c=[];if(1===a.length)if((0,H.kJ)(a[0])){for(const e of(0,l.E)(a[0]))if(null!==e){if(!(e instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);c.push(e.toJSON())}}else{if(!(0,l.m)(a[0])){if(a[0]instanceof w.Z)return(0,l.u)((0,i.r1)(a[0]),n.spatialReference);if(null===a[0])return null;throw new o.aV(n,o.rH.InvalidParameter,t)}for(const e of(0,l.E)(a[0].toArray()))if(null!==e){if(!(e instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);c.push(e.toJSON())}}else for(const e of a)if(null!==e){if(!(e instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);c.push(e.toJSON())}return 0===c.length?null:(0,g.im)(await(0,u.c)("union",[c]))}))},e.functions.difference=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>(a=(0,l.E)(a),(0,s.A9)(a,n,t),null===a[0]?null:null===a[1]?(0,i.r1)(a[0]):(0,g.im)(await(0,u.c)("difference",[a[0].toJSON(),a[1].toJSON()])))))},e.functions.symmetricdifference=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>(a=(0,l.E)(a),(0,s.A9)(a,n,t),null===a[0]&&null===a[1]?null:null===a[0]?(0,i.r1)(a[1]):null===a[1]?(0,i.r1)(a[0]):(0,g.im)(await(0,u.c)("symmetricDifference",[a[0].toJSON(),a[1].toJSON()])))))},e.functions.clip=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,2,2,n,t),!(a[1]instanceof f.Z)&&null!==a[1])throw new o.aV(n,o.rH.InvalidParameter,t);if(null===a[0])return null;if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);return null===a[1]?null:(0,g.im)(await(0,u.c)("clip",[a[0].toJSON(),a[1].toJSON()]))}))},e.functions.cut=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,2,2,n,t),!(a[1]instanceof m.Z)&&null!==a[1])throw new o.aV(n,o.rH.InvalidParameter,t);if(null===a[0])return[];if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);return null===a[1]?[(0,i.r1)(a[0])]:(await(0,u.c)("cut",[a[0].toJSON(),a[1].toJSON()])).map((e=>(0,g.im)(e)))}))},e.functions.area=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if((0,l.D)(a,1,2,n,t),a=(0,l.E)(a),(0,l.p)(a[0])){const e=await a[0].sumArea(V(a[1]),!1,n.abortSignal);if(n.abortSignal.aborted)throw new o.aV(n,o.rH.Cancelled,t);return e}let i=a[0];if(((0,H.kJ)(i)||(0,l.m)(i))&&(i=(0,l.F)(a[0],n.spatialReference)),null===i)return 0;if(!(i instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);return(0,u.c)("area",[i.toJSON(),V(a[1])])}))},e.functions.areageodetic=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if((0,l.D)(a,1,2,n,t),a=(0,l.E)(a),(0,l.p)(a[0])){const e=await a[0].sumArea(V(a[1]),!0,n.abortSignal);if(n.abortSignal.aborted)throw new o.aV(n,o.rH.Cancelled,t);return e}let i=a[0];if(((0,H.kJ)(a[0])||(0,l.m)(a[0]))&&(i=(0,l.F)(a[0],n.spatialReference)),null===i)return 0;if(!(i instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);return(0,u.c)("geodeticArea",[i.toJSON(),V(a[1])])}))},e.functions.length=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if((0,l.D)(a,1,2,n,t),a=(0,l.E)(a),(0,l.p)(a[0])){const e=await a[0].sumLength(V(a[1]),!1,n.abortSignal);if(n.abortSignal.aborted)throw new o.aV(n,o.rH.Cancelled,t);return e}let i=a[0];if(((0,H.kJ)(a[0])||(0,l.m)(a[0]))&&(i=(0,l.G)(a[0],n.spatialReference)),null===i)return 0;if(!(i instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);return(0,u.c)("length",[i.toJSON(),V(a[1])])}))},e.functions.length3d=function(n,r){return e.standardFunctionAsync(n,r,(async(e,a,i)=>{if((0,l.D)(i,1,2,n,r),null===(i=(0,l.E)(i))[0])return 0;let c=i[0];if(((0,H.kJ)(i[0])||(0,l.m)(i[0]))&&(c=(0,l.G)(i[0],n.spatialReference)),null===c)return 0;if(!(c instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,r);if(!0===c.hasZ){const{convertFromSpatialReferenceUnit:e,toLengthUnit:n}=await Promise.resolve().then(t.bind(t,30020)),r=(0,s.$1)(c);return e(c.spatialReference,n(i[1]),r)}return(0,u.c)("length",[c.toJSON(),V(i[1])])}))},e.functions.lengthgeodetic=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if((0,l.D)(a,1,2,n,t),a=(0,l.E)(a),(0,l.p)(a[0])){const e=await a[0].sumLength(V(a[1]),!0,n.abortSignal);if(n.abortSignal.aborted)throw new o.aV(n,o.rH.Cancelled,t);return e}let i=a[0];if(((0,H.kJ)(a[0])||(0,l.m)(a[0]))&&(i=(0,l.G)(a[0],n.spatialReference)),null===i)return 0;if(!(i instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);return(0,u.c)("geodeticLength",[i.toJSON(),V(a[1])])}))},e.functions.distance=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{a=(0,l.E)(a),(0,l.D)(a,2,3,n,t);let i=a[0];if(((0,H.kJ)(a[0])||(0,l.m)(a[0]))&&(i=(0,l.H)(a[0],n.spatialReference)),!(i instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);let c=a[1];if(((0,H.kJ)(a[1])||(0,l.m)(a[1]))&&(c=(0,l.H)(a[1],n.spatialReference)),!(c instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);return(0,u.c)("distance",[i.toJSON(),c.toJSON(),V(a[2])])}))},e.functions.distancegeodetic=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{a=(0,l.E)(a),(0,l.D)(a,2,3,n,t);const i=a[0];if(!(i instanceof p.Z))throw new o.aV(n,o.rH.InvalidParameter,t);const c=a[1];if(!(c instanceof p.Z))throw new o.aV(n,o.rH.InvalidParameter,t);const s=new m.Z({paths:[],spatialReference:i.spatialReference});return s.addPath([i,c]),(0,u.c)("geodeticLength",[s.toJSON(),V(a[2])])}))},e.functions.densify=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,2,3,n,t),null===a[0])return null;if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);const i=(0,l.t)(a[1]);if(isNaN(i))throw new o.aV(n,o.rH.InvalidParameter,t);if(i<=0)throw new o.aV(n,o.rH.InvalidParameter,t);switch(a[0].type){case"polygon":case"polyline":case"extent":return(0,g.im)(await(0,u.c)("densify",[a[0].toJSON(),i,V(a[2])]));default:return a[0]}}))},e.functions.densifygeodetic=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,2,3,n,t),null===a[0])return null;if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);const i=(0,l.t)(a[1]);if(isNaN(i))throw new o.aV(n,o.rH.InvalidParameter,t);if(i<=0)throw new o.aV(n,o.rH.InvalidParameter,t);switch(a[0].type){case"polygon":case"polyline":case"extent":return(0,g.im)(await(0,u.c)("geodeticDensify",[a[0].toJSON(),i,V(a[2])]));default:return a[0]}}))},e.functions.generalize=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,2,4,n,t),null===a[0])return null;if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);const i=(0,l.t)(a[1]);if(isNaN(i))throw new o.aV(n,o.rH.InvalidParameter,t);const c=(0,l.e)((0,l.J)(a[2],!0));return(0,g.im)(await(0,u.c)("generalize",[a[0].toJSON(),i,V(a[3]),{removeDegenerateParts:c}]))}))},e.functions.buffer=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,2,3,n,t),null===a[0])return null;if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);const c=(0,l.t)(a[1]);if(isNaN(c))throw new o.aV(n,o.rH.InvalidParameter,t);return 0===c?(0,i.r1)(a[0]):(0,g.im)(await(0,u.c)("buffer",[a[0].toJSON(),c,V(a[2])]))}))},e.functions.buffergeodetic=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,2,3,n,t),null===a[0])return null;if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);const c=(0,l.t)(a[1]);if(isNaN(c))throw new o.aV(n,o.rH.InvalidParameter,t);return 0===c?(0,i.r1)(a[0]):(0,g.im)(await(0,u.c)("geodesicBuffer",[a[0].toJSON(),c,V(a[2])]))}))},e.functions.offset=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,2,6,n,t),null===a[0])return null;if(!(a[0]instanceof h.Z||a[0]instanceof m.Z))throw new o.aV(n,o.rH.InvalidParameter,t);const i=(0,l.t)(a[1]);if(isNaN(i))throw new o.aV(n,o.rH.InvalidParameter,t);const c=(0,l.f)(a[3]??"round").toLowerCase();let s;switch(c){case"round":case"bevel":case"miter":case"square":s=c;break;default:s="round"}const f=(0,l.t)((0,l.J)(a[4],10));if(isNaN(f))throw new o.aV(n,o.rH.InvalidParameter,t);const w=(0,l.t)((0,l.J)(a[5],0));if(isNaN(w))throw new o.aV(n,o.rH.InvalidParameter,t);return(0,g.im)(await(0,u.c)("offset",[a[0].toJSON(),i,V(a[2]),{joins:s,miterLimit:f,flattenError:w}]))}))},e.functions.rotate=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,2,3,n,t),null===a[0])return null;if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);const i=a[0]instanceof f.Z?h.Z.fromExtent(a[0]):a[0],c=(0,l.t)(a[1]);if(isNaN(c))throw new o.aV(n,o.rH.InvalidParameter,t);const s=(0,l.J)(a[2],null);if(null===s){const e="point"===i.type?i:i.extent?.center;return(0,g.im)(await(0,u.c)("rotate",[i.toJSON(),c,e?.x,e?.y]))}if(s instanceof p.Z)return(0,g.im)(await(0,u.c)("rotate",[i.toJSON(),c,s.x,s.y]));throw new o.aV(n,o.rH.InvalidParameter,t)}))},e.functions.centroid=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,1,2,n,t),null===a[0])return null;const i=(0,l.f)(a[1]??"geometric").toLowerCase();if("geometric"!==i&&"labelpoint"!==i)throw new o.aV(n,o.rH.InvalidParameter,t);let c=a[0];if(((0,H.kJ)(a[0])||(0,l.m)(a[0]))&&(c="geometric"===i?(0,l.H)(a[0],n.spatialReference):(0,l.F)(a[0],n.spatialReference),null===c))return null;if(!(c instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);return(0,g.im)("geometric"===i?await(0,u.c)("centroid",[c.toJSON()]):await(0,u.c)("labelPoint",[c.toJSON()]))}))},e.functions.measuretocoordinate=function(n,t){return e.standardFunctionAsync(n,t,s.vt)},e.functions.pointtocoordinate=function(n,t){return e.standardFunctionAsync(n,t,s.z$)},e.functions.distancetocoordinate=function(n,t){return e.standardFunctionAsync(n,t,s.gc)},e.functions.multiparttosinglepart=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,1,1,n,t),null===a[0])return null;if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);if(a[0]instanceof p.Z)return[(0,l.u)((0,i.r1)(a[0]),n.spatialReference)];if(a[0]instanceof f.Z)return[(0,l.u)((0,i.r1)(a[0]),n.spatialReference)];const c=(0,g.im)(await(0,u.c)("simplify",[a[0].toJSON()]));if(c instanceof h.Z){const e=[],n=[];for(let t=0;t<c.rings.length;t++)if(c.isClockwise(c.rings[t])){const n=(0,g.im)({rings:[c.rings[t]],hasZ:!0===c.hasZ,hasM:!0===c.hasM,spatialReference:c.spatialReference.toJSON()});e.push(n)}else n.push({ring:c.rings[t],pt:c.getPoint(t,0)});for(let t=0;t<n.length;t++)for(let r=0;r<e.length;r++)if(e[r].contains(n[t].pt)){e[r].addRing(n[t].ring);break}return e}if(c instanceof m.Z){const e=[];for(let n=0;n<c.paths.length;n++){const t=(0,g.im)({paths:[c.paths[n]],hasZ:!0===c.hasZ,hasM:!0===c.hasM,spatialReference:c.spatialReference.toJSON()});e.push(t)}return e}if(a[0]instanceof d.Z){const e=[],t=(0,l.u)((0,i.r1)(a[0]),n.spatialReference);for(let n=0;n<t.points.length;n++)e.push(t.getPoint(n));return e}return null}))},e.functions.issimple=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,1,1,n,t),null===a[0])return!0;if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);return(0,u.c)("isSimple",[a[0].toJSON()])}))},e.functions.simplify=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,1,1,n,t),null===a[0])return null;if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);return(0,g.im)(await(0,u.c)("simplify",[a[0].toJSON()]))}))},e.functions.convexhull=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,1,1,n,t),null===a[0])return null;if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);return(0,g.im)(await(0,u.c)("convexHull",[a[0].toJSON()]))}))},e.functions.getuser=function(n,t){return e.standardFunctionAsync(n,t,(async(e,i,s)=>{(0,l.D)(s,0,2,n,t);let u=(0,l.J)(s[1],""),f=!0===u;if(u=!0===u||!1===u?"":(0,l.f)(u),0===s.length||s[0]instanceof r.Z){let e;e=n.services?.portal?n.services.portal:y.Z.getDefault(),s.length>0&&(e=(0,c._)(s[0],e));const t=await b(e,u,f);if(t){const e=JSON.parse(JSON.stringify(t));for(const n of["lastLogin","created","modified"])void 0!==e[n]&&null!==e[n]&&(e[n]=new Date(e[n]));return a.Z.convertObjectToArcadeDictionary(e,(0,l.K)(n))}return null}let w=null;if((0,l.p)(s[0])&&(w=s[0]),w){if(f=!1,u)return null;await w.load();const e=await w.getOwningSystemUrl();if(!e){if(!u){const e=await w.getIdentityUser();return e?a.Z.convertObjectToArcadeDictionary({username:e},(0,l.K)(n)):null}return null}let t;t=n.services?.portal?n.services.portal:y.Z.getDefault(),t=(0,c._)(new r.Z(e),t);const o=await b(t,u,f);if(o){const e=JSON.parse(JSON.stringify(o));for(const n of["lastLogin","created","modified"])void 0!==e[n]&&null!==e[n]&&(e[n]=new Date(e[n]));return a.Z.convertObjectToArcadeDictionary(e,(0,l.K)(n))}return null}throw new o.aV(n,o.rH.InvalidParameter,t)}))},e.functions.nearestcoordinate=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,i)=>{if(i=(0,l.E)(i),(0,l.D)(i,2,2,n,t),!(i[0]instanceof w.Z||null===i[0]))throw new o.aV(n,o.rH.InvalidParameter,t);if(!(i[1]instanceof p.Z||null===i[1]))throw new o.aV(n,o.rH.InvalidParameter,t);if(null===i[0]||null===i[1])return null;const c=i[0]instanceof f.Z?h.Z.fromExtent(i[0]):i[0],s=await(0,u.c)("getNearestCoordinate",[c.toJSON(),i[1].toJSON(),{calculateLeftRightSide:!0}]);return null===s?null:a.Z.convertObjectToArcadeDictionary({coordinate:(0,g.im)(s.coordinate),distance:s.distance,sideOfLine:0===s.distance?"straddle":s.rightSide?"right":"left"},(0,l.K)(n),!1,!0)}))},e.functions.nearestvertex=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,i)=>{if(i=(0,l.E)(i),(0,l.D)(i,2,2,n,t),!(i[0]instanceof w.Z||null===i[0]))throw new o.aV(n,o.rH.InvalidParameter,t);if(!(i[1]instanceof p.Z||null===i[1]))throw new o.aV(n,o.rH.InvalidParameter,t);if(null===i[0]||null===i[1])return null;const c=i[0]instanceof f.Z?h.Z.fromExtent(i[0]):i[0],s=await(0,u.c)("getNearestVertex",[c.toJSON(),i[1].toJSON()]);return null===s?null:a.Z.convertObjectToArcadeDictionary({coordinate:(0,g.im)(s.coordinate),distance:s.distance,sideOfLine:0===s.distance?"straddle":s.rightSide?"right":"left"},(0,l.K)(n),!1,!0)}))})}},74799:(e,n,t)=>{t.d(n,{c:()=>c});var r=t(62517);let a,o,i=!1;function l(){return a??=(0,r.bA)("arcadeGeometryOperatorsWorker").then((e=>{o=e,i=!0,a=void 0}))}async function c(e,n){return i?o.apply("invokeGeometryOp",[e,n]):(await l(),c(e,n))}},86727:(e,n,t)=>{t.d(n,{_:()=>a});var r=t(93968);function a(e,n){return null===e?n:new r.Z({url:e.field("url")})}}}]);