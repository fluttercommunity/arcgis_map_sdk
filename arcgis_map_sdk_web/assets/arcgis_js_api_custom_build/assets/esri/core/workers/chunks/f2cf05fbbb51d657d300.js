"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[3543,7367],{93543:(e,n,t)=>{t.r(n),t.d(n,{executeScript:()=>V,extend:()=>z,functionHelper:()=>Y});var r=t(48938),a=t(99719),o=t(72888),i=t(15695),l=t(66395),c=t(85935),s=t(93833),u=t(92400),f=t(78878),w=t(19157),d=t(63680),p=t(81113),h=t(32091),y=t(87367),g=t(41217),m=t(36770),S=t(47346),D=t(29304),v=t(91075),b=t(16930),A=t(54218);async function X(e,n){const t=[];for(let r=0;r<n.arguments.length;r++)t.push(await O(e,n.arguments[r]));return t}async function T(e,n,t){return!0===n.preparsed?t(e,null,n.arguments):t(e,n,await X(e,n))}class $ extends u.fF{constructor(e,n){super(),this.definition=null,this.context=null,this.definition=e,this.context=n}createFunction(e){return(...n)=>{const t={spatialReference:this.context.spatialReference,console:this.context.console,lrucache:this.context.lrucache,timeZone:this.context.timeZone??null,exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,localScope:{},depthCounter:{depth:e.depthCounter+1},globalScope:this.context.globalScope};if(t.depthCounter.depth>64)throw new c.D$(e,c.TX.MaximumCallDepth,null);return U(this.definition,t,n,null)}}call(e,n){return I(e,n,((t,r,a)=>{const o={spatialReference:e.spatialReference,services:e.services,console:e.console,libraryResolver:e.libraryResolver,exports:e.exports,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:{},abortSignal:e.abortSignal,globalScope:e.globalScope,depthCounter:{depth:e.depthCounter.depth+1}};if(o.depthCounter.depth>64)throw new c.D$(e,c.TX.MaximumCallDepth,n);return U(this.definition,o,a,n)}))}marshalledCall(e,n,t,r){return r(e,n,(async(a,o,i)=>{const l={spatialReference:e.spatialReference,globalScope:t.globalScope,depthCounter:{depth:e.depthCounter.depth+1},libraryResolver:e.libraryResolver,exports:e.exports,console:e.console,abortSignal:e.abortSignal,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:{}};return i=i.map((n=>!(0,f.i)(n)||n instanceof u.CU?n:(0,u.o6)(n,e,r))),(0,u.o6)(await U(this.definition,l,i,n),t,r)}))}}class N extends a.x{constructor(e){super(),this.source=e}global(e){const n=this.executingContext.globalScope[(0,r.X)(e)];if((0,f.i)(n.value)&&!(n.value instanceof u.CU)){const e=new u.CU;e.fn=n.value,e.parameterEvaluator=I,e.context=this.executingContext,n.value=e}return n.value}setGlobal(e,n){if((0,f.i)(n))throw new c.D$(null,c.TX.AssignModuleFunction,null);this.executingContext.globalScope[(0,r.X)(e)]={value:n}}hasGlobal(e){return void 0===this.executingContext.exports[e]&&(e=(0,r.X)(e)),void 0!==this.executingContext.exports[e]}async loadModule(e){let n=e.spatialReference;null==n&&(n=new b.A({wkid:102100})),this.moduleScope=j({},e.customfunctions,e.timeZone),this.executingContext={spatialReference:n,services:e.services,libraryResolver:new o.a(e.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},abortSignal:void 0===e.abortSignal||null===e.abortSignal?{aborted:!1}:e.abortSignal,globalScope:this.moduleScope,console:e.console??G,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:null,depthCounter:{depth:1}},await J(this.executingContext,this.source.syntax)}}async function I(e,n,t){return!0===n.preparsed?t(e,null,n.arguments):t(e,n,await X(e,n))}async function O(e,n){n.breakpoint&&await n.breakpoint();try{switch(n.type){case"UpdateExpression":return await async function(e,n){const t=n.argument;if("CallExpression"===t.type)throw new c.D$(e,c.TX.NeverReach,n);if("MemberExpression"===t.type){const r=await O(e,t.object);let a,o;if(!0===t.computed)a=await O(e,t.property);else{if("Identifier"!==t.property.type)throw new c.D$(e,c.TX.Unrecognized,n);a=t.property.name}if((0,A.cy)(r)){if(!(0,A.Et)(a))throw new c.D$(e,c.TX.ArrayAccessorMustBeNumber,n);if(a<0&&(a=r.length+a),a<0||a>=r.length)throw new c.D$(e,c.TX.OutOfBounds,n);o=(0,f.t)(r[a]),r[a]="++"===n.operator?o+1:o-1}else if(r instanceof l.A){if(!1===(0,A.Kg)(a))throw new c.D$(e,c.TX.KeyAccessorMustBeString,n);if(!0!==r.hasField(a))throw new c.D$(e,c.TX.FieldNotFound,n,{key:a});o=(0,f.t)(r.field(a)),r.setField(a,"++"===n.operator?o+1:o-1)}else if(r instanceof N){if(!1===(0,A.Kg)(a))throw new c.D$(e,c.TX.ModuleAccessorMustBeString,n);if(!0!==r.hasGlobal(a))throw new c.D$(e,c.TX.ModuleExportNotFound,n);o=(0,f.t)(r.global(a)),r.setGlobal(a,"++"===n.operator?o+1:o-1)}else{if(!(0,f.n)(r))throw(0,f.m)(r)?new c.D$(e,c.TX.Immutable,n):new c.D$(e,c.TX.InvalidParameter,n);if(!1===(0,A.Kg)(a))throw new c.D$(e,c.TX.KeyAccessorMustBeString,n);if(!0!==r.hasField(a))throw new c.D$(e,c.TX.FieldNotFound,n,{key:a});o=(0,f.t)(r.field(a)),r.setField(a,"++"===n.operator?o+1:o-1)}return!1===n.prefix?o:"++"===n.operator?o+1:o-1}const a=(0,r.X)(t);let o;if(null!=e.localScope&&void 0!==e.localScope[a])return o=(0,f.t)(e.localScope[a].value),e.localScope[a]={value:"++"===n.operator?o+1:o-1},!1===n.prefix?o:"++"===n.operator?o+1:o-1;if(void 0!==e.globalScope[a])return o=(0,f.t)(e.globalScope[a].value),e.globalScope[a]={value:"++"===n.operator?o+1:o-1},!1===n.prefix?o:"++"===n.operator?o+1:o-1;throw new c.D$(e,c.TX.InvalidIdentifier,n)}(e,n);case"AssignmentExpression":return await async function(e,n){const t=n.left;if("MemberExpression"===t.type){const r=await O(e,t.object);let a;if(!0===t.computed)a=await O(e,t.property);else{if("Identifier"!==t.property.type)throw new c.D$(e,c.TX.InvalidIdentifier,n);a=t.property.name}const o=await O(e,n.right);if((0,A.cy)(r)){if(!(0,A.Et)(a))throw new c.D$(e,c.TX.ArrayAccessorMustBeNumber,n);if(a<0&&(a=r.length+a),a<0||a>r.length)throw new c.D$(e,c.TX.OutOfBounds,n);if(a===r.length){if("="!==n.operator)throw new c.D$(e,c.TX.OutOfBounds,n);r[a]=E(o,n.operator,r[a],n,e)}else r[a]=E(o,n.operator,r[a],n,e)}else if(r instanceof l.A){if(!1===(0,A.Kg)(a))throw new c.D$(e,c.TX.KeyAccessorMustBeString,n);if(!0===r.hasField(a))r.setField(a,E(o,n.operator,r.field(a),n,e));else{if("="!==n.operator)throw new c.D$(e,c.TX.FieldNotFound,n,{key:a});r.setField(a,E(o,n.operator,null,n,e))}}else if(r instanceof N){if(!1===(0,A.Kg)(a))throw new c.D$(e,c.TX.KeyAccessorMustBeString,n);if(!0!==r.hasGlobal(a))throw new c.D$(e,c.TX.ModuleExportNotFound,n);r.setGlobal(a,E(o,n.operator,r.global(a),n,e))}else{if(!(0,f.n)(r))throw(0,f.m)(r)?new c.D$(e,c.TX.Immutable,n):new c.D$(e,c.TX.InvalidParameter,n);if(!1===(0,A.Kg)(a))throw new c.D$(e,c.TX.KeyAccessorMustBeString,n);if(!0===r.hasField(a))r.setField(a,E(o,n.operator,r.field(a),n,e));else{if("="!==n.operator)throw new c.D$(e,c.TX.FieldNotFound,n,{key:a});r.setField(a,E(o,n.operator,null,n,e))}}return f.w}const a=(0,r.X)(t);if(null!=e.localScope&&void 0!==e.localScope[a]){const t=await O(e,n.right);return e.localScope[a]={value:E(t,n.operator,e.localScope[a].value,n,e)},f.w}if(void 0!==e.globalScope[a]){const t=await O(e,n.right);return e.globalScope[a]={value:E(t,n.operator,e.globalScope[a].value,n,e)},f.w}throw new c.D$(e,c.TX.InvalidIdentifier,n)}(e,n);case"TemplateLiteral":return await async function(e,n){let t="",r=0;for(const a of n.quasis)if(t+=a.value?a.value.cooked:"",!1===a.tail){if(n.expressions[r]){const a=await O(e,n.expressions[r]);if((0,f.i)(a))throw new c.D$(e,c.TX.NoFunctionInTemplateLiteral,n);t+=(0,f.f)(a)}r++}return t}(e,n);case"Identifier":return M(e,n);case"MemberExpression":return await async function(e,n){const t=await O(e,n.object);if(null===t)throw new c.D$(e,c.TX.MemberOfNull,n);if(!1===n.computed){if("Identifier"===n.property.type){if(t instanceof l.A||(0,f.z)(t))return t.field(n.property.name);if(t instanceof v.A)return(0,i.Bl)(t,n.property.name,e,n);if(t instanceof N){if(!t.hasGlobal(n.property.name))throw new c.D$(e,c.TX.InvalidIdentifier,n);return t.global(n.property.name)}throw new c.D$(e,c.TX.InvalidMemberAccessKey,n)}throw new c.D$(e,c.TX.InvalidMemberAccessKey,n)}let r=await O(e,n.property);if(t instanceof l.A||(0,f.z)(t)){if((0,A.Kg)(r))return t.field(r);throw new c.D$(e,c.TX.InvalidMemberAccessKey,n)}if(t instanceof N){if((0,A.Kg)(r))return t.global(r);throw new c.D$(e,c.TX.InvalidMemberAccessKey,n)}if(t instanceof v.A){if((0,A.Kg)(r))return(0,i.Bl)(t,r,e,n);throw new c.D$(e,c.TX.InvalidMemberAccessKey,n)}if((0,A.cy)(t)){if((0,A.Et)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length+r),r>=t.length||r<0)throw new c.D$(e,c.TX.OutOfBounds,n);return t[r]}throw new c.D$(e,c.TX.InvalidMemberAccessKey,n)}if((0,f.m)(t)){if((0,A.Et)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length()+r),r>=t.length()||r<0)throw new c.D$(e,c.TX.OutOfBounds,n);return t.get(r)}throw new c.D$(e,c.TX.InvalidMemberAccessKey,n)}if((0,A.Kg)(t)){if((0,A.Et)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length+r),r>=t.length||r<0)throw new c.D$(e,c.TX.OutOfBounds,n);return t[r]}throw new c.D$(e,c.TX.InvalidMemberAccessKey,n)}throw new c.D$(e,c.TX.InvalidMemberAccessKey,n)}(e,n);case"Literal":return n.value;case"CallExpression":return await async function(e,n){if("MemberExpression"===n.callee.type){const t=await O(e,n.callee.object);if(!(t instanceof N))throw new c.D$(e,c.TX.FunctionNotFound,n);const r=!1===n.callee.computed?n.callee.property.name:await O(e,n.callee.property);if(!t.hasGlobal(r))throw new c.D$(e,c.TX.FunctionNotFound,n);const a=t.global(r);if(!(0,f.i)(a))throw new c.D$(e,c.TX.CallNonFunction,n);return a.call(e,n)}if("Identifier"!==n.callee.type)throw new c.D$(e,c.TX.FunctionNotFound,n);const t=(0,r.X)(n.callee);if(null!=e.localScope&&void 0!==e.localScope[t]){const r=e.localScope[t];if((0,f.i)(r.value))return r.value.call(e,n);throw new c.D$(e,c.TX.CallNonFunction,n)}if(void 0!==e.globalScope[t]){const r=e.globalScope[t];if((0,f.i)(r.value))return r.value.call(e,n);throw new c.D$(e,c.TX.CallNonFunction,n)}throw new c.D$(e,c.TX.FunctionNotFound,n)}(e,n);case"UnaryExpression":return await async function(e,n){const t=await O(e,n.argument);if((0,A.Lm)(t)){if("!"===n.operator)return!t;if("-"===n.operator)return-1*(0,f.t)(t);if("+"===n.operator)return 1*(0,f.t)(t);if("~"===n.operator)return~(0,f.t)(t);throw new c.D$(e,c.TX.UnsupportedUnaryOperator,n)}if("-"===n.operator)return-1*(0,f.t)(t);if("+"===n.operator)return 1*(0,f.t)(t);if("~"===n.operator)return~(0,f.t)(t);throw new c.D$(e,c.TX.UnsupportedUnaryOperator,n)}(e,n);case"BinaryExpression":return await async function(e,n){const t=await O(e,n.left),r=await O(e,n.right);switch(n.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,f.C)((0,f.t)(t),(0,f.t)(r),n.operator);case"==":return(0,f.B)(t,r);case"!=":return!(0,f.B)(t,r);case"<":case">":case"<=":case">=":return(0,f.A)(t,r,n.operator);case"+":return(0,A.Kg)(t)||(0,A.Kg)(r)?(0,f.f)(t)+(0,f.f)(r):(0,f.t)(t)+(0,f.t)(r);case"-":return(0,f.t)(t)-(0,f.t)(r);case"*":return(0,f.t)(t)*(0,f.t)(r);case"/":return(0,f.t)(t)/(0,f.t)(r);case"%":return(0,f.t)(t)%(0,f.t)(r);default:throw new c.D$(e,c.TX.UnsupportedOperator,n)}}(e,n);case"LogicalExpression":return await async function(e,n){const t=await O(e,n.left);if(!(0,A.Lm)(t))throw new c.D$(e,c.TX.LogicalExpressionOnlyBoolean,n);switch(n.operator){case"||":{if(!0===t)return t;const r=await O(e,n.right);if((0,A.Lm)(r))return r;throw new c.D$(e,c.TX.LogicExpressionOrAnd,n)}case"&&":{if(!1===t)return t;const r=await O(e,n.right);if((0,A.Lm)(r))return r;throw new c.D$(e,c.TX.LogicExpressionOrAnd,n)}default:throw new c.D$(e,c.TX.LogicExpressionOrAnd,n)}}(e,n);case"ArrayExpression":return await async function(e,n){const t=[];for(let r=0;r<n.elements.length;r++)t.push(await O(e,n.elements[r]));for(let r=0;r<t.length;r++){if((0,f.i)(t[r]))throw new c.D$(e,c.TX.NoFunctionInArray,n);t[r]===f.w&&(t[r]=null)}return t}(e,n);case"ObjectExpression":return await async function(e,n){const t=[];for(let r=0;r<n.properties.length;r++){const a=n.properties[r],o=await O(e,a.value),i="Identifier"===a.key.type?a.key.name:await O(e,a.key);t[r]={key:i,value:o}}const r={},a=new Map;for(let o=0;o<t.length;o++){const i=t[o];if((0,f.i)(i.value))throw new c.D$(e,c.TX.NoFunctionInDictionary,n);if(!1===(0,A.Kg)(i.key))throw new c.D$(e,c.TX.KeyMustBeString,n);let l=i.key.toString();const s=l.toLowerCase();a.has(s)?l=a.get(s):a.set(s,l),i.value===f.w?r[l]=null:r[l]=i.value}const o=new l.A(r);return o.immutable=!1,o}(e,n);default:throw new c.D$(e,c.TX.Unrecognized,n)}}catch(t){throw(0,c.Nh)(e,n,t)}}async function x(e,n){n.breakpoint&&await n.breakpoint();try{switch(n.type){case"ImportDeclaration":return await async function(e,n){const t=(0,r.X)(n.specifiers[0].local),a=e.libraryResolver.loadLibrary(t);let o;return e.libraryResolver._moduleSingletons?.has(a.uri)?o=e.libraryResolver._moduleSingletons.get(a.uri):(o=new N(a),await o.loadModule(e),e.libraryResolver._moduleSingletons?.set(a.uri,o)),e.globalScope[t]={value:o},f.w}(e,n);case"ExportNamedDeclaration":return await async function(e,n){if(await x(e,n.declaration),"FunctionDeclaration"===n.declaration.type)e.exports[(0,r.X)(n.declaration.id)]="function";else if("VariableDeclaration"===n.declaration.type)for(const t of n.declaration.declarations)e.exports[(0,r.X)(t.id)]="variable";return f.w}(e,n);case"VariableDeclaration":return await k(e,n,0);case"BlockStatement":return await J(e,n);case"FunctionDeclaration":return await async function(e,n){const t=(0,r.X)(n.id);return e.globalScope[t]={value:new $(n,e)},f.w}(e,n);case"ReturnStatement":return await async function(e,n){if(null===n.argument)return new f.R(f.w);const t=await O(e,n.argument);return new f.R(t)}(e,n);case"IfStatement":return await async function(e,n){const t=await O(e,n.test);if(!0===t)return x(e,n.consequent);if(!1===t)return null!==n.alternate?x(e,n.alternate):f.w;throw new c.D$(e,c.TX.BooleanConditionRequired,n)}(e,n);case"ExpressionStatement":return await async function(e,n){const t=await O(e,n.expression);return t===f.w?f.w:new f.I(t)}(e,n);case"ForStatement":return await async function(e,n){try{for(null!==n.init&&("VariableDeclaration"===n.init.type?await x(e,n.init):await O(e,n.init));;){if(null!==n.test){const t=await O(e,n.test);if(!0===e.abortSignal?.aborted)throw new c.D$(e,c.TX.Cancelled,n);if(!1===t)break;if(!0!==t)throw new c.D$(e,c.TX.BooleanConditionRequired,n)}const t=await x(e,n.body);if(t===f.x)break;if(t instanceof f.R)return t;null!==n.update&&await O(e,n.update)}return f.w}catch(e){throw e}}(e,n);case"WhileStatement":return await async function(e,n){let t=await O(e,n.test);if(!1===t)return f.w;if(!0!==t)throw new c.D$(e,c.TX.BooleanConditionRequired,n);for(;!0===t;){const r=await x(e,n.body);if(r===f.x)break;if(r instanceof f.R)return r;if(t=await O(e,n.test),!0!==t&&!1!==t)throw new c.D$(e,c.TX.BooleanConditionRequired,n)}return f.w}(e,n);case"ForInStatement":return await async function(e,n){const t=await O(e,n.right);"VariableDeclaration"===n.left.type&&await x(e,n.left);const a=(0,r.X)("VariableDeclaration"===n.left.type?n.left.declarations[0].id:n.left);let o=null;if(null!=e.localScope&&void 0!==e.localScope[a]&&(o=e.localScope[a]),null===o&&void 0!==e.globalScope[a]&&(o=e.globalScope[a]),null===o)throw new c.D$(e,c.TX.InvalidIdentifier,n);return(0,A.cy)(t)||(0,A.Kg)(t)?await F(e,n,t,o):(0,f.m)(t)?await C(e,n,t,o):t instanceof l.A||(0,f.z)(t)?await F(e,n,t.keys(),o,"k"):(0,f.p)(t)?await R(e,n,t,o):(0,f.l)(t)?await F(e,n,(0,i.T)(t),o,"k"):f.w}(e,n);case"ForOfStatement":return await async function(e,n){const t=await O(e,n.right);"VariableDeclaration"===n.left.type&&await x(e,n.left);const a=(0,r.X)("VariableDeclaration"===n.left.type?n.left.declarations[0].id:n.left);let o=null;if(null!=e.localScope&&void 0!==e.localScope[a]&&(o=e.localScope[a]),null===o&&void 0!==e.globalScope[a]&&(o=e.globalScope[a]),null===o)throw new c.D$(e,c.TX.InvalidIdentifier,n);return(0,A.cy)(t)||(0,A.Kg)(t)?await F(e,n,t,o,"k"):(0,f.m)(t)?await C(e,n,t,o,"k"):t instanceof l.A||(0,f.z)(t)?await async function(e,n,t,r){for(const a of t.keys()){const o=t.field(a);r.value=new l.A({key:a,value:o});const i=await x(e,n.body);if(i===f.x)break;if(i instanceof f.R)return i}return f.w}(e,n,t,o):(0,f.p)(t)?await R(e,n,t,o):(0,f.l)(t)?await async function(e,n,t,r){for(const a of(0,i.T)(t)){const o=(0,i.Bl)(t,a,e,n,1);r.value=new l.A({key:a,value:o});const c=await x(e,n.body);if(c===f.x)break;if(c instanceof f.R)return c}return f.w}(e,n,t,o):f.w}(e,n);case"BreakStatement":return f.x;case"EmptyStatement":return f.w;case"ContinueStatement":return f.y;default:throw new c.D$(e,c.TX.Unrecognized,n)}}catch(t){throw(0,c.Nh)(e,n,t)}}async function F(e,n,t,r,a="i"){const o=t.length;for(let i=0;i<o;i++){if("k"===a){if(i>=t.length)throw new c.D$(e,c.TX.OutOfBounds,n);r.value=t[i]}else r.value=i;const o=await x(e,n.body);if(o===f.x)break;if(o instanceof f.R)return o}return f.w}async function C(e,n,t,r,a="i"){const o=t.length();for(let i=0;i<o;i++){r.value="k"===a?t.get(i):i;const o=await x(e,n.body);if(o===f.x)break;if(o instanceof f.R)return o}return f.w}async function R(e,n,t,r){const a=t.iterator(e.abortSignal);let o;for(;null!=(o=await a.next());){const a=s.A.createFromGraphicLikeObject(o.geometry,o.attributes,t,e.timeZone);a._underlyingGraphic=o,r.value=a;const i=await x(e,n.body);if(i===f.x)break;if(i instanceof f.R)return i}return f.w}function E(e,n,t,r,a){switch(n){case"=":return e===f.w?null:e;case"/=":return(0,f.t)(t)/(0,f.t)(e);case"*=":return(0,f.t)(t)*(0,f.t)(e);case"-=":return(0,f.t)(t)-(0,f.t)(e);case"+=":return(0,A.Kg)(t)||(0,A.Kg)(e)?(0,f.f)(t)+(0,f.f)(e):(0,f.t)(t)+(0,f.t)(e);case"%=":return(0,f.t)(t)%(0,f.t)(e);default:throw new c.D$(a,c.TX.UnsupportedOperator,r)}}async function J(e,n){return P(e,n,0)}async function P(e,n,t){if(t>=n.body.length)return f.w;const r=await x(e,n.body[t]);return r instanceof f.R||r===f.x||r===f.y||t===n.body.length-1?r:P(e,n,t+1)}async function k(e,n,t){return t>=n.declarations.length||(await async function(e,n){let t=null;if(t=null===n.init?null:await O(e,n.init),null!==e.localScope){if(t===f.w&&(t=null),"Identifier"!==n.id.type)throw new c.D$(e,c.TX.InvalidIdentifier,n);const a=(0,r.X)(n.id);return void(null!=e.localScope&&(e.localScope[a]={value:t}))}if("Identifier"!==n.id.type)throw new c.D$(e,c.TX.InvalidIdentifier,n);const a=(0,r.X)(n.id);t===f.w&&(t=null),e.globalScope[a]={value:t}}(e,n.declarations[t]),t===n.declarations.length-1||await k(e,n,t+1)),f.w}function M(e,n){const t=(0,r.X)(n);if(null!=e.localScope&&void 0!==e.localScope[t])return e.localScope[t].value;if(void 0!==e.globalScope[t])return e.globalScope[t].value;throw new c.D$(e,c.TX.InvalidIdentifier,n)}const L={};async function K(e,n,t,r){const a=await O(e,n.arguments[t]);if((0,f.B)(a,r))return O(e,n.arguments[t+1]);const o=n.arguments.length-t;return 1===o?O(e,n.arguments[t]):2===o?null:3===o?O(e,n.arguments[t+2]):K(e,n,t+2,r)}async function B(e,n,t,r){if(!0===r)return O(e,n.arguments[t+1]);if(3==n.arguments.length-t)return O(e,n.arguments[t+2]);const a=await O(e,n.arguments[t+2]);if(!1===(0,A.Lm)(a))throw new c.D$(e,c.TX.ModuleExportNotFound,n.arguments[t+2]);return B(e,n,t+2,a)}async function U(e,n,t,a){const o=e.body;if(t.length!==e.params.length)throw new c.D$(n,c.TX.WrongNumberOfParameters,null);for(let a=0;a<t.length;a++){const o=e.params[a];"Identifier"===o.type&&null!=n.localScope&&(n.localScope[(0,r.X)(o)]={value:t[a]})}const i=await x(n,o);if(i instanceof f.R)return i.value;if(i===f.x)throw new c.D$(n,c.TX.UnexpectedToken,a);if(i===f.y)throw new c.D$(n,c.TX.UnexpectedToken,a);return i instanceof f.I?i.value:i}(0,p.d)(L,T),(0,D.d)(L,T),(0,h.d)(L,T,M),(0,m.d)(L,T),(0,g.d)(L,T),(0,S.d)(L,T),(0,y.registerFunctions)({functions:L,compiled:!1,signatures:null,evaluateIdentifier:null,mode:"async",standardFunction:T,standardFunctionAsync:I}),L.iif=async function(e,n){(0,f.D)(null===n.arguments?[]:n.arguments,3,3,e,n);const t=await O(e,n.arguments[0]);if(!1===(0,A.Lm)(t))throw new c.D$(e,c.TX.BooleanConditionRequired,n);return O(e,t?n.arguments[1]:n.arguments[2])},L.defaultvalue=async function(e,n){(0,f.D)(null===n.arguments?[]:n.arguments,2,3,e,n);const t=await O(e,n.arguments[0]);if(3===n.arguments.length){const r=await O(e,n.arguments[1]),a=(0,i.jd)(t,r);return null!=a&&""!==a?a:O(e,n.arguments[2])}return null==t||""===t?O(e,n.arguments[1]):t},L.decode=async function(e,n){if(n.arguments.length<2)throw new c.D$(e,c.TX.WrongNumberOfParameters,n);if(2===n.arguments.length)return O(e,n.arguments[1]);if((n.arguments.length-1)%2==0)throw new c.D$(e,c.TX.WrongNumberOfParameters,n);return K(e,n,1,await O(e,n.arguments[0]))},L.when=async function(e,n){if(n.arguments.length<3)throw new c.D$(e,c.TX.WrongNumberOfParameters,n);if(n.arguments.length%2==0)throw new c.D$(e,c.TX.WrongNumberOfParameters,n);const t=await O(e,n.arguments[0]);if(!1===(0,A.Lm)(t))throw new c.D$(e,c.TX.BooleanConditionRequired,n.arguments[0]);return B(e,n,0,t)};const Z={fixSpatialReference:f.u,parseArguments:X,standardFunction:T,standardFunctionAsync:I,evaluateIdentifier:M};for(const e in L)L[e]={value:new u.UQ(L[e])};const q=function(){};function j(e,n,t){const r=new q;null==e&&(e={}),null==n&&(n={});const a=new l.A({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});a.immutable=!1,r.textformatting={value:a};for(const e in n)r[e]={value:new u.UQ(n[e])};for(const n in e)r[n]={value:(0,A.DU)(e[n])?s.A.createFromGraphic(e[n],t):e[n]};return r}function G(e){console.log(e)}(q.prototype=L).infinity={value:Number.POSITIVE_INFINITY},q.prototype.pi={value:Math.PI};const Y=Z;function z(e){const n={mode:"async",compiled:!1,functions:{},signatures:[],standardFunction:T,standardFunctionAsync:I,evaluateIdentifier:M};for(let t=0;t<e.length;t++)e[t].registerFunctions(n);for(const e in n.functions)L[e]={value:new u.UQ(n.functions[e])},q.prototype[e]=L[e];for(let e=0;e<n.signatures.length;e++)(0,w.WC)(n.signatures[e],"async")}async function V(e,n){let t=n.spatialReference;null==t&&(t=new b.A({wkid:102100}));let r=null;e.usesModules&&(r=new o.a(new Map,e.loadedModules));const a=j(n.vars,n.customfunctions,n.timeZone),i={spatialReference:t,services:n.services,exports:{},libraryResolver:r,abortSignal:void 0===n.abortSignal||null===n.abortSignal?{aborted:!1}:n.abortSignal,globalScope:a,console:n.console??G,timeZone:n.timeZone??null,lrucache:n.lrucache,interceptor:n.interceptor,localScope:null,depthCounter:{depth:1}},l=await J(i,e);if(l instanceof f.R||l instanceof f.I){const e=l.value;if(e===f.w)return null;if((0,f.i)(e))throw new c.D$(i,c.TX.IllegalResult,null);return e}if(l===f.w)return null;if(l===f.x)throw new c.D$(i,c.TX.IllegalResult,null);if(l===f.y)throw new c.D$(i,c.TX.IllegalResult,null);throw new c.D$(i,c.TX.NeverReach,null)}z([d.A])},87367:(e,n,t)=>{t.r(n),t.d(n,{registerFunctions:()=>X});var r=t(47609),a=t(66395),o=t(85935),i=t(78502),l=t(78878),c=t(80672),s=t(81844),u=t(71163),f=t(5443),w=t(91075),d=t(48526),p=t(86738),h=t(39829),y=t(82799),g=t(65864),m=t(20655),S=t(70333),D=t(78888);async function v(e,n,t){const r=S.id?.findCredential(e.restUrl);if(!r)return null;if("loaded"===e.loadStatus&&""===n&&e.user?.sourceJSON&&!1===t)return e.user.sourceJSON;const a={responseType:"json",query:{f:"json"}};if(t&&(a.query.returnUserLicenseTypeExtensions=!0),""===n){const n=await(0,D.A)(e.restUrl+"/community/self",a);if(n.data){const e=n.data;if(e?.username)return e}return null}const o=await(0,D.A)(e.restUrl+"/community/users/"+n,a);if(o.data){const e=o.data;return e.error?null:e}return null}var b=t(54218);function A(e){if(null==e)return e;switch(typeof e){case"string":case"number":return e;default:throw new o.D$(null,o.TX.InvalidParameter,null)}}function X(e){"async"===e.mode&&(e.functions.disjoint=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.E)(a),(0,s.ZL)(a,n,t),null===a[0]||null===a[1]||(0,u.C)("disjoint",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.intersects=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.E)(a),(0,s.ZL)(a,n,t),null!==a[0]&&null!==a[1]&&(0,u.C)("intersects",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.touches=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.E)(a),(0,s.ZL)(a,n,t),null!==a[0]&&null!==a[1]&&(0,u.C)("touches",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.crosses=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.E)(a),(0,s.ZL)(a,n,t),null!==a[0]&&null!==a[1]&&(0,u.C)("crosses",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.within=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.E)(a),(0,s.ZL)(a,n,t),null!==a[0]&&null!==a[1]&&(0,u.C)("within",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.contains=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.E)(a),(0,s.ZL)(a,n,t),null!==a[0]&&null!==a[1]&&(0,u.C)("contains",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.overlaps=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.E)(a),(0,s.ZL)(a,n,t),null!==a[0]&&null!==a[1]&&(0,u.C)("overlaps",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.equals=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>((0,l.D)(a,2,2,n,t),a[0]===a[1]||(a[0]instanceof w.A&&a[1]instanceof w.A?(0,u.C)("equals",[a[0].toJSON(),a[1].toJSON()]):((0,l.g)(a[0])&&(0,l.g)(a[1])||!!((0,l.k)(a[0])&&(0,l.k)(a[1])||(0,l.j)(a[0])&&(0,l.j)(a[1])))&&a[0].equals(a[1])))))},e.functions.relate=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,3,3,n,t),a[0]instanceof w.A&&a[1]instanceof w.A)return(0,u.C)("relate",[a[0].toJSON(),a[1].toJSON(),(0,l.f)(a[2])]);if(a[0]instanceof w.A&&null===a[1])return!1;if(a[1]instanceof w.A&&null===a[0])return!1;if(null===a[0]&&null===a[1])return!1;throw new o.D$(n,o.TX.InvalidParameter,t)}))},e.functions.intersection=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>(a=(0,l.E)(a),(0,s.ZL)(a,n,t),null===a[0]||null===a[1]?null:(0,g.rS)(await(0,u.C)("intersection",[a[0].toJSON(),a[1].toJSON()])))))},e.functions.union=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(0===(a=(0,l.E)(a)).length)throw new o.D$(n,o.TX.WrongNumberOfParameters,t);const c=[];if(1===a.length)if((0,b.cy)(a[0])){for(const e of(0,l.E)(a[0]))if(null!==e){if(!(e instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);c.push(e.toJSON())}}else{if(!(0,l.m)(a[0])){if(a[0]instanceof w.A)return(0,l.u)((0,i.Yq)(a[0]),n.spatialReference);if(null===a[0])return null;throw new o.D$(n,o.TX.InvalidParameter,t)}for(const e of(0,l.E)(a[0].toArray()))if(null!==e){if(!(e instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);c.push(e.toJSON())}}else for(const e of a)if(null!==e){if(!(e instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);c.push(e.toJSON())}return 0===c.length?null:(0,g.rS)(await(0,u.C)("union",[c]))}))},e.functions.difference=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>(a=(0,l.E)(a),(0,s.ZL)(a,n,t),null===a[0]?null:null===a[1]?(0,i.Yq)(a[0]):(0,g.rS)(await(0,u.C)("difference",[a[0].toJSON(),a[1].toJSON()])))))},e.functions.symmetricdifference=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>(a=(0,l.E)(a),(0,s.ZL)(a,n,t),null===a[0]&&null===a[1]?null:null===a[0]?(0,i.Yq)(a[1]):null===a[1]?(0,i.Yq)(a[0]):(0,g.rS)(await(0,u.C)("symmetricDifference",[a[0].toJSON(),a[1].toJSON()])))))},e.functions.clip=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,2,2,n,t),!(a[1]instanceof f.A)&&null!==a[1])throw new o.D$(n,o.TX.InvalidParameter,t);if(null===a[0])return null;if(!(a[0]instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);return null===a[1]?null:(0,g.rS)(await(0,u.C)("clip",[a[0].toJSON(),a[1].toJSON()]))}))},e.functions.cut=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,2,2,n,t),!(a[1]instanceof y.A)&&null!==a[1])throw new o.D$(n,o.TX.InvalidParameter,t);if(null===a[0])return[];if(!(a[0]instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);return null===a[1]?[(0,i.Yq)(a[0])]:(await(0,u.C)("cut",[a[0].toJSON(),a[1].toJSON()])).map((e=>(0,g.rS)(e)))}))},e.functions.area=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if((0,l.D)(a,1,2,n,t),a=(0,l.E)(a),(0,l.p)(a[0])){const e=await a[0].sumArea(A(a[1]),!1,n.abortSignal);if(n.abortSignal.aborted)throw new o.D$(n,o.TX.Cancelled,t);return e}let i=a[0];if(((0,b.cy)(i)||(0,l.m)(i))&&(i=(0,l.F)(a[0],n.spatialReference)),null===i)return 0;if(!(i instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);return(0,u.C)("area",[i.toJSON(),A(a[1])])}))},e.functions.areageodetic=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if((0,l.D)(a,1,2,n,t),a=(0,l.E)(a),(0,l.p)(a[0])){const e=await a[0].sumArea(A(a[1]),!0,n.abortSignal);if(n.abortSignal.aborted)throw new o.D$(n,o.TX.Cancelled,t);return e}let i=a[0];if(((0,b.cy)(a[0])||(0,l.m)(a[0]))&&(i=(0,l.F)(a[0],n.spatialReference)),null===i)return 0;if(!(i instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);return(0,u.C)("geodeticArea",[i.toJSON(),A(a[1])])}))},e.functions.length=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if((0,l.D)(a,1,2,n,t),a=(0,l.E)(a),(0,l.p)(a[0])){const e=await a[0].sumLength(A(a[1]),!1,n.abortSignal);if(n.abortSignal.aborted)throw new o.D$(n,o.TX.Cancelled,t);return e}let i=a[0];if(((0,b.cy)(a[0])||(0,l.m)(a[0]))&&(i=(0,l.G)(a[0],n.spatialReference)),null===i)return 0;if(!(i instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);return(0,u.C)("length",[i.toJSON(),A(a[1])])}))},e.functions.length3d=function(n,r){return e.standardFunctionAsync(n,r,(async(e,a,i)=>{if((0,l.D)(i,1,2,n,r),null===(i=(0,l.E)(i))[0])return 0;let c=i[0];if(((0,b.cy)(i[0])||(0,l.m)(i[0]))&&(c=(0,l.G)(i[0],n.spatialReference)),null===c)return 0;if(!(c instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,r);if(!0===c.hasZ){const{convertFromSpatialReferenceUnit:e,toLengthUnit:n}=await Promise.resolve().then(t.bind(t,40547)),r=(0,s.UI)(c);return e(c.spatialReference,n(i[1]),r)}return(0,u.C)("length",[c.toJSON(),A(i[1])])}))},e.functions.lengthgeodetic=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if((0,l.D)(a,1,2,n,t),a=(0,l.E)(a),(0,l.p)(a[0])){const e=await a[0].sumLength(A(a[1]),!0,n.abortSignal);if(n.abortSignal.aborted)throw new o.D$(n,o.TX.Cancelled,t);return e}let i=a[0];if(((0,b.cy)(a[0])||(0,l.m)(a[0]))&&(i=(0,l.G)(a[0],n.spatialReference)),null===i)return 0;if(!(i instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);return(0,u.C)("geodeticLength",[i.toJSON(),A(a[1])])}))},e.functions.distance=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{a=(0,l.E)(a),(0,l.D)(a,2,3,n,t);let i=a[0];if(((0,b.cy)(a[0])||(0,l.m)(a[0]))&&(i=(0,l.H)(a[0],n.spatialReference)),!(i instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);let c=a[1];if(((0,b.cy)(a[1])||(0,l.m)(a[1]))&&(c=(0,l.H)(a[1],n.spatialReference)),!(c instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);return(0,u.C)("distance",[i.toJSON(),c.toJSON(),A(a[2])])}))},e.functions.distancegeodetic=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{a=(0,l.E)(a),(0,l.D)(a,2,3,n,t);const i=a[0];if(!(i instanceof p.A))throw new o.D$(n,o.TX.InvalidParameter,t);const c=a[1];if(!(c instanceof p.A))throw new o.D$(n,o.TX.InvalidParameter,t);const s=new y.A({paths:[],spatialReference:i.spatialReference});return s.addPath([i,c]),(0,u.C)("geodeticLength",[s.toJSON(),A(a[2])])}))},e.functions.densify=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,2,3,n,t),null===a[0])return null;if(!(a[0]instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);const i=(0,l.t)(a[1]);if(isNaN(i))throw new o.D$(n,o.TX.InvalidParameter,t);if(i<=0)throw new o.D$(n,o.TX.InvalidParameter,t);switch(a[0].type){case"polygon":case"polyline":case"extent":return(0,g.rS)(await(0,u.C)("densify",[a[0].toJSON(),i,A(a[2])]));default:return a[0]}}))},e.functions.densifygeodetic=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,2,3,n,t),null===a[0])return null;if(!(a[0]instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);const i=(0,l.t)(a[1]);if(isNaN(i))throw new o.D$(n,o.TX.InvalidParameter,t);if(i<=0)throw new o.D$(n,o.TX.InvalidParameter,t);switch(a[0].type){case"polygon":case"polyline":case"extent":return(0,g.rS)(await(0,u.C)("geodeticDensify",[a[0].toJSON(),i,A(a[2])]));default:return a[0]}}))},e.functions.generalize=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,2,4,n,t),null===a[0])return null;if(!(a[0]instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);const i=(0,l.t)(a[1]);if(isNaN(i))throw new o.D$(n,o.TX.InvalidParameter,t);const c=(0,l.e)((0,l.J)(a[2],!0));return(0,g.rS)(await(0,u.C)("generalize",[a[0].toJSON(),i,A(a[3]),{removeDegenerateParts:c}]))}))},e.functions.buffer=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,2,3,n,t),null===a[0])return null;if(!(a[0]instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);const c=(0,l.t)(a[1]);if(isNaN(c))throw new o.D$(n,o.TX.InvalidParameter,t);return 0===c?(0,i.Yq)(a[0]):(0,g.rS)(await(0,u.C)("buffer",[a[0].toJSON(),c,A(a[2])]))}))},e.functions.buffergeodetic=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,2,3,n,t),null===a[0])return null;if(!(a[0]instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);const c=(0,l.t)(a[1]);if(isNaN(c))throw new o.D$(n,o.TX.InvalidParameter,t);return 0===c?(0,i.Yq)(a[0]):(0,g.rS)(await(0,u.C)("geodesicBuffer",[a[0].toJSON(),c,A(a[2])]))}))},e.functions.offset=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,2,6,n,t),null===a[0])return null;if(!(a[0]instanceof h.A||a[0]instanceof y.A))throw new o.D$(n,o.TX.InvalidParameter,t);const i=(0,l.t)(a[1]);if(isNaN(i))throw new o.D$(n,o.TX.InvalidParameter,t);const c=(0,l.f)(a[3]??"round").toLowerCase();let s;switch(c){case"round":case"bevel":case"miter":case"square":s=c;break;default:s="round"}const f=(0,l.t)((0,l.J)(a[4],10));if(isNaN(f))throw new o.D$(n,o.TX.InvalidParameter,t);const w=(0,l.t)((0,l.J)(a[5],0));if(isNaN(w))throw new o.D$(n,o.TX.InvalidParameter,t);return(0,g.rS)(await(0,u.C)("offset",[a[0].toJSON(),i,A(a[2]),{joins:s,miterLimit:f,flattenError:w}]))}))},e.functions.rotate=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,2,3,n,t),null===a[0])return null;if(!(a[0]instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);const i=a[0]instanceof f.A?h.A.fromExtent(a[0]):a[0],c=(0,l.t)(a[1]);if(isNaN(c))throw new o.D$(n,o.TX.InvalidParameter,t);const s=(0,l.J)(a[2],null);if(null===s){const e="point"===i.type?i:i.extent?.center;return(0,g.rS)(await(0,u.C)("rotate",[i.toJSON(),c,e?.x,e?.y]))}if(s instanceof p.A)return(0,g.rS)(await(0,u.C)("rotate",[i.toJSON(),c,s.x,s.y]));throw new o.D$(n,o.TX.InvalidParameter,t)}))},e.functions.centroid=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,1,2,n,t),null===a[0])return null;const i=(0,l.f)(a[1]??"geometric").toLowerCase();if("geometric"!==i&&"labelpoint"!==i)throw new o.D$(n,o.TX.InvalidParameter,t);let c=a[0];if(((0,b.cy)(a[0])||(0,l.m)(a[0]))&&(c="geometric"===i?(0,l.H)(a[0],n.spatialReference):(0,l.F)(a[0],n.spatialReference),null===c))return null;if(!(c instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);return(0,g.rS)("geometric"===i?await(0,u.C)("centroid",[c.toJSON()]):await(0,u.C)("labelPoint",[c.toJSON()]))}))},e.functions.measuretocoordinate=function(n,t){return e.standardFunctionAsync(n,t,s.Cd)},e.functions.pointtocoordinate=function(n,t){return e.standardFunctionAsync(n,t,s.kr)},e.functions.distancetocoordinate=function(n,t){return e.standardFunctionAsync(n,t,s.Bn)},e.functions.multiparttosinglepart=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,1,1,n,t),null===a[0])return null;if(!(a[0]instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);if(a[0]instanceof p.A)return[(0,l.u)((0,i.Yq)(a[0]),n.spatialReference)];if(a[0]instanceof f.A)return[(0,l.u)((0,i.Yq)(a[0]),n.spatialReference)];const c=(0,g.rS)(await(0,u.C)("simplify",[a[0].toJSON()]));if(c instanceof h.A){const e=[],n=[];for(let t=0;t<c.rings.length;t++)if(c.isClockwise(c.rings[t])){const n=(0,g.rS)({rings:[c.rings[t]],hasZ:!0===c.hasZ,hasM:!0===c.hasM,spatialReference:c.spatialReference.toJSON()});e.push(n)}else n.push({ring:c.rings[t],pt:c.getPoint(t,0)});for(let t=0;t<n.length;t++)for(let r=0;r<e.length;r++)if(e[r].contains(n[t].pt)){e[r].addRing(n[t].ring);break}return e}if(c instanceof y.A){const e=[];for(let n=0;n<c.paths.length;n++){const t=(0,g.rS)({paths:[c.paths[n]],hasZ:!0===c.hasZ,hasM:!0===c.hasM,spatialReference:c.spatialReference.toJSON()});e.push(t)}return e}if(a[0]instanceof d.A){const e=[],t=(0,l.u)((0,i.Yq)(a[0]),n.spatialReference);for(let n=0;n<t.points.length;n++)e.push(t.getPoint(n));return e}return null}))},e.functions.issimple=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,1,1,n,t),null===a[0])return!0;if(!(a[0]instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);return(0,u.C)("isSimple",[a[0].toJSON()])}))},e.functions.simplify=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,1,1,n,t),null===a[0])return null;if(!(a[0]instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);return(0,g.rS)(await(0,u.C)("simplify",[a[0].toJSON()]))}))},e.functions.convexhull=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.E)(a),(0,l.D)(a,1,1,n,t),null===a[0])return null;if(!(a[0]instanceof w.A))throw new o.D$(n,o.TX.InvalidParameter,t);return(0,g.rS)(await(0,u.C)("convexHull",[a[0].toJSON()]))}))},e.functions.getuser=function(n,t){return e.standardFunctionAsync(n,t,(async(e,i,s)=>{(0,l.D)(s,0,2,n,t);let u=(0,l.J)(s[1],""),f=!0===u;if(u=!0===u||!1===u?"":(0,l.f)(u),0===s.length||s[0]instanceof r.A){let e;e=n.services?.portal?n.services.portal:m.A.getDefault(),s.length>0&&(e=(0,c.R)(s[0],e));const t=await v(e,u,f);if(t){const e=JSON.parse(JSON.stringify(t));for(const n of["lastLogin","created","modified"])void 0!==e[n]&&null!==e[n]&&(e[n]=new Date(e[n]));return a.A.convertObjectToArcadeDictionary(e,(0,l.K)(n))}return null}let w=null;if((0,l.p)(s[0])&&(w=s[0]),w){if(f=!1,u)return null;await w.load();const e=await w.getOwningSystemUrl();if(!e){if(!u){const e=await w.getIdentityUser();return e?a.A.convertObjectToArcadeDictionary({username:e},(0,l.K)(n)):null}return null}let t;t=n.services?.portal?n.services.portal:m.A.getDefault(),t=(0,c.R)(new r.A(e),t);const o=await v(t,u,f);if(o){const e=JSON.parse(JSON.stringify(o));for(const n of["lastLogin","created","modified"])void 0!==e[n]&&null!==e[n]&&(e[n]=new Date(e[n]));return a.A.convertObjectToArcadeDictionary(e,(0,l.K)(n))}return null}throw new o.D$(n,o.TX.InvalidParameter,t)}))},e.functions.nearestcoordinate=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,i)=>{if(i=(0,l.E)(i),(0,l.D)(i,2,2,n,t),!(i[0]instanceof w.A||null===i[0]))throw new o.D$(n,o.TX.InvalidParameter,t);if(!(i[1]instanceof p.A||null===i[1]))throw new o.D$(n,o.TX.InvalidParameter,t);if(null===i[0]||null===i[1])return null;const c=i[0]instanceof f.A?h.A.fromExtent(i[0]):i[0],s=await(0,u.C)("getNearestCoordinate",[c.toJSON(),i[1].toJSON(),{calculateLeftRightSide:!0}]);return null===s?null:a.A.convertObjectToArcadeDictionary({coordinate:(0,g.rS)(s.coordinate),distance:s.distance,sideOfLine:0===s.distance?"straddle":s.rightSide?"right":"left"},(0,l.K)(n),!1,!0)}))},e.functions.nearestvertex=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,i)=>{if(i=(0,l.E)(i),(0,l.D)(i,2,2,n,t),!(i[0]instanceof w.A||null===i[0]))throw new o.D$(n,o.TX.InvalidParameter,t);if(!(i[1]instanceof p.A||null===i[1]))throw new o.D$(n,o.TX.InvalidParameter,t);if(null===i[0]||null===i[1])return null;const c=i[0]instanceof f.A?h.A.fromExtent(i[0]):i[0],s=await(0,u.C)("getNearestVertex",[c.toJSON(),i[1].toJSON()]);return null===s?null:a.A.convertObjectToArcadeDictionary({coordinate:(0,g.rS)(s.coordinate),distance:s.distance,sideOfLine:0===s.distance?"straddle":s.rightSide?"right":"left"},(0,l.K)(n),!1,!0)}))})}},71163:(e,n,t)=>{t.d(n,{C:()=>l});var r=t(29953);let a,o,i=!1;async function l(e,n){return i?o.apply("invokeGeometryOp",[e,n]):(await(a??=(0,r.ho)("arcadeGeometryOperatorsWorker").then((e=>{o=e,i=!0,a=void 0}))),l(e,n))}},80672:(e,n,t)=>{t.d(n,{R:()=>a});var r=t(20655);function a(e,n){return null===e?n:new r.A({url:e.field("url")})}}}]);