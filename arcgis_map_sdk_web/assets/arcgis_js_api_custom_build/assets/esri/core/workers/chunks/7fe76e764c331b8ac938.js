"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[5455],{78502:(e,t,n)=>{n.d(t,{Fq:()=>o,Yc:()=>a,Yq:()=>i});var r=n(5443);function a(e){if(null==e)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new r.A({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function i(e){if(null==e)return null;const t=e.clone();return void 0!==e.cache._geVersion&&(t.cache._geVersion=e.cache._geVersion),t}function o(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}},74639:(e,t,n)=>{n.d(t,{M:()=>l,s:()=>u});var r=n(44729),a=n(1262),i=n(55612),o=n(15032),s=n(96285);function u(e,t){const n=c[e.toLowerCase()];if(null==n)throw new a.L8(a.Z7.FunctionNotRecognized);if(t.length<n.minParams||t.length>n.maxParams)throw new a.L8(a.Z7.InvalidParameterCount,{name:e.toUpperCase()});return n.evaluate(t)}function l(e,t){const n=c[e.toLowerCase()];return null!=n&&t>=n.minParams&&t<=n.maxParams}const c={min:{minParams:1,maxParams:1,evaluate:e=>m(e[0],"min")},max:{minParams:1,maxParams:1,evaluate:e=>m(e[0],"max")},avg:{minParams:1,maxParams:1,evaluate:e=>d(e[0])},sum:{minParams:1,maxParams:1,evaluate:e=>function(e){if(null===e)return null;let t=0;for(let n=0;n<e.length;n++){const r=e[n];if(null!==r){if(!f(r))throw new a.L8(a.Z7.InvalidValueForAggregateFunction);t+=r}}return t}(e[0])},stddev:{minParams:1,maxParams:1,evaluate:e=>function(e){if(null===e)return null;const t=h(e);return null===t?null:Math.sqrt(t)}(e[0])},count:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0].length},var:{minParams:1,maxParams:1,evaluate:e=>h(e[0])}};function d(e){if(null===e)return null;let t=0,n=0;for(let r=0;r<e.length;r++){const i=e[r];if(null!==i){if(!f(i))throw new a.L8(a.Z7.InvalidValueForAggregateFunction);n++,t+=i}}return 0===n?null:t/e.length}function f(e){return"number"==typeof e}function m(e,t){if(null===e)return null;let n=null,a=null;for(const u of e){let e=u;e=r.n.isDateOnly(u)||o.k.isTimeOnly(u)?u.toNumber():s.c9.isDateTime(u)?u.toMillis():i.g.isTimestampOffset(u)?u.toMilliseconds():u,(null===n||"max"===t&&null!==a&&null!==e&&a<=e||"min"===t&&null!==a&&null!==e&&a>=e)&&(n=u,a=e)}return n}function h(e){if(null===e)return null;if(0===(e=e.filter((e=>null!==e))).length)return null;const t=d(e);if(null===t)return null;let n=0;for(const r of e){if(!f(r))throw new a.L8(a.Z7.InvalidValueForAggregateFunction);n+=(t-r)**2}return n/(e.length-1)}},44729:(e,t,n)=>{n.d(t,{n:()=>u});var r=n(66131),a=n(73444),i=n(96285);function o(e){e=e.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let t="";const n=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of e.match(n)||[])switch(r){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"X":case"x":t+=r;break;default:r.length>=2&&"["===r.slice(0,1)&&"]"===r.slice(-1)?t+=`'${r.slice(1,-1)}'`:t+=`'${r}'`}return t}const s="esri.core.sql.dateonly";class u{constructor(e,t,n){this._year=e,this._month=t,this._day=n,this.declaredRootClass=s}static isDateOnly(e){return"object"==typeof e&&null!=e&&"declaredRootClass"in e&&e.declaredRootClass===s}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(e){return u.isDateOnly(e)&&e.day===this.day&&e.month===this.month&&e.year===this.year}clone(){return new u(this._year,this._month,this._day)}toDateTime(e){return i.c9.fromObject({day:this.day,month:this.month,year:this.year},{zone:(0,r.mT)(e)})}toDateTimeLuxon(e){return i.c9.fromObject({day:this.day,month:this.month,year:this.year},{zone:(0,r.mT)(e)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(e=null,t=!0){if(null===e||""===e)return this.toString();if(t&&(e=o(e)),!e)return"";const n=this.toDateTime("unknown");return r.lY.dateTimeToArcadeDate(n).toFormat(e,{locale:(0,a.JK)(),numberingSystem:"latn"})}toArcadeDate(){const e=this.toDateTime("unknown");return r.lY.dateTimeToArcadeDate(e)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(e,t){return u.fromDateTime(this.toUTCDateTime().plus({[e]:t}))}toUTCDateTime(){return i.c9.utc(this.year,this.month,this.day,0,0,0,0)}difference(e,t){switch(t.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return"M"===t?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}static fromMilliseconds(e){const t=i.c9.fromMillis(e,{zone:i.mQ.utcInstance});return t.isValid?u.fromParts(t.year,t.month,t.day):null}static fromSeconds(e){const t=i.c9.fromSeconds(e,{zone:i.mQ.utcInstance});return t.isValid?u.fromParts(t.year,t.month,t.day):null}static fromReader(e){if(!e)return null;const t=e.split("-");return 3!==t.length?null:new u(parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10))}static fromParts(e,t,n){const r=new u(e,t,n);return!1===r.isValid?null:r}static fromDateJS(e){return u.fromParts(e.getFullYear(),e.getMonth()+1,e.getDay())}static fromDateTime(e){return u.fromParts(e.year,e.month,e.day)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,t=null){if(""===e)return null;if(null===e)return null;const n=[];if(t)(t=o(t))&&n.push(t);else if(null===t||""===t){const t=i.c9.fromISO(e,{setZone:!0});return t.isValid?u.fromParts(t.year,t.month,t.day):null}for(const r of n){const n=i.c9.fromFormat(e,t??r);if(n.isValid)return new u(n.year,n.month,n.day)}return null}static fromNow(e="system"){const t=i.c9.fromJSDate(new Date).setZone((0,r.mT)(e));return new u(t.year,t.month,t.day)}}},55612:(e,t,n)=>{n.d(t,{g:()=>o});var r=n(96285);function a(e){return Number.isNaN(e)||0===e?e:Math.trunc(e)}const i="esri.core.sql.SqlTimeStampOffset";class o{constructor(e){this._timeStampOffset=e,this.declaredRootClass=i,this._date=null}static isTimestampOffset(e){return"object"==typeof e&&null!=e&&"declaredRootClass"in e&&e.declaredRootClass===i}toDateTime(){return this._date??=r.c9.fromISO(this._timeStampOffset,{setZone:!0}),this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return a(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return a(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return o.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(e){return new o(r.c9.fromJSDate(e).toISO({includeOffset:!0}))}static fromDateTime(e){return new o(e.toISO({includeOffset:!0}))}static fromParts(e,t,n=0,r=0,a=0,i=0,s=0,u=!1,l=0,c=0){const d=`${e.toString().padStart(4,"0")}-${t.toString().padStart(2,"0")}-${n.toString().padStart(2,"0")}`;let f="";i<10&&(f="0");let m=`${r.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${f+i.toString()}`;0!==s&&(m+="."+s.toString().padStart(3,"0"));const h=`${u?"-":"+"}${l.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`;return new o(d+"T"+m+h)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let e=this.toDateTime().toSQL({includeOffset:!0,includeOffsetSpace:!0});return e&&(e=e.replace(".000","")),e}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(e){const t=this.toDateTime().plus(e);return o.fromDateTime(t)}}},15032:(e,t,n)=>{n.d(t,{k:()=>u});var r=n(78502),a=n(73444),i=n(96285);function o(e){if(!e)return"";const t=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let n="";for(const r of e.match(t)||[])switch(r){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":n+=r;break;case"A":case"a":n+="a";break;default:n+=`'${r}'`}return n}const s="esri.core.sql.timeonly";class u{constructor(e,t,n,r){this._hour=e,this._minute=t,this._second=n,this._millisecond=r,this.declaredRootClass=s}static isTimeOnly(e){return"object"==typeof e&&null!=e&&"declaredRootClass"in e&&e.declaredRootClass===s}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(e){return u.isTimeOnly(e)&&e.hour===this.hour&&e.minute===this.minute&&e.second===this.second&&e.millisecond===this.millisecond}clone(){return new u(this.hour,this.minute,this.second,this.millisecond)}isValid(){return(0,r.Fq)(this.hour)&&(0,r.Fq)(this.minute)&&(0,r.Fq)(this.second)&&(0,r.Fq)(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(e=null){return null===e||""===e?this.toString():(e=o(e))?i.c9.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(e,{locale:(0,a.JK)(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(e,t,n,r){const a=new u(e,t,n,r);return a.isValid()?a:null}static fromReader(e){if(!e)return null;const t=e.split(":");return 3!==t.length?null:new u(parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10),0)}static fromMilliseconds(e){if(e>864e5||e<0)return null;const t=Math.floor(e/1e3%60),n=Math.floor(e/6e4%60),r=Math.floor(e/36e5%24),a=Math.floor(e%1e3);return new u(r,n,t,a)}static fromDateJS(e){return new u(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}static fromDateTime(e){return new u(e.hour,e.minute,e.second,e.millisecond)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,t=null){if(""===e)return null;if(null===e)return null;const n=[];t?(t=o(t))&&n.push(t):null!==t&&""!==t||(n.push("HH:mm:ss"),n.push("HH:mm:ss.SSS"),n.push("hh:mm:ss a"),n.push("hh:mm:ss.SSS a"),n.push("HH:mm"),n.push("hh:mm a"),n.push("H:mm"),n.push("h:mm a"),n.push("H:mm:ss"),n.push("h:mm:ss a"),n.push("H:mm:ss.SSS"),n.push("h:mm:ss.SSS a"));for(const t of n){const n=i.c9.fromFormat(e,t);if(n.isValid)return new u(n.hour,n.minute,n.second,n.millisecond)}return null}plus(e,t){switch(e){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return u.fromDateTime(this.toUTCDateTime().plus({[e]:t}))}return null}toUTCDateTime(){return i.c9.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(e,t){switch(t.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return"M"===t?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}}},88368:(e,t,n)=>{n.d(t,{A:()=>ee});var r=n(44208),a=n(74639),i=n(44729),o=n(1262);function s(e){if(null!==e.precision||null!==e.secondary)throw new o.L8(o.Z7.PrimarySecondaryQualifiers)}function u(e,t){if(t.includes(".")){const n=t.split(".");e.second=parseFloat(n[0]),e.millis=parseInt(n[1],10)}else e.second=parseFloat(t)}const l="esri.core.sql.SqlInterval";class c{constructor(){this.declaredRootClass=l,this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static isInterval(e){return"object"==typeof e&&null!=e&&"declaredRootClass"in e&&e.declaredRootClass===l}static createFromMilliseconds(e){const t=new c;return t.second=e/1e3,t}static createFromValueAndQualifier(e,t,n){let r=null;const a=new c;if(a.op="-"===n?"-":"+","interval-period"===t.type){s(t);const n=new RegExp("^[0-9]{1,}$");if("year"===t.period||"month"===t.period)throw new o.L8(o.Z7.YearMonthIntervals);if("second"===t.period){if(!/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(e))throw new o.L8(o.Z7.IllegalInterval);u(a,e)}else{if(!n.test(e))throw new o.L8(o.Z7.IllegalInterval);a[t.period]=parseFloat(e)}}else{if(s(t.start),s(t.end),"year"===t.start.period||"month"===t.start.period||"year"===t.end.period||"month"===t.end.period)throw new o.L8(o.Z7.YearMonthIntervals);switch(t.start.period){case"day":switch(t.end.period){case"hour":if(r=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!r.test(e))throw new o.L8(o.Z7.IllegalInterval);a[t.start.period]=parseFloat(e.split(" ")[0]),a[t.end.period]=parseFloat(e.split(" ")[1]);break;case"minute":if(r=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!r.test(e))throw new o.L8(o.Z7.IllegalInterval);{a[t.start.period]=parseFloat(e.split(" ")[0]);const n=e.split(" ")[1].split(":");a.hour=parseFloat(n[0]),a.minute=parseFloat(n[1])}break;case"second":if(r=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!r.test(e))throw new o.L8(o.Z7.IllegalInterval);{a[t.start.period]=parseFloat(e.split(" ")[0]);const n=e.split(" ")[1].split(":");a.hour=parseFloat(n[0]),a.minute=parseFloat(n[1]),u(a,n[2])}break;default:throw new o.L8(o.Z7.IllegalInterval)}break;case"hour":switch(t.end.period){case"minute":if(r=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!r.test(e))throw new o.L8(o.Z7.IllegalInterval);a.hour=parseFloat(e.split(":")[0]),a.minute=parseFloat(e.split(":")[1]);break;case"second":if(r=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!r.test(e))throw new o.L8(o.Z7.IllegalInterval);{const t=e.split(":");a.hour=parseFloat(t[0]),a.minute=parseFloat(t[1]),u(a,t[2])}break;default:throw new o.L8(o.Z7.IllegalInterval)}break;case"minute":if("second"!==t.end.period)throw new o.L8(o.Z7.IllegalInterval);if(r=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!r.test(e))throw new o.L8(o.Z7.IllegalInterval);{const t=e.split(":");a.minute=parseFloat(t[0]),u(a,t[1])}break;default:throw new o.L8(o.Z7.IllegalInterval)}}return a}valueInMilliseconds(){return("-"===this.op?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}var d=n(55612),f=n(15032),m=n(3330),h=n(96285);const p=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,v=/^(\d{1,2}):(\d{1,2})$/,w=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,g=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,y=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,T=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,I=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,S=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function L(e,t){if(t instanceof h.bo)return t===m.GB.instance?h.c9.fromMillis(e.getTime(),{zone:m.GB.instance}):h.c9.fromJSDate(e,{zone:t});switch(t){case"system":case"local":case null:return h.c9.fromJSDate(e);default:return"unknown"===t?.toLowerCase()?h.c9.fromMillis(e.getTime(),{zone:m.GB.instance}):h.c9.fromJSDate(e,{zone:t})}}function N(e){return c.isInterval(e)}function O(e){return h.c9.isDateTime(e)}function C(e){return i.n.isDateOnly(e)}function Z(e){return f.k.isTimeOnly(e)}function D(e){return d.g.isTimestampOffset(e)}function F(e){let t=p.exec(e);if(null!==t){const[,e,n,r]=t,a=f.k.fromParts(parseInt(e,10),parseInt(n,10),parseInt(r,10),0);if(null!==a)return a;throw new o.L8(o.Z7.InvalidTime)}if(t=v.exec(e),null!==t){const[,e,n]=t,r=f.k.fromParts(parseInt(e,10),parseInt(n,10),0,0);if(null!==r)return r;throw new o.L8(o.Z7.InvalidTime)}if(t=w.exec(e),null!==t){const[,e,n,r,a]=t,i=f.k.fromParts(parseInt(e,10),parseInt(n,10),parseInt(r,10),parseInt(a,10));if(null!==i)return i;throw new o.L8(o.Z7.InvalidTime)}throw new o.L8(o.Z7.InvalidTime)}function M(e,t,n=!1){let r=y.exec(e);if(null!==r){const[,e,n,a,i,s,u,l]=r,c=h.c9.fromObject({year:parseInt(e,10),month:parseInt(n,10),day:parseInt(a,10),hour:parseInt(i,10),minute:parseInt(s,10),second:parseInt(u,10),millisecond:l?parseInt(l.replace(".",""),10):0},{zone:(0,m.Qo)(t)});if(!1===c.isValid)throw new o.L8(o.Z7.InvalidTimeStamp);return c}if(r=T.exec(e),null!==r){const[,e,t,n,a,i,s,u,l,c,f]=r,m=d.g.fromParts(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseInt(a,10),parseInt(i,10),parseInt(s,10),u?parseInt(u.replace(".",""),10):0,"-"===l,parseInt(c,10),parseInt(f,10));if(!1===m.isValid)throw new o.L8(o.Z7.InvalidTimeStamp);return m}if(r=I.exec(e),null!==r){const[,e,t,n,a,i,s,u,l]=r,c=d.g.fromParts(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseInt(a,10),parseInt(i,10),0,0,"-"===s,parseInt(u,10),parseInt(l,10));if(!1===c.isValid)throw new o.L8(o.Z7.InvalidTimeStamp);return c}if(r=S.exec(e),null!==r){const[,e,n,a,i,s]=r,u=h.c9.fromObject({year:parseInt(e,10),month:parseInt(n,10),day:parseInt(a,10),hour:parseInt(i,10),minute:parseInt(s,10),second:0},{zone:(0,m.Qo)(t)});if(!1===u.isValid)throw new o.L8(o.Z7.InvalidTimeStamp);return u}if(r=g.exec(e),null!==r){const[,e,n,a]=r,i=h.c9.fromObject({year:parseInt(e,10),month:parseInt(n,10),day:parseInt(a,10),hour:0,minute:0,second:0},{zone:(0,m.Qo)(t)});if(!1===i.isValid)throw new o.L8(o.Z7.InvalidTimeStamp);return i}throw new o.L8(o.Z7.InvalidTimeStamp)}function x(e,t){const n=g.exec(e);if(null===n)try{return M(e,t)}catch{throw new o.L8(o.Z7.InvalidDate)}const[,r,a,s]=n,u=i.n.fromParts(parseInt(r,10),parseInt(a,10),parseInt(s,10));if(null===u)throw new o.L8(o.Z7.InvalidDate);return u}var b=n(34727),E=n(799),A=n(54218);function _(e){return!!O(e)||!!D(e)}function P(e){return!!(O(e)||C(e)||D(e)||Z(e))}function U(e){if(O(e))return e.toMillis();if(C(e))return e.toNumber();if(D(e))return e.toMilliseconds();throw new o.L8(o.Z7.InvalidDataType)}function R(e,t,n,r){if(null==e||null==t)return null;if((0,A.Et)(e)){if((0,A.Et)(t))return $(e,t,n);if((0,A.Kg)(t))return function(e,t,n){const r=parseFloat(t);if(!isNaN(r))return $(e,r,n);const a=e.toString();switch(n){case"<>":return a!==t;case"=":return a===t;case">":return a>t;case"<":return a<t;case">=":return a>=t;case"<=":return a<=t}}(e,t,n);if(P(t))throw new o.L8(o.Z7.InvalidOperator);if(C(t))throw new o.L8(o.Z7.InvalidOperator)}else if((0,A.Kg)(e)){if((0,A.Et)(t))return function(e,t,n){const r=parseFloat(e);if(!isNaN(r))return $(r,t,n);const a=t.toString();switch(n){case"<>":return e!==a;case"=":return e===a;case">":return e>a;case"<":return e<a;case">=":return e>=a;case"<=":return e<=a}}(e,t,n);if((0,A.Kg)(t))return function(e,t,n){switch(n){case"<>":return e!==t;case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}}(e,t,n);if(O(t))throw new o.L8(o.Z7.InvalidOperator);if(C(t))throw new o.L8(o.Z7.InvalidOperator);if(Z(t))throw new o.L8(o.Z7.InvalidOperator);if(D(t))throw new o.L8(o.Z7.InvalidOperator)}else if(O(e)){if(_(t)){if((0,m.Y4)(e.zone)){if(h.c9.isDateTime(t)&&!(0,m.Y4)(t.zone))return k(e,t,n);if(d.g.isTimestampOffset(t))return k(e,t,n)}else if(h.c9.isDateTime(t)&&(0,m.Y4)(t.zone)){if(!(0,m.Y4)(e.zone))return k(e,t,n);if(d.g.isTimestampOffset(e))return k(e,t,n)}return $(U(e),U(t),n)}if((0,A.Kg)(t))throw new o.L8(o.Z7.InvalidOperator);if(C(t))return function(e,t,n){const r=t.toDateTimeLuxon(e.zone);return $((e=e.startOf("day")).toMillis(),r.toMillis(),n)}(e,t,n);if(Z(t))throw new o.L8(o.Z7.InvalidOperator);if((0,A.Et)(t))throw new o.L8(o.Z7.InvalidOperator)}else if(C(e)){if(D(t))return function(e,t,n){const r=e.toDateTimeLuxon(t.toDateTime().zone);return t=t.startOfDay(),$(r.toMillis(),t.toMilliseconds(),n)}(e,t,n);if(O(t))return function(e,t,n){const r=e.toDateTimeLuxon(t.zone);return t=t.startOf("day"),$(r.toMillis(),t.toMillis(),n)}(e,t,n);if((0,A.Kg)(t))throw new o.L8(o.Z7.InvalidOperator);if(C(t))return $(e.toNumber(),t.toNumber(),n);if(Z(t))throw new o.L8(o.Z7.InvalidOperator);if((0,A.Et)(t))throw new o.L8(o.Z7.InvalidOperator)}else if(Z(e)){if(Z(t))return $(e.toNumber(),t.toNumber(),n);if((0,A.Kg)(t))throw new o.L8(o.Z7.InvalidOperator);if((0,A.Et)(t))throw new o.L8(o.Z7.InvalidOperator);if(C(t))throw new o.L8(o.Z7.InvalidOperator);if(_(t))throw new o.L8(o.Z7.InvalidOperator)}else if(D(e)){if(_(t))return h.c9.isDateTime(t)&&(0,m.Y4)(t.zone)?k(e,t,n):$(U(e),U(t),n);if((0,A.Kg)(t))throw new o.L8(o.Z7.InvalidOperator);if(C(t))return function(e,t,n){const r=t.toDateTimeLuxon(e.toDateTime().zone);return $((e=e.startOfDay()).toMilliseconds(),r.toMillis(),n)}(e,t,n);if(Z(t))throw new o.L8(o.Z7.InvalidOperator);if((0,A.Et)(t))throw new o.L8(o.Z7.InvalidOperator)}switch(n){case"<>":return e!==t;case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}}function $(e,t,n){switch(n){case"<>":return e!==t;case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}}function k(e,t,n){d.g.isTimestampOffset(e)&&(e=e.toDateTime()),d.g.isTimestampOffset(t)&&(t=t.toDateTime());const r=V(e),a=V(t);switch(n){case"<>":return r!==a;case"=":return r===a;case">":return r>a;case"<":return r<a;case">=":return r>=a;case"<=":return r<=a}}function V(e){return 321408e5*e.year+26784e5*e.month+864e5*e.day+36e5*e.hour+6e4*e.minute+1e3*e.second+e.millisecond}function J(e,t,n){const r=Y[e.toLowerCase()];if(null==r)throw new o.L8(o.Z7.FunctionNotRecognized);if(t.length<r.minParams||t.length>r.maxParams)throw new o.L8(o.Z7.InvalidParameterCount,{name:e.toUpperCase()});return r.evaluate(t,n)}function z(e){return!((0,A.$P)(e)||C(e)||O(e)||Z(e)||D(e))}function H(e){return C(e)||Z(e)?e.toString():D(e)?e.toSQLValue():O(e)?0===e.millisecond?e.toFormat("yyyy-LL-dd HH:mm:ss"):e.toSQL({includeOffset:!1}):(0,A.$P)(e)?H(h.c9.fromJSDate(e)):e.toString()}const Y={extract:{minParams:2,maxParams:2,evaluate:([e,t])=>{if(null==t)return null;if((0,A.$P)(t))switch(e.toUpperCase()){case"SECOND":return t.getSeconds();case"MINUTE":return t.getMinutes();case"HOUR":return t.getHours();case"DAY":return t.getDate();case"MONTH":return t.getMonth()+1;case"YEAR":return t.getFullYear();case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":return 0}else if(O(t))switch(e.toUpperCase()){case"SECOND":return t.second;case"MINUTE":return t.minute;case"HOUR":return t.hour;case"DAY":return t.day;case"MONTH":return t.month;case"YEAR":return t.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new o.L8(o.Z7.InvalidFunctionParameters,{function:"EXTRACT"})}else if(C(t))switch(e.toUpperCase()){case"DAY":return t.day;case"MONTH":return t.month;case"YEAR":return t.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new o.L8(o.Z7.InvalidFunctionParameters,{function:"EXTRACT"})}else if(Z(t))switch(e.toUpperCase()){case"SECOND":return t.second;case"MINUTE":return t.minute;case"HOUR":return t.hour}else if(D(t))switch(e.toUpperCase()){case"SECOND":return t.second;case"MINUTE":return t.minute;case"HOUR":return t.hour;case"DAY":return t.day;case"MONTH":return t.month;case"YEAR":return t.year;case"TIMEZONE_HOUR":return t.timezoneOffsetHour;case"TIMEZONE_MINUTE":return t.timezoneOffsetMinutes}throw new o.L8(o.Z7.InvalidFunctionParameters,{function:"EXTRACT"})}},substring:{minParams:2,maxParams:3,evaluate:e=>{if(2===e.length){const[t,n]=e;return null==t||null==n?null:t.toString().substring(n-1)}if(3===e.length){const[t,n,r]=e;return null==t||null==n||null==r?null:r<=0?"":t.toString().substring(n-1,n+r-1)}}},position:{minParams:2,maxParams:2,evaluate:([e,t])=>null==e||null==t?null:t.indexOf(e)+1},trim:{minParams:2,maxParams:3,evaluate:e=>{const t=3===e.length,n=t?e[1]:" ",r=t?e[2]:e[1];if(null==n||null==r)return null;const a=`(${(0,E.Cj)(n)})`;switch(e[0]){case"BOTH":return r.replaceAll(new RegExp(`^${a}*|${a}*$`,"g"),"");case"LEADING":return r.replaceAll(new RegExp(`^${a}*`,"g"),"");case"TRAILING":return r.replaceAll(new RegExp(`${a}*$`,"g"),"")}throw new o.L8(o.Z7.InvalidFunctionParameters,{function:"TRIM"})}},abs:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.abs(e[0])},ceiling:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.ceil(e[0])},floor:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.floor(e[0])},log:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.log(e[0])},log10:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.log(e[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.sin(e[0])},cos:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.cos(e[0])},tan:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.tan(e[0])},asin:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.asin(e[0])},acos:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.acos(e[0])},atan:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.atan(e[0])},sign:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0]>0?1:e[0]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:e=>null==e[0]||null==e[1]?null:e[0]**e[1]},mod:{minParams:2,maxParams:2,evaluate:e=>null==e[0]||null==e[1]?null:e[0]%e[1]},round:{minParams:1,maxParams:2,evaluate:e=>{const t=e[0],n=2===e.length?10**e[1]:1;return null==t?null:Math.round(t*n)/n}},truncate:{minParams:1,maxParams:2,evaluate:e=>null==e[0]?null:1===e.length||0===e[1]?Math.trunc(e[0]):(0,b.pF)("trunc",e[0],-Number(e[1]))},char_length:{minParams:1,maxParams:1,evaluate:e=>(0,A.Kg)(e[0])?e[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:e=>{let t="";for(let n=0;n<e.length;n++){if(null==e[n])return null;t+=e[n].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:e=>{for(const t of e)if(null!==t)return t;return null}},cosh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.cosh(e[0])},sinh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.sinh(e[0])},tanh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.tanh(e[0])},nullif:{minParams:2,maxParams:2,evaluate:(e,t)=>R(e[0],e[1],"=")?null:e[0]},cast:{minParams:2,maxParams:2,evaluate:(e,t)=>{const n=e[0],r=e[1];if(null===n)return null;switch(r.type){case"integer":{if(!z(n))throw new o.L8(o.Z7.CannotCastValue);const e=parseInt(n,10);if(isNaN(e))throw new o.L8(o.Z7.CannotCastValue);return e}case"smallint":{if(!z(n))throw new o.L8(o.Z7.CannotCastValue);const e=parseInt(n,10);if(isNaN(e))throw new o.L8(o.Z7.CannotCastValue);if(e>32767||e<-32767)throw new o.L8(o.Z7.CannotCastValue);return e}case"float":case"real":{if(!z(n))throw new o.L8(o.Z7.CannotCastValue);const e=parseFloat(n);if(isNaN(e))throw new o.L8(o.Z7.CannotCastValue);return e}case"time":return function(e){if((0,A.$P)(e))return f.k.fromDateJS(e);if(O(e))return f.k.fromDateTime(e);if(C(e))throw new o.L8(o.Z7.CannotCastValue);if(Z(e))return e;if(D(e))return f.k.fromSqlTimeStampOffset(e);if((0,A.Kg)(e))return F(e);throw new o.L8(o.Z7.CannotCastValue)}(n);case"date":return function(e){if((0,A.$P)(e))return i.n.fromDateJS(e);if(O(e))return i.n.fromParts(e.year,e.month,e.day);if(C(e))return e;if(Z(e))throw new o.L8(o.Z7.CannotCastValue);if(D(e)&&null===i.n.fromParts(e.year,e.month,e.day))throw new o.L8(o.Z7.CannotCastValue);if((0,A.Kg)(e)){const t=i.n.fromReader(e);if(null!==t&&t.isValid)return t}throw new o.L8(o.Z7.CannotCastValue)}(n);case"timestamp":return function(e,t,n){if((0,A.$P)(e))return L(e,t);if(O(e))return e;if(C(e))return e.toDateTimeLuxon("unknown");if(Z(e))throw new o.L8(o.Z7.CannotCastValue);if(D(e))return e;if((0,A.Kg)(e))return M(e,"unknown",n);throw new o.L8(o.Z7.CannotCastValue)}(n,t,!0===r.withtimezone);case"varchar":{const e=H(n);if(e.length>r.size)throw new o.L8(o.Z7.CannotCastValue);return e}default:throw new o.L8(o.Z7.InvalidDataType)}}}};function q(e,t,n,r){if("||"===e)return J("concat",[t,n],r);if(null===t||null===n)return null;if((0,A.Et)(t)){if((0,A.Et)(n))return K(t,n,e);if(N(n))return function(e,t,n){switch(n){case"+":return c.createFromMilliseconds(e+t.valueInMilliseconds());case"-":return c.createFromMilliseconds(e-t.valueInMilliseconds());case"*":return c.createFromMilliseconds(e*t.valueInMilliseconds());case"/":return c.createFromMilliseconds(e/t.valueInMilliseconds())}throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if(Z(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();if(C(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();if(D(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();if(O(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();if((0,A.Kg)(n))return function(e,t,n){const r=parseFloat(t);if(isNaN(r))throw new o.L8(o.Z7.InvalidOperator);return K(e,r,n)}(t,n,e);throw new o.L8(o.Z7.InvalidOperator)}if(C(t)){if((0,A.Et)(n))return function(e,t,n){const r=1e3*t*24*60*60;switch(n){case"+":return e.plus("milliseconds",r);case"-":return e.plus("milliseconds",-1*r)}throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if(N(n))return function(e,t,n){switch(n){case"+":return e.plus("milliseconds",t.valueInMilliseconds());case"-":return e.plus("milliseconds",-1*t.valueInMilliseconds())}throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if(Z(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();if(C(n))return function(e,t,n){if("-"===n)return e.toDateTimeLuxon("UTC").diff(t.toDateTimeLuxon("UTC")).as("days");throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if(D(n))return function(e,t,n){if("-"===n)return e.toDateTimeLuxon(t.toDateTime().zone).diff(t.toDateTime()).as("days");throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if(O(n))return function(e,t,n){if("-"===n)return e.toDateTimeLuxon(t.zone).diff(t).as("days");throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if((0,A.Kg)(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();throw new o.L8(o.Z7.InvalidOperator)}if(Z(t)){if((0,A.Et)(n))return function(e,t,n){const r=1e3*t*24*60*60;switch(n){case"+":return e.plus("milliseconds",r);case"-":return e.plus("milliseconds",-1*r)}throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if(N(n))return function(e,t,n){switch(n){case"+":return e.plus("milliseconds",t.valueInMilliseconds());case"-":return e.plus("milliseconds",-1*t.valueInMilliseconds())}throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if(Z(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();if(C(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();if(D(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();if(O(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();if((0,A.Kg)(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();throw new o.L8(o.Z7.InvalidOperator)}if(N(t)){if((0,A.Et)(n))return function(e,t,n){switch(n){case"+":return c.createFromMilliseconds(e.valueInMilliseconds()+t);case"-":return c.createFromMilliseconds(e.valueInMilliseconds()-t);case"*":return c.createFromMilliseconds(e.valueInMilliseconds()*t);case"/":return c.createFromMilliseconds(e.valueInMilliseconds()/t)}throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if(N(n))return function(e,t,n){switch(n){case"+":return c.createFromMilliseconds(e.valueInMilliseconds()+t.valueInMilliseconds());case"-":return c.createFromMilliseconds(e.valueInMilliseconds()-t.valueInMilliseconds());case"*":return c.createFromMilliseconds(e.valueInMilliseconds()*t.valueInMilliseconds());case"/":return c.createFromMilliseconds(e.valueInMilliseconds()/t.valueInMilliseconds())}throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if(Z(n))return function(e,t,n){if("+"===n)return t.plus("milliseconds",e.valueInMilliseconds());throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if(C(n))return function(e,t,n){if("+"===n)return t.plus("milliseconds",e.valueInMilliseconds());throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if(D(n))return function(e,t,n){if("+"===n)return t.addMilliseconds(e.valueInMilliseconds());throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if(O(n))return function(e,t,n){switch(n){case"+":return t.plus({milliseconds:e.valueInMilliseconds()});case"-":return e.valueInMilliseconds()-t.toMillis()}throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if((0,A.Kg)(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();throw new o.L8(o.Z7.InvalidOperator)}if(O(t)){if((0,A.Et)(n))return function(e,t,n){const r=1e3*t*24*60*60;switch(n){case"+":return e.plus({milliseconds:r});case"-":return e.minus({milliseconds:r})}throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if(N(n))return function(e,t,n){switch(n){case"+":return e.plus({milliseconds:t.valueInMilliseconds()});case"-":return e.minus({milliseconds:t.valueInMilliseconds()})}throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if(Z(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();if(C(n))return function(e,t,n){if("-"===n)return e.diff(t.toDateTimeLuxon(e.zone)).as("days");throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if(D(n))return function(e,t,n){if("-"===n)return e.diff(t.toDateTime()).as("days");throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if(O(n))return function(e,t,n){if("-"===n)return e.diff(t).as("days");throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if((0,A.Kg)(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();throw new o.L8(o.Z7.InvalidOperator)}if(D(t)){if((0,A.Et)(n))return function(e,t,n){const r=1e3*t*24*60*60;switch(n){case"+":return e.addMilliseconds(r);case"-":return e.addMilliseconds(-1*r)}throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if(N(n))return function(e,t,n){switch(n){case"+":return e.addMilliseconds(t.valueInMilliseconds());case"-":return e.addMilliseconds(-1*t.valueInMilliseconds())}throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if(Z(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();if(C(n))return function(e,t,n){if("-"===n)return e.toDateTime().diff(t.toDateTimeLuxon(e.toDateTime().zone)).as("days");throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if(D(n))return function(e,t,n){if("-"===n)return e.toDateTime().diff(t.toDateTime()).as("days");throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if(O(n))return function(e,t,n){if("-"===n)return e.toDateTime().diff(t).as("days");throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);if((0,A.Kg)(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();throw new o.L8(o.Z7.InvalidOperator)}if((0,A.Kg)(t)){if((0,A.Et)(n))return function(e,t,n){const r=parseFloat(e);if(isNaN(r))throw new o.L8(o.Z7.InvalidOperator);return K(r,t,n)}(t,n,e);if(N(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();if(Z(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();if(C(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();if(D(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();if(O(n))return function(){throw new o.L8(o.Z7.InvalidOperator)}();if((0,A.Kg)(n))return function(e,t,n){if("+"===n)return e+t;throw new o.L8(o.Z7.InvalidOperator)}(t,n,e);throw new o.L8(o.Z7.InvalidOperator)}throw new o.L8(o.Z7.InvalidOperator)}function K(e,t,n){switch(n){case"+":return e+t;case"-":return e-t;case"*":return e*t;case"/":return e/t}throw new o.L8(o.Z7.InvalidOperator)}function Q(e,t,n,r){var a=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(a,Q.prototype),a.expected=t,a.found=n,a.location=r,a.name="SyntaxError",a}function B(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,e+(n+=n.repeat(t)).slice(0,t))}(function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n})(Q,Error),Q.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n,r=null;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){r=e[n].text.split(/\r\n|\n|\r/g);break}var a=this.location.start,i=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(a):a,o=this.location.source+":"+i.line+":"+i.column;if(r){var s=this.location.end,u=B("",i.line.toString().length," "),l=r[a.line-1],c=(a.line===s.line?s.column:l.length+1)-a.column||1;t+="\n --\x3e "+o+"\n"+u+" |\n"+i.line+" | "+l+"\n"+u+" | "+B("",a.column-1," ")+B("",c,"^")}else t+="\n at "+o}return t},Q.buildMessage=function(e,t){var n={literal:function(e){return'"'+a(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?i(e[0])+"-"+i(e[1]):i(e)}));return"["+(e.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function a(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function o(e){return n[e.type](e)}return"Expected "+function(e){var t,n,r=e.map(o);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+function(e){return e?'"'+a(e)+'"':"end of input"}(t)+" found."};class j{static parse(e){return function(e,t){var n,r={},a=(t=void 0!==t?t:{}).grammarSource,i={start:ot},o=ot,s="''",u=/^[<-=]/,l=/^[+\-]/,c=/^[*\/]/,d=/^[A-Za-z_\x80-\uFFFF]/,f=/^[A-Za-z0-9_]/,m=/^[A-Za-z0-9_.\x80-\uFFFF]/,h=/^["]/,p=/^[^']/,v=/^[0-9]/,w=/^[eE]/,g=/^[ \t\n\r]/,y=/^[^`]/,T=tt("!",!1),I=tt("=",!1),S=tt(">=",!1),L=tt(">",!1),N=tt("<=",!1),O=tt("<>",!1),C=nt([["<","="]],!1,!1),Z=tt("!=",!1),D=nt(["+","-"],!1,!1),F=tt("||",!1),M=nt(["*","/"],!1,!1),x=nt([["A","Z"],["a","z"],"_",["","￿"]],!1,!1),b=nt([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),E=nt([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1),A=nt(['"'],!1,!1),_=tt("@",!1),P=tt("'",!1),U=tt("N'",!1),R=tt("''",!1),$=nt(["'"],!0,!1),k=tt(".",!1),V=nt([["0","9"]],!1,!1),J=nt(["e","E"],!1,!1),z=tt("NULL",!0),H=tt("TRUE",!0),Y=tt("FALSE",!0),q=tt("IN",!0),K=tt("IS",!0),B=tt("LIKE",!0),j=tt("ESCAPE",!0),G=tt("NOT",!0),W=tt("AND",!0),X=tt("OR",!0),ee=tt("BETWEEN",!0),te=tt("FROM",!0),ne=tt("FOR",!0),re=tt("SUBSTRING",!0),ae=tt("EXTRACT",!0),ie=tt("TRIM",!0),oe=tt("POSITION",!0),se=tt("TIMESTAMP",!0),ue=tt("DATE",!0),le=tt("TIME",!0),ce=tt("LEADING",!0),de=tt("TRAILING",!0),fe=tt("BOTH",!0),me=tt("CAST",!0),he=tt("AS",!0),pe=tt("INTEGER",!0),ve=tt("INT",!0),we=tt("SMALLINT",!0),ge=tt("FLOAT",!0),ye=tt("REAL",!0),Te=tt("VARCHAR",!0),Ie=tt("TO",!0),Se=tt("INTERVAL",!0),Le=tt("YEAR",!0),Ne=tt("TIMEZONE_HOUR",!0),Oe=tt("TIMEZONE_MINUTE",!0),Ce=tt("MONTH",!0),Ze=tt("DAY",!0),De=tt("HOUR",!0),Fe=tt("MINUTE",!0),Me=tt("SECOND",!0),xe=tt("CASE",!0),be=tt("END",!0),Ee=tt("WHEN",!0),Ae=tt("THEN",!0),_e=tt("ELSE",!0),Pe=tt(",",!1),Ue=tt("(",!1),Re=tt(")",!1),$e=nt([" ","\t","\n","\r"],!1,!1),ke=tt("`",!1),Ve=nt(["`"],!0,!1),Je=function(e,t,n){return{op:t,expr:n,location:Xe()}},ze=function(e,t,n){return{op:t,expr:n,location:Xe()}},He=function(e,t){return{op:e,expr:t,location:Xe()}},Ye=function(e,t,n){return{op:t,expr:n,location:Xe()}},qe=function(e,t,n){return{op:t,expr:n,location:Xe()}},Ke=0|t.peg$currPos,Qe=Ke,Be=[{line:1,column:1}],je=Ke,Ge=t.peg$maxFailExpected||[],We=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in i))throw new Error("Can't start parsing from rule \""+t.startRule+'".');o=i[t.startRule]}function Xe(){return at(Qe,Ke)}function et(e,t){throw function(e,t){return new Q(e,null,null,t)}(e,t=void 0!==t?t:at(Qe,Ke))}function tt(e,t){return{type:"literal",text:e,ignoreCase:t}}function nt(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function rt(t){var n,r=Be[t];if(r)return r;if(t>=Be.length)n=Be.length-1;else for(n=t;!Be[--n];);for(r={line:(r=Be[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return Be[t]=r,r}function at(e,t,n){var r=rt(e),i=rt(t);return{source:a,start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:i.line,column:i.column}}}function it(e){Ke<je||(Ke>je&&(je=Ke,Ge=[]),Ge.push(e))}function ot(){var e,t;return e=Ke,Jn(),(t=ut())!==r?(Jn(),Qe=e,e=t):(Ke=e,e=r),e}function st(){var e,t,n,a,i,o;if(e=Ke,kn()!==r){for(Jn(),t=[],n=ut();n!==r;)t.push(n),n=Ke,a=Ke,i=Jn(),(o=$n())!==r?a=i=[i,o,Jn()]:(Ke=a,a=r),a!==r&&(a=ut())===r?(Ke=n,n=r):n=a;n=Jn(),(a=Vn())!==r?(Qe=e,e=function(e){return{type:"expression-list",location:Xe(),value:e}}(t)):(Ke=e,e=r)}else Ke=e,e=r;return e}function ut(){var e,t,n,a,i,o;if(e=Ke,(t=lt())!==r){for(n=[],a=Ke,Jn(),(i=tn())!==r?(Jn(),(o=lt())!==r?(Qe=a,a=Je(0,i,o)):(Ke=a,a=r)):(Ke=a,a=r);a!==r;)n.push(a),a=Ke,Jn(),(i=tn())!==r?(Jn(),(o=lt())!==r?(Qe=a,a=Je(0,i,o)):(Ke=a,a=r)):(Ke=a,a=r);Qe=e,e=function(e,t){return Kn(e,t)}(t,n)}else Ke=e,e=r;return e}function lt(){var e,t,n,a,i,o;if(e=Ke,(t=ct())!==r){for(n=[],a=Ke,Jn(),(i=en())!==r?(Jn(),(o=ct())!==r?(Qe=a,a=ze(0,i,o)):(Ke=a,a=r)):(Ke=a,a=r);a!==r;)n.push(a),a=Ke,Jn(),(i=en())!==r?(Jn(),(o=ct())!==r?(Qe=a,a=ze(0,i,o)):(Ke=a,a=r)):(Ke=a,a=r);Qe=e,e=function(e,t){return Kn(e,t)}(t,n)}else Ke=e,e=r;return e}function ct(){var t,n,a,i,o;return t=Ke,(n=Xt())===r&&(n=Ke,33===e.charCodeAt(Ke)?(a="!",Ke++):(a=r,0===We&&it(T)),a!==r?(i=Ke,We++,61===e.charCodeAt(Ke)?(o="=",Ke++):(o=r,0===We&&it(I)),We--,o===r?i=void 0:(Ke=i,i=r),i!==r?n=a=[a,i]:(Ke=n,n=r)):(Ke=n,n=r)),n!==r?(a=Jn(),(i=ct())!==r?(Qe=t,t=function(e){return function(e,t,n){return{type:"unary-expression",location:n,operator:"NOT",expr:t}}(0,e,Xe())}(i)):(Ke=t,t=r)):(Ke=t,t=r),t===r&&(t=function(){var e,t,n,a;return e=Ke,(t=ht())!==r?(n=Ke,Jn(),(a=function(){var e;return(e=function(){var e,t,n,a,i;if(e=Ke,t=[],n=Ke,Jn(),(a=dt())!==r?(Jn(),(i=ht())!==r?(Qe=n,n=He(a,i)):(Ke=n,n=r)):(Ke=n,n=r),n!==r)for(;n!==r;)t.push(n),n=Ke,Jn(),(a=dt())!==r?(Jn(),(i=ht())!==r?(Qe=n,n=He(a,i)):(Ke=n,n=r)):(Ke=n,n=r);else t=r;return t!==r&&(Qe=e,t=function(e){return{type:"arithmetic",tail:e}}(t)),t}())===r&&(e=function(){var e,t,n;return e=Ke,(t=mt())!==r?(Jn(),(n=st())!==r?(Qe=e,e=function(e,t){return{op:e,right:t}}(t,n)):(Ke=e,e=r)):(Ke=e,e=r),e===r&&(e=Ke,(t=mt())!==r?(Jn(),(n=Ct())!==r?(Qe=e,e=function(e,t){return{op:e,right:t}}(t,n)):(Ke=e,e=r)):(Ke=e,e=r)),e}())===r&&(e=function(){var e,t,n,a,i,o,s,u;return e=Ke,(t=Xt())!==r?(Jn(),(n=nn())!==r?(a=Jn(),i=Ke,(o=ht())!==r?(Jn(),(s=en())!==r?(Jn(),(u=ht())!==r?(Qe=i,i=function(e,t,n){return qn(Xe(),t,n)}(0,o,u)):(Ke=i,i=r)):(Ke=i,i=r)):(Ke=i,i=r),i!==r?(Qe=e,e=function(e,t){return{op:"NOT"+e,right:t}}(n,i)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r),e===r&&(e=Ke,(t=nn())!==r?(Jn(),n=Ke,(a=ht())!==r?(i=Jn(),(o=en())!==r?(Jn(),(s=ht())!==r?(Qe=n,n=function(e,t,n){return qn(Xe(),t,n)}(0,a,s)):(Ke=n,n=r)):(Ke=n,n=r)):(Ke=n,n=r),n!==r?(Qe=e,e=function(e,t){return{op:e,right:t}}(t,n)):(Ke=e,e=r)):(Ke=e,e=r)),e}())===r&&(e=function(){var e,t,n,a;return e=Ke,(t=jt())!==r?(Jn(),(n=Xt())!==r?(Jn(),(a=ht())!==r?(Qe=e,e=function(e,t){return{op:e+"NOT",right:t}}(t,a)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r),e===r&&(e=Ke,(t=jt())!==r?(Jn(),(n=ht())!==r?(Qe=e,e=function(e,t){return{op:e,right:t}}(t,n)):(Ke=e,e=r)):(Ke=e,e=r)),e}())===r&&(e=function(){var e,t,n,a;return e=Ke,(t=ft())!==r?(Jn(),(n=_t())!==r?(Jn(),Wt()!==r?(Jn(),(a=Pt())!==r?(Qe=e,e=function(e,t,n){return{op:e,right:t,escape:n.value}}(t,n,a)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r),e===r&&(e=Ke,(t=ft())!==r?(Jn(),(n=_t())!==r?(Qe=e,e=function(e,t){return{op:e,right:t,escape:""}}(t,n)):(Ke=e,e=r)):(Ke=e,e=r)),e}()),e}())!==r?n=a:(Ke=n,n=r),n===r&&(n=null),Qe=e,e=function(e,t){return""==t||null==t||null==t?e:"arithmetic"==t.type?Kn(e,t.tail):Yn(t.op,e,t.right,t.escape,Xe())}(t,n)):(Ke=e,e=r),e}()),t}function dt(){var t;return">="===e.substr(Ke,2)?(t=">=",Ke+=2):(t=r,0===We&&it(S)),t===r&&(62===e.charCodeAt(Ke)?(t=">",Ke++):(t=r,0===We&&it(L)),t===r&&("<="===e.substr(Ke,2)?(t="<=",Ke+=2):(t=r,0===We&&it(N)),t===r&&("<>"===e.substr(Ke,2)?(t="<>",Ke+=2):(t=r,0===We&&it(O)),t===r&&(t=e.charAt(Ke),u.test(t)?Ke++:(t=r,0===We&&it(C)),t===r&&("!="===e.substr(Ke,2)?(t="!=",Ke+=2):(t=r,0===We&&it(Z))))))),t}function ft(){var e,t,n,a,i;return e=Ke,t=Ke,(n=Xt())!==r?(a=Jn(),(i=Gt())!==r?t=n=[n,a,i]:(Ke=t,t=r)):(Ke=t,t=r),t!==r&&(Qe=e,t=function(e){return e[0]+" "+e[2]}(t)),(e=t)===r&&(e=Gt()),e}function mt(){var e,t,n,a,i;return e=Ke,t=Ke,(n=Xt())!==r?(a=Jn(),(i=Bt())!==r?t=n=[n,a,i]:(Ke=t,t=r)):(Ke=t,t=r),t!==r&&(Qe=e,t=function(e){return e[0]+" "+e[2]}(t)),(e=t)===r&&(e=Bt()),e}function ht(){var e,t,n,a,i,o;if(e=Ke,(t=vt())!==r){for(n=[],a=Ke,Jn(),(i=pt())!==r?(Jn(),(o=vt())!==r?(Qe=a,a=Ye(0,i,o)):(Ke=a,a=r)):(Ke=a,a=r);a!==r;)n.push(a),a=Ke,Jn(),(i=pt())!==r?(Jn(),(o=vt())!==r?(Qe=a,a=Ye(0,i,o)):(Ke=a,a=r)):(Ke=a,a=r);Qe=e,e=function(e,t){return Kn(e,t)}(t,n)}else Ke=e,e=r;return e}function pt(){var t;return t=e.charAt(Ke),l.test(t)?Ke++:(t=r,0===We&&it(D)),t===r&&("||"===e.substr(Ke,2)?(t="||",Ke+=2):(t=r,0===We&&it(F))),t}function vt(){var e,t,n,a,i,o;if(e=Ke,(t=gt())!==r){for(n=[],a=Ke,Jn(),(i=wt())!==r?(Jn(),(o=gt())!==r?(Qe=a,a=qe(0,i,o)):(Ke=a,a=r)):(Ke=a,a=r);a!==r;)n.push(a),a=Ke,Jn(),(i=wt())!==r?(Jn(),(o=gt())!==r?(Qe=a,a=qe(0,i,o)):(Ke=a,a=r)):(Ke=a,a=r);Qe=e,e=function(e,t){return Kn(e,t)}(t,n)}else Ke=e,e=r;return e}function wt(){var t;return t=e.charAt(Ke),c.test(t)?Ke++:(t=r,0===We&&it(M)),t}function gt(){var e,t;return(e=function(){var e;return(e=Pt())===r&&(e=function(){var e,t,n,a;return e=Ke,(t=function(){var e,t,n,a;return e=Ke,(t=kt())!==r&&(n=Vt())!==r&&(a=Jt())!==r?(Qe=e,e=function(e,t,n){return parseFloat(e+t+n)}(t,n,a)):(Ke=e,e=r),e===r&&(e=Ke,(t=kt())!==r&&(n=Vt())!==r?(Qe=e,e=function(e,t){return parseFloat(e+t)}(t,n)):(Ke=e,e=r),e===r&&(e=Ke,(t=kt())!==r&&(n=Jt())!==r?(Qe=e,e=function(e,t){return parseFloat(e+t)}(t,n)):(Ke=e,e=r),e===r&&(e=Ke,(t=kt())!==r&&(Qe=e,t=function(e){return parseFloat(e)}(t)),e=t))),e}())!==r?(n=Ke,We++,a=Tt(),We--,a===r?n=void 0:(Ke=n,n=r),n!==r?(Qe=e,e=function(e){return{type:"number",location:Xe(),value:e}}(t)):(Ke=e,e=r)):(Ke=e,e=r),e}())===r&&(e=function(){var e,t;return e=Ke,(t=Kt())!==r&&(Qe=e,t={type:"boolean",location:Xe(),value:!0}),(e=t)===r&&(e=Ke,(t=Qt())!==r&&(Qe=e,t={type:"boolean",location:Xe(),value:!1}),e=t),e}())===r&&(e=function(){var e,t;return e=Ke,(t=qt())!==r&&(Qe=e,t={type:"null",location:Xe(),value:null}),t}())===r&&(e=function(){var e,t;return e=Ke,dn()!==r?(Jn(),(t=_t())!==r?(Qe=e,e=function(e){return"string"===e.type&&function(e){!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)&&et("Date literal is invalid")}(e.value),{type:"date",location:Xe(),value:e.value}}(t)):(Ke=e,e=r)):(Ke=e,e=r),e}())===r&&(e=function(){var e,t;return e=Ke,cn()!==r?(Jn(),(t=_t())!==r?(Qe=e,e=function(e){return"string"===e.type&&function(e){!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)&&et("Timestamp literal is invalid")}(e.value),{type:"timestamp",location:Xe(),value:e.value}}(t)):(Ke=e,e=r)):(Ke=e,e=r),e}())===r&&(e=Mt())===r&&(e=function(){var e,t;return e=Ke,fn()!==r?(Jn(),(t=_t())!==r?(Qe=e,e=function(e){return"string"===e.type&&function(e){!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(e)&&et("Time literal is invalid")}(e.value),{type:"time",location:Xe(),value:e.value}}(t)):(Ke=e,e=r)):(Ke=e,e=r),e}()),e}())===r&&(e=function(){var e,t,n,a;return e=Ke,sn()!==r?(Jn(),t=Ke,kn()!==r?(Jn(),(n=Ft())!==r?(Jn(),rn()!==r?(Jn(),(a=ut())!==r?(Jn(),Vn()!==r?(Qe=t,t=function(e,t){return qn(Xe(),e,t)}(n,a)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r),t===r&&(t=Ke,kn()!==r?(Jn(),(n=Ft())!==r?(Jn(),$n()!==r?(Jn(),(a=ut())!==r?(Jn(),Vn()!==r?(Qe=t,t=function(e,t){return qn(Xe(),e,t)}(n,a)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)),t!==r?(Qe=e,e=function(e){return{type:"function",location:Xe(),name:"extract",args:e}}(t)):(Ke=e,e=r)):(Ke=e,e=r),e}())===r&&(e=function(){var e,t,n,a,i,o,s;return e=Ke,on()!==r?(Jn(),t=Ke,kn()!==r?(Jn(),(n=ut())!==r?(Jn(),rn()!==r?(Jn(),(a=ut())!==r?(Jn(),i=Ke,an()!==r?(o=Jn(),(s=ut())!==r?(Jn(),i=s):(Ke=i,i=r)):(Ke=i,i=r),i===r&&(i=null),Vn()!==r?(Qe=t,t=function(e,t,n){return qn(Xe(),e,t,...n?[n]:[])}(n,a,i)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r),t===r&&(t=Ke,kn()!==r?(Jn(),(n=ut())!==r?(Jn(),$n()!==r?(Jn(),(a=ut())!==r?(Jn(),(i=$n())!==r?(Jn(),(o=ut())!==r&&(s=Vn())!==r?(Qe=t,t=function(e,t,n){return qn(Xe(),e,t,n)}(n,a,o)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)),t!==r?(Qe=e,e=function(e){return{type:"function",location:Xe(),name:"substring",args:e}}(t)):(Ke=e,e=r)):(Ke=e,e=r),e}())===r&&(e=function(){var e,t,n,a,i;return e=Ke,un()!==r?(Jn(),t=Ke,kn()!==r?(Jn(),n=Dt(),Jn(),(a=ut())!==r?(Jn(),rn()!==r?(Jn(),(i=ut())!==r?(Jn(),Vn()!==r?(Qe=t,t=function(e,t,n){return qn(Xe(),e,t,n)}(n,a,i)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r),t===r&&(t=Ke,kn()!==r?(Jn(),n=Dt(),Jn(),(a=ut())!==r?(Jn(),Vn()!==r?(Qe=t,t=function(e,t){return qn(Xe(),e,t)}(n,a)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)),t!==r?(Qe=e,e=function(e){return{type:"function",location:Xe(),name:"trim",args:e}}(t)):(Ke=e,e=r)):(Ke=e,e=r),e}())===r&&(e=function(){var e,t,n,a;return e=Ke,ln()!==r?(Jn(),t=Ke,kn()!==r?(Jn(),(n=ut())!==r?(Jn(),Bt()!==r?(Jn(),(a=ut())!==r?(Jn(),Vn()!==r?(Qe=t,t=function(e,t){return qn(Xe(),e,t)}(n,a)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r),t===r&&(t=Ke,kn()!==r?(Jn(),(n=ut())!==r?(Jn(),$n()!==r?(Jn(),(a=ut())!==r?(Jn(),Vn()!==r?(Qe=t,t=function(e,t){return qn(Xe(),e,t)}(n,a)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)),t!==r?(Qe=e,e=function(e){return{type:"function",location:Xe(),name:"position",args:e}}(t)):(Ke=e,e=r)):(Ke=e,e=r),e}())===r&&(e=function(){var e,t,n,a;return e=Ke,vn()!==r?(Jn(),t=Ke,kn()!==r?(Jn(),(n=ut())!==r?(Jn(),wn()!==r?(Jn(),(a=Zt())!==r?(Jn(),Vn()!==r?(Qe=t,t=function(e,t){return qn(Xe(),e,t)}(n,a)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r),t===r&&(t=Ke,kn()!==r?(Jn(),(n=ut())!==r?(Jn(),$n()!==r?(Jn(),(a=Zt())!==r?(Jn(),Vn()!==r?(Qe=t,t=function(e,t){return qn(Xe(),e,t)}(n,a)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)),t!==r?(Qe=e,e=function(e){return{type:"function",location:Xe(),name:"cast",args:e}}(t)):(Ke=e,e=r)):(Ke=e,e=r),e}())===r&&(e=function(){var e,t,n,a;return e=Ke,t=Ke,We++,n=sn(),We--,n===r?t=void 0:(Ke=t,t=r),t!==r&&(n=Hn())!==r?(Jn(),(a=st())!==r?(Qe=e,e=function(e,t){return{type:"function",location:Xe(),name:e,args:t}}(n,a)):(Ke=e,e=r)):(Ke=e,e=r),e}())===r&&(e=function(){var e;return(e=function(){var e,t,n,a,i;if(e=Ke,An()!==r)if(Jn(),(t=ut())!==r){for(Jn(),n=[],a=Ke,(i=Rt())!==r?(Jn(),a=i):(Ke=a,a=r);a!==r;)n.push(a),a=Ke,(i=Rt())!==r?(Jn(),a=i):(Ke=a,a=r);(a=_n())!==r?(Qe=e,e=function(e,t){return{type:"case-expression",location:Xe(),format:"simple",operand:e,clauses:t,else:null,elseLocation:null}}(t,n)):(Ke=e,e=r)}else Ke=e,e=r;else Ke=e,e=r;if(e===r)if(e=Ke,An()!==r)if(Jn(),(t=ut())!==r){for(Jn(),n=[],a=Ke,(i=Rt())!==r?(Jn(),a=i):(Ke=a,a=r);a!==r;)n.push(a),a=Ke,(i=Rt())!==r?(Jn(),a=i):(Ke=a,a=r);(a=$t())!==r?(i=Jn(),_n()!==r?(Qe=e,e=function(e,t,n){return{type:"case-expression",location:Xe(),format:"simple",operand:e,clauses:t,else:n.value,elseLocation:n.location}}(t,n,a)):(Ke=e,e=r)):(Ke=e,e=r)}else Ke=e,e=r;else Ke=e,e=r;return e}())===r&&(e=function(){var e,t,n,a;if(e=Ke,An()!==r){for(Jn(),t=[],n=Ke,(a=Ut())!==r?(Jn(),n=a):(Ke=n,n=r);n!==r;)t.push(n),n=Ke,(a=Ut())!==r?(Jn(),n=a):(Ke=n,n=r);(n=_n())!==r?(Qe=e,e=function(e){return{type:"case-expression",location:Xe(),format:"searched",clauses:e,else:null,elseLocation:null}}(t)):(Ke=e,e=r)}else Ke=e,e=r;if(e===r)if(e=Ke,An()!==r){for(Jn(),t=[],n=Ke,(a=Ut())!==r?(Jn(),n=a):(Ke=n,n=r);n!==r;)t.push(n),n=Ke,(a=Ut())!==r?(Jn(),n=a):(Ke=n,n=r);(n=$t())!==r?(a=Jn(),_n()!==r?(Qe=e,e=function(e,t){return{type:"case-expression",location:Xe(),format:"searched",clauses:e,else:t.value,elseLocation:t.location}}(t,n)):(Ke=e,e=r)):(Ke=e,e=r)}else Ke=e,e=r;return e}()),e}())===r&&(e=function(){var e,t;return e=Ke,(t=function(){var e,t;return e=Ke,(t=function(){var e,t,n,a;if(e=Ke,(t=Tt())!==r){for(n=[],a=St();a!==r;)n.push(a),a=St();Qe=e,e=function(e,t){return e+t.join("")}(t,n)}else Ke=e,e=r;return e}())!==r&&(Qe=e),t}())!==r&&(Qe=e,t=function(e){return/^CURRENT_DATE$/i.test(e)?{type:"current-time",location:Xe(),mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(e)?{type:"current-time",location:Xe(),mode:"timestamp"}:/^CURRENT_TIME$/i.test(e)?{type:"current-time",location:Xe(),mode:"time"}:/^CURRENT_USER$/i.test(e)?{type:"current-user",location:Xe()}:{type:"column-reference",location:Xe(),table:"",column:e}}(t)),(e=t)===r&&(e=Ke,(t=function(){var e,t;return e=Ke,Ot()!==r?(t=function(){var e,t,n;for(e=Ke,t=[],n=Lt();n!==r;)t.push(n),n=Lt();return Qe=e,function(e){return e.join("")}(t)}(),Ot()!==r?(Qe=e,e=t):(Ke=e,e=r)):(Ke=e,e=r),e}())!==r&&(Qe=e,t=function(e){return{type:"column-reference",location:Xe(),table:"",column:e,delimited:!0}}(t)),e=t),e}())===r&&(e=Ct())===r&&(e=Ke,kn()!==r?(Jn(),(t=ut())!==r?(Jn(),Vn()!==r?(Qe=e,e=function(e){return e.paren=!0,e}(t)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r)),e}function yt(){var e,t,n,a;if(e=Ke,(t=Tt())!==r){for(n=[],a=It();a!==r;)n.push(a),a=It();Qe=e,e=function(e,t){return e+t.join("")}(t,n)}else Ke=e,e=r;return e}function Tt(){var t;return t=e.charAt(Ke),d.test(t)?Ke++:(t=r,0===We&&it(x)),t}function It(){var t;return t=e.charAt(Ke),f.test(t)?Ke++:(t=r,0===We&&it(b)),t}function St(){var t;return t=e.charAt(Ke),m.test(t)?Ke++:(t=r,0===We&&it(E)),t}function Lt(){var e;return(e=Nt())===r&&(e=function(){var e;return e=Ke,Ot()!==r&&Ot()!==r?(Qe=e,e='"'):(Ke=e,e=r),e}()),e}function Nt(){var t;return t=e.charAt(Ke),m.test(t)?Ke++:(t=r,0===We&&it(E)),t}function Ot(){var t;return t=e.charAt(Ke),h.test(t)?Ke++:(t=r,0===We&&it(A)),t}function Ct(){var t,n,a,i;return t=Ke,n=Ke,64===e.charCodeAt(Ke)?(a="@",Ke++):(a=r,0===We&&it(_)),a!==r&&(i=yt())!==r?n=a=[a,i]:(Ke=n,n=r),n!==r&&(Qe=t,n=function(e){return{type:"parameter",location:Xe(),value:e[1]}}(n)),n}function Zt(){var e,t,n;return e=Ke,(t=gn())===r&&(t=yn()),t!==r&&(Qe=e,t={type:"data-type",location:Xe(),value:{type:"integer"}}),(e=t)===r&&(e=Ke,(t=Tn())!==r&&(Qe=e,t={type:"data-type",location:Xe(),value:{type:"smallint"}}),(e=t)===r&&(e=Ke,(t=In())!==r&&(Qe=e,t={type:"data-type",location:Xe(),value:{type:"float"}}),(e=t)===r&&(e=Ke,(t=Sn())!==r&&(Qe=e,t={type:"data-type",location:Xe(),value:{type:"real"}}),(e=t)===r&&(e=Ke,(t=dn())!==r&&(Qe=e,t={type:"data-type",location:Xe(),value:{type:"date"}}),(e=t)===r&&(e=Ke,(t=cn())!==r&&(Qe=e,t={type:"data-type",location:Xe(),value:{type:"timestamp"}}),(e=t)===r&&(e=Ke,(t=fn())!==r&&(Qe=e,t={type:"data-type",location:Xe(),value:{type:"time"}}),(e=t)===r&&(e=Ke,(t=Ln())!==r?(Jn(),kn()!==r?(Jn(),(n=zt())!==r?(Jn(),Vn()!==r?(Qe=e,e=function(e){return{type:"data-type",location:Xe(),value:{type:"varchar",size:parseInt(e)}}}(n)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r)))))))),e}function Dt(){var e,t;return e=Ke,(t=mn())===r&&(t=hn())===r&&(t=pn()),t===r&&(t=null),Qe=e,function(e){return{type:"string",location:Xe(),value:e??"BOTH"}}(t)}function Ft(){var e,t;return e=Ke,(t=Cn())===r&&(t=Fn())===r&&(t=Mn())===r&&(t=xn())===r&&(t=bn())===r&&(t=En())===r&&(t=Zn())===r&&(t=Dn()),t!==r&&(Qe=e,t=function(e){return{type:"string",location:Xe(),value:e}}(t)),t}function Mt(){var t,n,a,i;return t=Ke,On()!==r?(Jn(),n=e.charAt(Ke),l.test(n)?Ke++:(n=r,0===We&&it(D)),n!==r?(Jn(),(a=_t())!==r?(Jn(),(i=xt())!==r?(Qe=t,t=function(e,t,n){return{type:"interval",location:Xe(),value:t,qualifier:n,op:e}}(n,a,i)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r),t===r&&(t=Ke,On()!==r?(Jn(),(n=_t())!==r?(Jn(),(a=xt())!==r?(Qe=t,t=function(e,t){return{type:"interval",location:Xe(),value:e,qualifier:t,op:""}}(n,a)):(Ke=t,t=r)):(Ke=t,t=r)):(Ke=t,t=r)),t}function xt(){var e,t,n;return e=Ke,(t=function(){var e,t,n;return e=Ke,(t=bt())!==r?(Jn(),kn()!==r?(Jn(),(n=At())!==r?(Jn(),Vn()!==r?(Qe=e,e=function(e,t){return{type:"interval-period",location:Xe(),period:e.value,precision:t,secondary:null}}(t,n)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r),e===r&&(e=Ke,(t=bt())!==r&&(Qe=e,t=function(e){return{type:"interval-period",location:Xe(),period:e.value,precision:null,secondary:null}}(t)),e=t),e}())!==r?(Jn(),Nn()!==r?(Jn(),(n=function(){var e,t,n,a;return e=Ke,(t=bt())!==r&&(Qe=e,t=function(e){return{type:"interval-period",location:Xe(),period:e.value,precision:null,secondary:null}}(t)),(e=t)===r&&(e=Ke,(t=En())!==r?(Jn(),kn()!==r?(Jn(),(n=At())!==r?(Jn(),$n()!==r?(Jn(),(a=Et())!==r?(Jn(),Vn()!==r?(Qe=e,e=function(e,t){return{type:"interval-period",location:Xe(),period:"second",precision:e,secondary:t}}(n,a)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r),e===r&&(e=Ke,(t=En())!==r?(Jn(),kn()!==r?(Jn(),(n=At())!==r?(Jn(),Vn()!==r?(Qe=e,e=function(e){return{type:"interval-period",location:Xe(),period:"second",precision:e,secondary:null}}(n)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r),e===r&&(e=Ke,(t=En())!==r&&(Qe=e,t={type:"interval-period",location:Xe(),period:"second",precision:null,secondary:null}),e=t))),e}())!==r?(Qe=e,e=function(e,t){return{type:"interval-qualifier",location:Xe(),start:e,end:t}}(t,n)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r),e===r&&(e=function(){var e,t,n,a;return e=Ke,(t=bt())!==r?(Jn(),kn()!==r?(Jn(),(n=Et())!==r?(Jn(),Vn()!==r?(Qe=e,e=function(e,t){return{type:"interval-period",location:Xe(),period:e.value,precision:t,secondary:null}}(t,n)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r),e===r&&(e=Ke,(t=bt())!==r&&(Qe=e,t=function(e){return{type:"interval-period",location:Xe(),period:e.value,precision:null,secondary:null}}(t)),(e=t)===r&&(e=Ke,(t=En())!==r?(Jn(),kn()!==r?(Jn(),(n=At())!==r?(Jn(),$n()!==r?(Jn(),(a=Et())!==r?(Jn(),Vn()!==r?(Qe=e,e=function(e,t){return{type:"interval-period",location:Xe(),period:"second",precision:e,secondary:t}}(n,a)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r),e===r&&(e=Ke,(t=En())!==r?(Jn(),kn()!==r?(Jn(),(n=Et())!==r?(Jn(),Vn()!==r?(Qe=e,e=function(e){return{type:"interval-period",location:Xe(),period:"second",precision:e,secondary:null}}(n)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r),e===r&&(e=Ke,(t=En())!==r&&(Qe=e,t={type:"interval-period",location:Xe(),period:"second",precision:null,secondary:null}),e=t)))),e}()),e}function bt(){var e,t;return e=Ke,(t=Mn())!==r&&(Qe=e,t={type:"string",location:Xe(),value:"day"}),(e=t)===r&&(e=Ke,(t=xn())!==r&&(Qe=e,t={type:"string",location:Xe(),value:"hour"}),(e=t)===r&&(e=Ke,(t=bn())!==r&&(Qe=e,t={type:"string",location:Xe(),value:"minute"}),(e=t)===r&&(e=Ke,(t=Fn())!==r&&(Qe=e,t={type:"string",location:Xe(),value:"month"}),(e=t)===r&&(e=Ke,(t=Cn())!==r&&(Qe=e,t={type:"string",location:Xe(),value:"year"}),e=t)))),e}function Et(){var e,t;return e=Ke,(t=zt())!==r&&(Qe=e,t=function(e){return parseFloat(e)}(t)),t}function At(){var e,t;return e=Ke,(t=zt())!==r&&(Qe=e,t=function(e){return parseFloat(e)}(t)),t}function _t(){var e;return(e=Pt())===r&&(e=Ct()),e}function Pt(){var t,n,a,i,o;if(t=Ke,39===e.charCodeAt(Ke)?(n="'",Ke++):(n=r,0===We&&it(P)),n===r&&("N'"===e.substr(Ke,2)?(n="N'",Ke+=2):(n=r,0===We&&it(U))),n!==r){for(a=[],i=Ke,e.substr(Ke,2)===s?(o=s,Ke+=2):(o=r,0===We&&it(R)),o!==r&&(Qe=i,o="'"),(i=o)===r&&(i=e.charAt(Ke),p.test(i)?Ke++:(i=r,0===We&&it($)));i!==r;)a.push(i),i=Ke,e.substr(Ke,2)===s?(o=s,Ke+=2):(o=r,0===We&&it(R)),o!==r&&(Qe=i,o="'"),(i=o)===r&&(i=e.charAt(Ke),p.test(i)?Ke++:(i=r,0===We&&it($)));39===e.charCodeAt(Ke)?(i="'",Ke++):(i=r,0===We&&it(P)),i!==r?(Qe=t,t=function(e){return{type:"string",location:Xe(),value:e.join("")}}(a)):(Ke=t,t=r)}else Ke=t,t=r;return t}function Ut(){var e,t,n;return e=Ke,Pn()!==r?(Jn(),(t=ut())!==r?(Jn(),Un()!==r?(Jn(),(n=ut())!==r?(Qe=e,e=function(e,t){return{type:"when-clause",location:Xe(),operand:e,value:t}}(t,n)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r),e}function Rt(){var e,t,n;return e=Ke,Pn()!==r?(Jn(),(t=ut())!==r?(Jn(),Un()!==r?(Jn(),(n=ut())!==r?(Qe=e,e=function(e,t){return{type:"when-clause",location:Xe(),operand:e,value:t}}(t,n)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r)):(Ke=e,e=r),e}function $t(){var e,t;return e=Ke,Rn()!==r?(Jn(),(t=ut())!==r?(Qe=e,e=function(e){return{type:"else-clause",location:Xe(),value:e}}(t)):(Ke=e,e=r)):(Ke=e,e=r),e}function kt(){var t,n,a;return(t=zt())===r&&(t=Ke,n=e.charAt(Ke),l.test(n)?Ke++:(n=r,0===We&&it(D)),n!==r&&(a=zt())!==r?(Qe=t,t=function(e,t){return e[0]+t}(n,a)):(Ke=t,t=r)),t}function Vt(){var t,n,a;return t=Ke,46===e.charCodeAt(Ke)?(n=".",Ke++):(n=r,0===We&&it(k)),n!==r?((a=zt())===r&&(a=null),Qe=t,t=function(e){return"."+(null!=e?e:"")}(a)):(Ke=t,t=r),t}function Jt(){var e,t,n;return e=Ke,(t=Yt())!==r&&(n=zt())!==r?(Qe=e,e=function(e,t){return e+t}(t,n)):(Ke=e,e=r),e}function zt(){var e,t,n;if(e=Ke,t=[],(n=Ht())!==r)for(;n!==r;)t.push(n),n=Ht();else t=r;return t!==r&&(Qe=e,t=function(e){return e.join("")}(t)),t}function Ht(){var t;return t=e.charAt(Ke),v.test(t)?Ke++:(t=r,0===We&&it(V)),t}function Yt(){var t,n,a;return t=Ke,n=e.charAt(Ke),w.test(n)?Ke++:(n=r,0===We&&it(J)),n!==r?(a=e.charAt(Ke),l.test(a)?Ke++:(a=r,0===We&&it(D)),a===r&&(a=null),Qe=t,t=function(e,t){return"e"+(null===t?"":t)}(0,a)):(Ke=t,t=r),t}function qt(){var t,n,a,i;return t=Ke,"null"===(n=e.substr(Ke,4)).toLowerCase()?Ke+=4:(n=r,0===We&&it(z)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?t=n=[n,a]:(Ke=t,t=r)):(Ke=t,t=r),t}function Kt(){var t,n,a,i;return t=Ke,"true"===(n=e.substr(Ke,4)).toLowerCase()?Ke+=4:(n=r,0===We&&it(H)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?t=n=[n,a]:(Ke=t,t=r)):(Ke=t,t=r),t}function Qt(){var t,n,a,i;return t=Ke,"false"===(n=e.substr(Ke,5)).toLowerCase()?Ke+=5:(n=r,0===We&&it(Y)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?t=n=[n,a]:(Ke=t,t=r)):(Ke=t,t=r),t}function Bt(){var t,n,a,i;return t=Ke,"in"===(n=e.substr(Ke,2)).toLowerCase()?Ke+=2:(n=r,0===We&&it(q)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="IN"):(Ke=t,t=r)):(Ke=t,t=r),t}function jt(){var t,n,a,i;return t=Ke,"is"===(n=e.substr(Ke,2)).toLowerCase()?Ke+=2:(n=r,0===We&&it(K)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="IS"):(Ke=t,t=r)):(Ke=t,t=r),t}function Gt(){var t,n,a,i;return t=Ke,"like"===(n=e.substr(Ke,4)).toLowerCase()?Ke+=4:(n=r,0===We&&it(B)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="LIKE"):(Ke=t,t=r)):(Ke=t,t=r),t}function Wt(){var t,n,a,i;return t=Ke,"escape"===(n=e.substr(Ke,6)).toLowerCase()?Ke+=6:(n=r,0===We&&it(j)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="ESCAPE"):(Ke=t,t=r)):(Ke=t,t=r),t}function Xt(){var t,n,a,i;return t=Ke,"not"===(n=e.substr(Ke,3)).toLowerCase()?Ke+=3:(n=r,0===We&&it(G)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="NOT"):(Ke=t,t=r)):(Ke=t,t=r),t}function en(){var t,n,a,i;return t=Ke,"and"===(n=e.substr(Ke,3)).toLowerCase()?Ke+=3:(n=r,0===We&&it(W)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="AND"):(Ke=t,t=r)):(Ke=t,t=r),t}function tn(){var t,n,a,i;return t=Ke,"or"===(n=e.substr(Ke,2)).toLowerCase()?Ke+=2:(n=r,0===We&&it(X)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="OR"):(Ke=t,t=r)):(Ke=t,t=r),t}function nn(){var t,n,a,i;return t=Ke,"between"===(n=e.substr(Ke,7)).toLowerCase()?Ke+=7:(n=r,0===We&&it(ee)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="BETWEEN"):(Ke=t,t=r)):(Ke=t,t=r),t}function rn(){var t,n,a,i;return t=Ke,"from"===(n=e.substr(Ke,4)).toLowerCase()?Ke+=4:(n=r,0===We&&it(te)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="FROM"):(Ke=t,t=r)):(Ke=t,t=r),t}function an(){var t,n,a,i;return t=Ke,"for"===(n=e.substr(Ke,3)).toLowerCase()?Ke+=3:(n=r,0===We&&it(ne)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="FOR"):(Ke=t,t=r)):(Ke=t,t=r),t}function on(){var t,n,a,i;return t=Ke,"substring"===(n=e.substr(Ke,9)).toLowerCase()?Ke+=9:(n=r,0===We&&it(re)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="SUBSTRING"):(Ke=t,t=r)):(Ke=t,t=r),t}function sn(){var t,n,a,i;return t=Ke,"extract"===(n=e.substr(Ke,7)).toLowerCase()?Ke+=7:(n=r,0===We&&it(ae)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="EXTRACT"):(Ke=t,t=r)):(Ke=t,t=r),t}function un(){var t,n,a,i;return t=Ke,"trim"===(n=e.substr(Ke,4)).toLowerCase()?Ke+=4:(n=r,0===We&&it(ie)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="TRIM"):(Ke=t,t=r)):(Ke=t,t=r),t}function ln(){var t,n,a,i;return t=Ke,"position"===(n=e.substr(Ke,8)).toLowerCase()?Ke+=8:(n=r,0===We&&it(oe)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="POSITION"):(Ke=t,t=r)):(Ke=t,t=r),t}function cn(){var t,n,a,i;return t=Ke,"timestamp"===(n=e.substr(Ke,9)).toLowerCase()?Ke+=9:(n=r,0===We&&it(se)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="TIMESTAMP"):(Ke=t,t=r)):(Ke=t,t=r),t}function dn(){var t,n,a,i;return t=Ke,"date"===(n=e.substr(Ke,4)).toLowerCase()?Ke+=4:(n=r,0===We&&it(ue)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="DATE"):(Ke=t,t=r)):(Ke=t,t=r),t}function fn(){var t,n,a,i;return t=Ke,"time"===(n=e.substr(Ke,4)).toLowerCase()?Ke+=4:(n=r,0===We&&it(le)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="TIME"):(Ke=t,t=r)):(Ke=t,t=r),t}function mn(){var t,n,a,i;return t=Ke,"leading"===(n=e.substr(Ke,7)).toLowerCase()?Ke+=7:(n=r,0===We&&it(ce)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="LEADING"):(Ke=t,t=r)):(Ke=t,t=r),t}function hn(){var t,n,a,i;return t=Ke,"trailing"===(n=e.substr(Ke,8)).toLowerCase()?Ke+=8:(n=r,0===We&&it(de)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="TRAILING"):(Ke=t,t=r)):(Ke=t,t=r),t}function pn(){var t,n,a,i;return t=Ke,"both"===(n=e.substr(Ke,4)).toLowerCase()?Ke+=4:(n=r,0===We&&it(fe)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="BOTH"):(Ke=t,t=r)):(Ke=t,t=r),t}function vn(){var t,n,a,i;return t=Ke,"cast"===(n=e.substr(Ke,4)).toLowerCase()?Ke+=4:(n=r,0===We&&it(me)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="CAST"):(Ke=t,t=r)):(Ke=t,t=r),t}function wn(){var t,n,a,i;return t=Ke,"as"===(n=e.substr(Ke,2)).toLowerCase()?Ke+=2:(n=r,0===We&&it(he)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="AS"):(Ke=t,t=r)):(Ke=t,t=r),t}function gn(){var t,n,a,i;return t=Ke,"integer"===(n=e.substr(Ke,7)).toLowerCase()?Ke+=7:(n=r,0===We&&it(pe)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="INTEGER"):(Ke=t,t=r)):(Ke=t,t=r),t}function yn(){var t,n,a,i;return t=Ke,"int"===(n=e.substr(Ke,3)).toLowerCase()?Ke+=3:(n=r,0===We&&it(ve)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="INT"):(Ke=t,t=r)):(Ke=t,t=r),t}function Tn(){var t,n,a,i;return t=Ke,"smallint"===(n=e.substr(Ke,8)).toLowerCase()?Ke+=8:(n=r,0===We&&it(we)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="SMALLINT"):(Ke=t,t=r)):(Ke=t,t=r),t}function In(){var t,n,a,i;return t=Ke,"float"===(n=e.substr(Ke,5)).toLowerCase()?Ke+=5:(n=r,0===We&&it(ge)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="FLOAT"):(Ke=t,t=r)):(Ke=t,t=r),t}function Sn(){var t,n,a,i;return t=Ke,"real"===(n=e.substr(Ke,4)).toLowerCase()?Ke+=4:(n=r,0===We&&it(ye)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="REAL"):(Ke=t,t=r)):(Ke=t,t=r),t}function Ln(){var t,n,a,i;return t=Ke,"varchar"===(n=e.substr(Ke,7)).toLowerCase()?Ke+=7:(n=r,0===We&&it(Te)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="VARCHAR"):(Ke=t,t=r)):(Ke=t,t=r),t}function Nn(){var t,n,a,i;return t=Ke,"to"===(n=e.substr(Ke,2)).toLowerCase()?Ke+=2:(n=r,0===We&&it(Ie)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="TO"):(Ke=t,t=r)):(Ke=t,t=r),t}function On(){var t,n,a,i;return t=Ke,"interval"===(n=e.substr(Ke,8)).toLowerCase()?Ke+=8:(n=r,0===We&&it(Se)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="INTERVAL"):(Ke=t,t=r)):(Ke=t,t=r),t}function Cn(){var t,n,a,i;return t=Ke,"year"===(n=e.substr(Ke,4)).toLowerCase()?Ke+=4:(n=r,0===We&&it(Le)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="YEAR"):(Ke=t,t=r)):(Ke=t,t=r),t}function Zn(){var t,n,a,i;return t=Ke,"timezone_hour"===(n=e.substr(Ke,13)).toLowerCase()?Ke+=13:(n=r,0===We&&it(Ne)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="TIMEZONE_HOUR"):(Ke=t,t=r)):(Ke=t,t=r),t}function Dn(){var t,n,a,i;return t=Ke,"timezone_minute"===(n=e.substr(Ke,15)).toLowerCase()?Ke+=15:(n=r,0===We&&it(Oe)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="TIMEZONE_MINUTE"):(Ke=t,t=r)):(Ke=t,t=r),t}function Fn(){var t,n,a,i;return t=Ke,"month"===(n=e.substr(Ke,5)).toLowerCase()?Ke+=5:(n=r,0===We&&it(Ce)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="MONTH"):(Ke=t,t=r)):(Ke=t,t=r),t}function Mn(){var t,n,a,i;return t=Ke,"day"===(n=e.substr(Ke,3)).toLowerCase()?Ke+=3:(n=r,0===We&&it(Ze)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="DAY"):(Ke=t,t=r)):(Ke=t,t=r),t}function xn(){var t,n,a,i;return t=Ke,"hour"===(n=e.substr(Ke,4)).toLowerCase()?Ke+=4:(n=r,0===We&&it(De)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="HOUR"):(Ke=t,t=r)):(Ke=t,t=r),t}function bn(){var t,n,a,i;return t=Ke,"minute"===(n=e.substr(Ke,6)).toLowerCase()?Ke+=6:(n=r,0===We&&it(Fe)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="MINUTE"):(Ke=t,t=r)):(Ke=t,t=r),t}function En(){var t,n,a,i;return t=Ke,"second"===(n=e.substr(Ke,6)).toLowerCase()?Ke+=6:(n=r,0===We&&it(Me)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="SECOND"):(Ke=t,t=r)):(Ke=t,t=r),t}function An(){var t,n,a,i;return t=Ke,"case"===(n=e.substr(Ke,4)).toLowerCase()?Ke+=4:(n=r,0===We&&it(xe)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="CASE"):(Ke=t,t=r)):(Ke=t,t=r),t}function _n(){var t,n,a,i;return t=Ke,"end"===(n=e.substr(Ke,3)).toLowerCase()?Ke+=3:(n=r,0===We&&it(be)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="END"):(Ke=t,t=r)):(Ke=t,t=r),t}function Pn(){var t,n,a,i;return t=Ke,"when"===(n=e.substr(Ke,4)).toLowerCase()?Ke+=4:(n=r,0===We&&it(Ee)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="WHEN"):(Ke=t,t=r)):(Ke=t,t=r),t}function Un(){var t,n,a,i;return t=Ke,"then"===(n=e.substr(Ke,4)).toLowerCase()?Ke+=4:(n=r,0===We&&it(Ae)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="THEN"):(Ke=t,t=r)):(Ke=t,t=r),t}function Rn(){var t,n,a,i;return t=Ke,"else"===(n=e.substr(Ke,4)).toLowerCase()?Ke+=4:(n=r,0===We&&it(_e)),n!==r?(a=Ke,We++,i=It(),We--,i===r?a=void 0:(Ke=a,a=r),a!==r?(Qe=t,t="ELSE"):(Ke=t,t=r)):(Ke=t,t=r),t}function $n(){var t;return 44===e.charCodeAt(Ke)?(t=",",Ke++):(t=r,0===We&&it(Pe)),t}function kn(){var t;return 40===e.charCodeAt(Ke)?(t="(",Ke++):(t=r,0===We&&it(Ue)),t}function Vn(){var t;return 41===e.charCodeAt(Ke)?(t=")",Ke++):(t=r,0===We&&it(Re)),t}function Jn(){var e,t;for(e=[],t=zn();t!==r;)e.push(t),t=zn();return e}function zn(){var t;return t=e.charAt(Ke),g.test(t)?Ke++:(t=r,0===We&&it($e)),t}function Hn(){var t,n,a,i;if(t=Ke,(n=yt())!==r&&(Qe=t),(t=n)===r)if(t=Ke,96===e.charCodeAt(Ke)?(n="`",Ke++):(n=r,0===We&&it(ke)),n!==r){if(a=[],i=e.charAt(Ke),y.test(i)?Ke++:(i=r,0===We&&it(Ve)),i!==r)for(;i!==r;)a.push(i),i=e.charAt(Ke),y.test(i)?Ke++:(i=r,0===We&&it(Ve));else a=r;a!==r?(96===e.charCodeAt(Ke)?(i="`",Ke++):(i=r,0===We&&it(ke)),i!==r?(Qe=t,t=function(e){return e.join("")}(a)):(Ke=t,t=r)):(Ke=t,t=r)}else Ke=t,t=r;return t}function Yn(e,t,n,r,a){const i={type:"binary-expression",location:a,operator:e,left:t,right:n};return void 0!==r&&(i.escape=r),i}function qn(e,...t){return{type:"expression-list",location:e,value:t}}function Kn(e,t){let n=e;for(const{op:e,expr:r,location:{end:a}}of t)n=Yn(e,n,r,void 0,{...n.location,end:a});return n}if(n=o(),t.peg$library)return{peg$result:n,peg$currPos:Ke,peg$FAILED:r,peg$maxFailExpected:Ge,peg$maxFailPos:je};if(n!==r&&Ke===e.length)return n;throw n!==r&&Ke<e.length&&it({type:"end"}),function(e,t,n){return new Q(Q.buildMessage(e,t),e,t,n)}(Ge,je<e.length?e.charAt(je):null,je<e.length?at(je,je+1):at(je,je))}(e)}}function G(e,t){if(null!=e)switch(t(e),e.type){case"when-clause":G(e.operand,t),G(e.value,t);break;case"case-expression":for(const n of e.clauses)G(n,t);"simple"===e.format&&G(e.operand,t),null!==e.else&&G(e.else,t);break;case"expression-list":for(const n of e.value)G(n,t);break;case"unary-expression":G(e.expr,t);break;case"binary-expression":G(e.left,t),G(e.right,t);break;case"function":G(e.args,t);break;case"interval":G(e.value,t),G(e.qualifier,t);break;case"interval-qualifier":G(e.start,t),G(e.end,t)}}const W=new Set(["current_timestamp","current_date","current_time"]);class X{static makeBool(e){return te(e)}static featureValue(e,t,n,r){return ce(e,t,n,r)}static equalsNull(e){return null===e}static applyLike(e,t,n){return le(e,t,n)}static ensureArray(e){return ne(e)}static applyIn(e,t,n){return oe(e,t)}static currentTimestamp(e){return L(new Date,e)}static currentDate(e){return i.n.fromNow(e)}static currentTime(e){const t=L(new Date,e);return f.k.fromDateTime(t)}static makeSqlInterval(e,t,n){return c.createFromValueAndQualifier(e,t,n)}static convertInterval(e){return c.isInterval(e)?e.valueInMilliseconds():e}static compare(e,t,n,r){return R(t,n,e)}static calculate(e,t,n,r){return q(e,t,n,r)}static evaluateTime(e){return F(e)}static evaluateTimestamp(e,t,n){return M(e,t,n)}static evaluateDate(e,t){return x(e,t)}static evaluateFunction(e,t,n){return J(e,t,n)}static lookup(e,t){const n=t[e];return void 0===n?null:n}static between(e,t,n){return null==e||null==t[0]||null==t[1]?null:R(e,t[0],">=")&&R(e,t[1],"<=")}static notbetween(e,t,n){return null==e||null==t[0]||null==t[1]?null:R(e,t[0],"<")||R(e,t[1],">")}static ternaryNot(e){return re(e)}static ternaryAnd(e,t){return ae(e,t)}static ternaryOr(e,t){return ie(e,t)}}class ee{constructor(e,t,n="UTC",r=null){this.fieldsIndex=t,this.timeZone=n,this.currentUser=r,this.parameters={},this._hasDateFunctions=void 0,this.parseTree=j.parse(e);const{isStandardized:a,isAggregate:i,currentUserRequired:o,referencedFieldNames:s}=this._extractExpressionInfo(t);this._referencedFieldNames=s,this.isStandardized=a,this.isAggregate=i,this.currentUserRequired=o}static convertValueToStorageFormat(e,t=null){if(null===t)return(0,A.$P)(e)?e.getTime():O(e)?e.toMillis():D(e)?e.toStorageFormat():Z(e)?e.toStorageString():C(e)?e.toStorageFormat():e;switch(t){case"date":return(0,A.$P)(e)?e.getTime():O(e)?e.toMillis():D(e)?e.toMilliseconds():C(e)?e.toNumber():e;case"date-only":return(0,A.$P)(e)?i.n.fromDateJS(e).toString():D(e)?i.n.fromSqlTimeStampOffset(e).toString():O(e)?i.n.fromDateTime(e).toString():e;case"time-only":return(0,A.$P)(e)?f.k.fromDateJS(e).toStorageString():O(e)?f.k.fromDateTime(e).toStorageString():D(e)?f.k.fromSqlTimeStampOffset(e).toStorageString():Z(e)?e.toStorageString():e;case"timestamp-offset":if((0,A.$P)(e))return d.g.fromJSDate(e).toStorageFormat();if(O(e))return d.g.fromDateTime(e).toStorageFormat();if(D(e))return e.toStorageFormat()}return e}static create(e,t={}){return new ee(e,t.fieldsIndex,t.timeZone??void 0,t.currentUser)}get fieldNames(){return this._referencedFieldNames}testSet(e,t=de,n=this.currentUser){return!!this._evaluateNode(this.parseTree,null,t,e,n)}calculateValue(e,t=de,n=this.currentUser){const r=this._evaluateNode(this.parseTree,e,t,null,n);return c.isInterval(r)?r.valueInMilliseconds()/864e5:r}calculateValueCompiled(e,t=de,n=this.currentUser){return null!=this.parseTree._compiledVersion?this.parseTree._compiledVersion(e,this.parameters,t,this.fieldsIndex,this.timeZone,n??null):(0,r.A)("esri-csp-restrictions")?this.calculateValue(e,t):(this._compileMe(),this.parseTree._compiledVersion(e,this.parameters,t,this.fieldsIndex,this.timeZone,n??null))}testFeature(e,t=de,n=this.currentUser){return!!this._evaluateNode(this.parseTree,e,t,null,n)}testFeatureCompiled(e,t=de,n=this.currentUser){return null!=this.parseTree._compiledVersion?!!this.parseTree._compiledVersion(e,this.parameters,t,this.fieldsIndex,this.timeZone,n??null):(0,r.A)("esri-csp-restrictions")?this.testFeature(e,t):(this._compileMe(),!!this.parseTree._compiledVersion(e,this.parameters,t,this.fieldsIndex,this.timeZone,n??null))}get hasDateFunctions(){return null!=this._hasDateFunctions||(this._hasDateFunctions=!1,G(this.parseTree,(e=>{"current-time"===e.type?this._hasDateFunctions=!0:"function"===e.type&&(this._hasDateFunctions=this._hasDateFunctions||W.has(e.name.toLowerCase()))}))),this._hasDateFunctions}getFunctions(){const e=new Set;return G(this.parseTree,(t=>{"function"===t.type&&e.add(t.name.toLowerCase())})),Array.from(e)}getExpressions(){const e=new Map;return G(this.parseTree,(t=>{if("function"===t.type){const n=t.name.toLowerCase(),r=t.args.value[0];if("column-reference"===r.type){const t=r.column,a=`${n}-${t}`;e.has(a)||e.set(a,{aggregateType:n,field:t})}}})),[...e.values()]}getVariables(){const e=new Set;return G(this.parseTree,(t=>{"parameter"===t.type&&e.add(t.value.toLowerCase())})),Array.from(e)}_compileMe(){const e="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","fieldsIndex","timeZone","currentUser",e).bind(X)}_extractExpressionInfo(e){const t=[],n=new Set;let r=!0,i=!1,o=!1;return G(this.parseTree,(s=>{switch(s.type){case"column-reference":{const r=e?.get(s.column);let a,i;r?a=i=r.name??"":(i=s.column,a=i.toLowerCase()),n.has(a)||(n.add(a),t.push(i)),s.column=i;break}case"current-user":o=!0;break;case"function":{const{name:e,args:t}=s,n=t.value.length;r&&(r=function(e,t){const n=Y[e.toLowerCase()];return null!=n&&t>=n.minParams&&t<=n.maxParams}(e,n)),!1===i&&(i=(0,a.M)(e,n));break}}})),{referencedFieldNames:Array.from(t),isStandardized:r,isAggregate:i,currentUserRequired:o}}evaluateNodeToJavaScript(e){switch(e.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(e.value)+", "+JSON.stringify(e.qualifier)+","+JSON.stringify(e.op)+")";case"case-expression":{let t="";if("simple"===e.format){const n=this.evaluateNodeToJavaScript(e.operand);t="( ";for(let r=0;r<e.clauses.length;r++)t+=" (this.compare('=',"+n+","+this.evaluateNodeToJavaScript(e.clauses[r].operand)+") ? ("+this.evaluateNodeToJavaScript(e.clauses[r].value)+") : ";null!==e.else?t+=this.evaluateNodeToJavaScript(e.else):t+="null",t+=" )"}else{t="( ";for(let n=0;n<e.clauses.length;n++)t+=" this.makeBool("+this.evaluateNodeToJavaScript(e.clauses[n].operand)+")===true ? ("+this.evaluateNodeToJavaScript(e.clauses[n].value)+") : ";null!==e.else?t+=this.evaluateNodeToJavaScript(e.else):t+="null",t+=" )"}return t}case"parameter":return"this.lookup("+JSON.stringify(e.value.toLowerCase())+",lookups)";case"expression-list":{let t="[";for(const n of e.value)"["!==t&&(t+=","),t+=this.evaluateNodeToJavaScript(n);return t+="]",t}case"unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(e.expr)+")";case"binary-expression":switch(e.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case"IS":if("null"!==e.right.type)throw new o.L8(o.Z7.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")";case"ISNOT":if("null"!==e.right.type)throw new o.L8(o.Z7.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+"), timeZone)";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+"), timeZone))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+", timeZone)";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+", timeZone)";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+", timeZone)";case"*":case"-":case"+":case"/":case"||":return"this.calculate("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+", timeZone)";default:throw new o.L8(o.Z7.UnsupportedOperator,{operator:e.operator})}case"null":case"boolean":case"string":case"number":return JSON.stringify(e.value);case"time":return"this.evaluateTime("+JSON.stringify(e.value)+")";case"date":return"this.evaluateDate("+JSON.stringify(e.value)+", 'unknown')";case"timestamp":return"this.evaluateTimestamp("+JSON.stringify(e.value)+", 'unknown')";case"current-time":return"date"===e.mode?"this.currentDate(timeZone)":"time"===e.mode?"this.currentTime(timeZone)":"this.currentTimestamp(timeZone)";case"current-user":return"currentUser";case"column-reference":return"this.featureValue(feature,"+JSON.stringify(e.column)+",fieldsIndex,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(e.name)+","+this.evaluateNodeToJavaScript(e.args)+", timeZone)"}throw new o.L8(o.Z7.UnsupportedSyntax,{node:e.type})}_evaluateNode(e,t,n,r,i){let s;switch(e.type){case"interval":{const a=this._evaluateNode(e.value,t,n,r,i);return c.createFromValueAndQualifier(a,e.qualifier,e.op)}case"case-expression":if("simple"===e.format){const a=this._evaluateNode(e.operand,t,n,r,i);for(let o=0;o<e.clauses.length;o++)if(R(a,this._evaluateNode(e.clauses[o].operand,t,n,r,i),"=",this.timeZone))return this._evaluateNode(e.clauses[o].value,t,n,r,i);if(null!==e.else)return this._evaluateNode(e.else,t,n,r,i)}else{for(let a=0;a<e.clauses.length;a++)if(te(this._evaluateNode(e.clauses[a].operand,t,n,r,i)))return this._evaluateNode(e.clauses[a].value,t,n,r,i);if(null!==e.else)return this._evaluateNode(e.else,t,n,r,i)}return null;case"parameter":return s=this.parameters[e.value.toLowerCase()],(0,A.$P)(s)?h.c9.fromJSDate(s):null!=s&&"object"==typeof s&&"toDateTime"in s?s.toDateTime():s;case"expression-list":{const a=[];for(const o of e.value)a.push(this._evaluateNode(o,t,n,r,i));return a}case"unary-expression":return re(this._evaluateNode(e.expr,t,n,r,i));case"binary-expression":switch(e.operator){case"AND":return ae(this._evaluateNode(e.left,t,n,r,i),this._evaluateNode(e.right,t,n,r,i));case"OR":return ie(this._evaluateNode(e.left,t,n,r,i),this._evaluateNode(e.right,t,n,r,i));case"IS":if("null"!==e.right.type)throw new o.L8(o.Z7.UnsupportedIsRhs);return null===this._evaluateNode(e.left,t,n,r,i);case"ISNOT":if("null"!==e.right.type)throw new o.L8(o.Z7.UnsupportedIsRhs);return null!==this._evaluateNode(e.left,t,n,r,i);case"IN":{const a=ne(this._evaluateNode(e.right,t,n,r,i));return oe(this._evaluateNode(e.left,t,n,r,i),a,this.timeZone)}case"NOT IN":{const a=ne(this._evaluateNode(e.right,t,n,r,i));return re(oe(this._evaluateNode(e.left,t,n,r,i),a,this.timeZone))}case"BETWEEN":{const a=this._evaluateNode(e.left,t,n,r,i),o=this._evaluateNode(e.right,t,n,r,i);return null==a||null==o[0]||null==o[1]?null:R(a,o[0],">=",this.timeZone)&&R(a,o[1],"<=",this.timeZone)}case"NOTBETWEEN":{const a=this._evaluateNode(e.left,t,n,r,i),o=this._evaluateNode(e.right,t,n,r,i);return null==a||null==o[0]||null==o[1]?null:R(a,o[0],"<",this.timeZone)||R(a,o[1],">",this.timeZone)}case"LIKE":return le(this._evaluateNode(e.left,t,n,r,i),this._evaluateNode(e.right,t,n,r,i),e.escape);case"NOT LIKE":return re(le(this._evaluateNode(e.left,t,n,r,i),this._evaluateNode(e.right,t,n,r,i),e.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return R(this._evaluateNode(e.left,t,n,r,i),this._evaluateNode(e.right,t,n,r,i),e.operator,this.timeZone);case"-":case"+":case"*":case"/":case"||":return q(e.operator,this._evaluateNode(e.left,t,n,r,i),this._evaluateNode(e.right,t,n,r,i),this.timeZone)}case"null":case"boolean":case"string":case"number":return e.value;case"date":return e.parsedValue??=x(e.value,"unknown"),e.parsedValue;case"timestamp":return e.parsedValue??=M(e.value,"unknown"),e.parsedValue;case"time":return F(e.value);case"current-time":return"date"===e.mode?X.currentDate(this.timeZone):"time"===e.mode?X.currentTime(this.timeZone):X.currentTimestamp(this.timeZone);case"current-user":return i??null;case"column-reference":return ce(t,e.column,this.fieldsIndex,n);case"data-type":return e.value;case"function":{if(this.isAggregate&&(0,a.M)(e.name,e.args.value.length)){const t=[];for(const a of e.args?.value||[]){const e=[];for(const t of r||[])e.push(this._evaluateNode(a,t,n,null,i));t.push(e)}return(0,a.s)(e.name,t)}const o=this._evaluateNode(e.args,t,n,r,i);return J(e.name,o,this.timeZone)}}throw new o.L8(o.Z7.UnsupportedSyntax,{node:e.type})}}function te(e){return!0===e}function ne(e){return Array.isArray(e)?e:[e]}function re(e){return null!==e?!0!==e:null}function ae(e,t){return null!=e&&null!=t?!0===e&&!0===t:!1!==e&&!1!==t&&null}function ie(e,t){return null!=e&&null!=t?!0===e||!0===t:!0===e||!0===t||null}function oe(e,t,n){if(null==e)return null;let r=!1;for(const n of t)if(null==n)r=null;else{if(e===n){r=!0;break}if(P(e)&&P(n)&&(r=R(e,n,"="),r))break}return r}const se="-[]/{}()*+?.\\^$|";var ue;function le(e,t,n){return null==e?null:function(e,t){const n=t;let r="",a=ue.Normal;for(let t=0;t<e.length;t++){const i=e.charAt(t);switch(a){case ue.Normal:i===n?a=ue.Escaped:se.includes(i)?r+="\\"+i:r+="%"===i?".*":"_"===i?".":i;break;case ue.Escaped:se.includes(i)?r+="\\"+i:r+=i,a=ue.Normal}}return new RegExp("^"+r+"$","m")}(t,n).test(e)}function ce(e,t,n,r){if("getAttributeSQL"in r)return r.getAttributeSQL(e,t);const a=r.getAttribute(e,t),o=n?.get(t);return null==a||"esriFieldTypeDate"!==o?.type&&"date"!==o?.type?null==a||"esriFieldTypeDateOnly"!==o?.type&&"date-only"!==o?.type?null==a||"esriFieldTypeTimeOnly"!==o?.type&&"time-only"!==o?.type?null==a||"esriFieldTypeTimestampOffset"!==o?.type&&"timestamp-offset"!==o?.type?a:new d.g(a):f.k.fromReader(a):i.n.fromReader(a):L(new Date(a),n?.getLuxonTimeZone(o.name)??h.mQ.utcInstance)}!function(e){e[e.Normal=0]="Normal",e[e.Escaped=1]="Escaped"}(ue||(ue={}));const de={getAttribute:(e,t)=>(function(e){return e&&"object"==typeof e.attributes}(e)?e.attributes:e)[t]}},1262:(e,t,n)=>{n.d(t,{L8:()=>s,Z7:()=>r});var r,a,i=n(799);(a=r||(r={})).InvalidFunctionParameters="InvalidFunctionParameters",a.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction",a.UnsupportedSqlFunction="UnsupportedSqlFunction",a.UnsupportedOperator="UnsupportedOperator",a.UnsupportedSyntax="UnsupportedSyntax",a.UnsupportedIsRhs="UnsupportedIsRhs",a.UnsupportedIsLhs="UnsupportedIsLhs",a.InvalidDataType="InvalidDataType",a.CannotCastValue="CannotCastValue",a.FunctionNotRecognized="FunctionNotRecognized",a.InvalidTime="InvalidTime",a.InvalidParameterCount="InvalidParameterCount",a.InvalidTimeStamp="InvalidTimeStamp",a.InvalidDate="InvalidDate",a.InvalidOperator="InvalidOperator",a.IllegalInterval="IllegalInterval",a.YearMonthIntervals="YearMonthIntervals",a.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers",a.MissingStatisticParameters="MissingStatisticParameters";const o={[r.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[r.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[r.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[r.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[r.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[r.UnsupportedOperator]:"Unsupported operator - {operator}",[r.UnsupportedSyntax]:"Unsupported syntax - {node}",[r.UnsupportedSqlFunction]:"Sql function not found = {function}",[r.InvalidDataType]:"Invalid sql data type",[r.InvalidDate]:"Invalid date encountered",[r.InvalidOperator]:"Invalid operator encountered",[r.InvalidTime]:"Invalid time encountered",[r.IllegalInterval]:"Illegal interval",[r.FunctionNotRecognized]:"Function not recognized",[r.InvalidTimeStamp]:"Invalid timestamp encountered",[r.InvalidParameterCount]:"Invalid parameter count for call to {name}",[r.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[r.YearMonthIntervals]:"Year-Month Intervals not supported",[r.CannotCastValue]:"Cannot cast value to the required data type"};class s extends Error{constructor(e,t){super((0,i.HC)(o[e],t)),this.declaredRootClass="esri.arcade.featureset.support.sqlerror",Error.captureStackTrace&&Error.captureStackTrace(this,s)}}},95466:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(49186),a=n(25482),i=n(53966),o=n(91869),s=n(3330),u=n(30524),l=n(98623),c=n(56400),d=n(96285);const f=new Map;class m{static fromJSON(e){return new m(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new m(e.fields??[],w(e))}static fromLayerJSON(e){return new m(e.fields??[],w(e))}constructor(e=[],t){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;const n=[];for(const e of this.fields){const t=e?.name,r=p(t);if(t&&r){const a=h(t);this._fieldsMap.set(t,e),this._fieldsMap.set(a,e),this._normalizedFieldsMap.set(r,e),n.push(`${a}:${e.type}:${this._timeZoneByFieldName?.get(t)}`),(0,u.vE)(e)?(this.dateFields.push(e),this._dateFieldsSet.add(e)):(0,u.WA)(e)&&(this._numericFieldsSet.add(e),this.numericFields.push(e)),(0,u.te)(e)||(0,u.Xz)(e)||(e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable)}}n.sort(),this.uid=n.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,u.te)(e)||(0,u.Xz)(e)||e.nullable||void 0!==(0,u.lD)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||(t=this._fieldsMap.get(h(e))??this._normalizedFieldsMap.get(p(e)),t&&this._fieldsMap.set(e,t),t)}getTimeZone(e){const t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(i.A.getLogger("esri.layers.support.FieldsIndex").errorOnce(new r.A("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),l.n$):v.has(t.type)?l.L5:null:null}getLuxonTimeZone(e){const t=this.getTimeZone(e);return t?t===l.L5?s.GB.instance:t===l.n$?d.mQ.utcInstance:(0,o.tE)(f,t,(()=>d.oh.create(t))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,u.OH)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map((e=>a.A.isSerializable(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function h(e){return e.trim().toLowerCase()}function p(e){return(0,u.rS)(e)?.toLowerCase()??""}const v=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function w(e){const t=new Map;if(!e.fields)return t;const n=!0===e.datesInUnknownTimezone,{timeInfo:r,editFieldsInfo:a}=e,i=(r?"startField"in r?r.startField:r.startTimeField:"")??"",o=(r?"endField"in r?r.endField:r.endTimeField:"")??"",s=function(e){return"dateFieldsTimeZone"in e}(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,c.ZS)(e.dateFieldsTimeReference):null,u=a?function(e){return"timeZone"in e}(a)?a.timeZone??s:a.dateFieldsTimeReference?(0,c.ZS)(a.dateFieldsTimeReference):s??l.n$:null,d=r?function(e){return"timeZone"in e}(r)?r.timeZone??s:r.timeReference?(0,c.ZS)(r.timeReference):s:null,f=new Map([[h(a?.creationDateField??""),u],[h(a?.editDateField??""),u],[h(i),d],[h(o),d]]);for(const{name:r,type:a}of e.fields)if(v.has(a))t.set(r,l.L5);else if("date"!==a&&"esriFieldTypeDate"!==a)t.set(r,null);else if(n)t.set(r,l.L5);else{const e=f.get(h(r??""))??s;t.set(r,e)}return t}}}]);