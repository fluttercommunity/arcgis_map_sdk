"use strict";(self.webpackChunkarcgis_webpack01=self.webpackChunkarcgis_webpack01||[]).push([[19932],{27305:(t,a,e)=>{var i;e.d(a,{d:()=>i}),function(t){t[t.TRANSLATE_Z=0]="TRANSLATE_Z",t[t.TRANSLATE_XY=1]="TRANSLATE_XY",t[t.SCALE=2]="SCALE",t[t.ROTATE=3]="ROTATE",t[t.SCALE_ROTATE=4]="SCALE_ROTATE"}(i||(i={}))},12937:(t,a,e)=>{e.d(a,{w:()=>n});var i=e(2902);class n extends i.b{constructor(){super(...arguments),this._interactive=!0}get interactive(){return this._interactive}set interactive(t){this._interactive!==t&&(this._interactive=t),this._updateManipulatorInteractivity()}_updateManipulatorInteractivity(){const t=!this.grabbing&&this._interactive;this.forEachManipulator((a=>{a.interactive=t||a.grabbing}))}}},2902:(t,a,e)=>{e.d(a,{b:()=>n});var i=e(46707);class n{constructor(){this._available=!0}set location(t){this._forEachManipulator3D((a=>a.location=t))}set elevationAlignedLocation(t){this._forEachManipulator3D((a=>a.elevationAlignedLocation=t))}set elevationInfo(t){this._forEachManipulator3D((a=>a.elevationInfo=t))}get renderLocation(){let t;return this._forEachManipulator3D((a=>{t||(t=a.renderLocation)})),t}set renderLocation(t){this._forEachManipulator3D((a=>a.renderLocation=t))}get available(){return this._available}set available(t){this._available=t,this._forEachManipulator3D((a=>a.available=t))}get hovering(){return this.someManipulator((t=>t.hovering))}get grabbing(){return this.someManipulator((t=>t.grabbing))}get dragging(){return this.someManipulator((t=>t.dragging))}get selected(){return this.someManipulator((t=>t.selected))}hasManipulator(t){return this.someManipulator((a=>a===t))}someManipulator(t){let a=!1;return this.forEachManipulator((e=>{!a&&t(e)&&(a=!0)})),a}_forEachManipulator3D(t){this.forEachManipulator(((a,e)=>{a instanceof i.Z&&t(a,e)}))}}},19932:(t,a,e)=>{e.d(a,{p:()=>k,b:()=>N});var i=e(44584),n=e(23148),s=e(39994),r=e(76868),o=e(27305),l=e(44789),u=e(12937),c=e(30936),h=e(31355),d=e(61681),p=e(32114),_=e(3308),M=e(86717),f=e(81095),g=e(68817),m=e(46707),v=e(88698),w=e(81536),A=e(2902),y=e(93793),x=e(70984),E=e(6087),T=e(7358),S=e(84891),b=e(76478),D=e(91258);class P extends A.b{constructor(t){super(),this._handles=new i.Z,this._arrowManipulatorInfos=new Array,this._angle=0,this._scale=1,this._radius=l.dB,this._updateAfterDrag=!1,this.events=new h.Z,this._tool=t.tool,this._view=t.view,this._opaqueMaterial=this._createMaterial(),this._transparentMaterial=this._createMaterial(.5),null!=t.radius&&(this._radius=t.radius),this._createManipulators(),this.forEachManipulator((t=>this._tool.manipulators.add(t)))}set orthogonalAvailable(t){this._arrowManipulatorInfos.length>=3&&(this._arrowManipulatorInfos[1].manipulator.available=t,this._arrowManipulatorInfos[3].manipulator.available=t)}destroy(){this._handles=(0,d.SC)(this._handles),this.forEachManipulator((t=>{this._tool.manipulators.remove(t),t.destroy()})),this._tool=null,this._view=null,this._arrowManipulatorInfos.length=0}forEachManipulator(t){for(const{manipulator:a}of this._arrowManipulatorInfos)t(a,o.d.TRANSLATE_XY)}createManipulatedObjectDragPipeline(t,a,e){if(!a.operations)return(0,n.kB)();const i=a.operations.data.spatialReference,s=a.graphic;return(0,y.$)(a,e,(e=>this.createDragPipeline(((a,i,n,s,r)=>(({steps:i,cancel:n}=t(a,i,n,s,r)),e(a,i,n))),a.elevationInfo,i,s)))}createDragPipeline(t,a,e,i){return(0,n.AL)(this._arrowManipulatorInfos.map((({manipulator:n},s)=>(0,b.Xd)(n,((n,r,l,u,c)=>{const h=r.next((t=>({...t,manipulatorType:o.d.TRANSLATE_XY}))).next((0,b.kY)(this._view,n.elevationAlignedLocation)).next((0,w.G)(this._view,n.elevationAlignedLocation,a,e,i)).next((0,b.M2)(n.location,this.angle+(s+1)*Math.PI*.5)).next((0,b.zh)());t(n,h,l,u,c)})))))}get angle(){return this._angle}set angle(t){this._angle=t,this.dragging?this._updateAfterDrag=!0:this._updateManipulatorTransform()}get displayScale(){return this._scale}set displayScale(t){this._scale=t,this._updateManipulatorTransform()}get radius(){return this._radius}set radius(t){this._radius!==t&&(this._radius=t,this._updateManipulators())}_updateManipulators(){for(let t=0;t<this._arrowManipulatorInfos.length;t++)this._updateArrowManipulator(this._arrowManipulatorInfos[t],t);this._updateManipulatorTransform()}_updateArrowManipulator({manipulator:t,transform:a},e){const i=this._radius/l.dB,n=l.fJ*i,s=n*Math.sqrt(3)/2,r=(0,E.DA)(this._opaqueMaterial,s,n/2,n/2,l.PM);(0,E.mx)(r,(0,p.vc)(g.MP.get(),(0,M.i)(g.WM.get(),0,-s/3,0))),t.renderObjects=[new v.r(r,D.Q9.Focused),new v.r(r.instantiate({material:this._transparentMaterial}),D.Q9.Unfocused)],t.radius=s/3*2*1.2;const o=(0,p.QO)(g.MP.get(),e*Math.PI/2),u=(0,p.vc)(g.MP.get(),(0,M.i)(g.WM.get(),0,l.ou*i,0));(0,p.Jp)(a,o,u)}_createManipulators(){for(let t=0;t<4;t++){const a=this._createArrowManipulator(t);this._arrowManipulatorInfos.push(a)}this._updateManipulatorTransform()}_updateManipulatorTransform(){const t=this.angle,a=(0,p.Us)(g.MP.get(),t,(0,f.al)(0,0,1));if(null==a)return;const e=(0,p.xJ)(g.MP.get(),(0,M.i)(g.WM.get(),this.displayScale,this.displayScale,this.displayScale)),i=(0,p.Jp)(g.MP.get(),e,a);for(const t of this._arrowManipulatorInfos){const a=(0,p.Jp)(g.MP.get(),i,t.transform);t.manipulator.modelTransform=a}}_createArrowManipulator(t){const a=new m.Z({view:this._view,autoScaleRenderObjects:!1,worldOriented:!0,focusMultiplier:1,touchMultiplier:1,collisionType:{type:"disc",direction:(0,f.al)(0,0,1)}}),e={manipulator:a,transform:(0,_.Ue)()};return this._updateArrowManipulator(e,t),this._handles.add(a.events.on("drag",(t=>{this._updateAfterDrag&&"end"===t.action&&!this.dragging&&(this._updateManipulatorTransform(),this._updateAfterDrag=!1)}))),e}_createMaterial(t=1){const a=new S.E({cullFace:x.Vr.Back,renderOccluded:T.yD.Transparent,isDecoration:!0});return this._handles.add((0,r.watch)((()=>c.Z.toUnitRGBA(this._view.effectiveTheme.accentColor)),(e=>{e[3]*=t,a.setParameters({color:e})}),r.initial)),a}get test(){}}var O=e(83772);class L{constructor(){this._view=null,this._elevationInfo=null,this._lastDragEvent=null,this._next=null,this._enabled=!1}get enabled(){return this._enabled}set enabled(t){if(this._enabled!==t&&null!=this._lastDragEvent&&null!=this._next){const a=this._lastDragEvent.mapEnd,e=this._snap(this._lastDragEvent.screenEnd);if(null!=e){const i={action:"update",mapStart:this._lastDragEvent.mapStart,mapEnd:!0===t?e:a,screenStart:this._lastDragEvent.screenEnd,screenEnd:this._lastDragEvent.screenEnd};this._next.execute(i)}}this._enabled=t}_snap(t){const a=null!=this._view?this._view.toMap(t,{exclude:[]}):null;return null!=a&&null!=this._view&&(a.z=(0,O.Ou)(a,this._view,this._elevationInfo)),a}createDragEventPipelineStep(t,a){this._view=t,this._elevationInfo=a,this._lastDragEvent=null;const e=new b.hM;return this._next=e,[t=>{if(this._lastDragEvent="end"!==t.action?{...t}:null,this._enabled){const a=this._snap(t.screenEnd);return null!=a?{action:t.action,mapStart:t.mapStart,mapEnd:a,screenStart:t.screenStart,screenEnd:t.screenEnd}:null}return{action:t.action,mapStart:t.mapStart,mapEnd:t.mapEnd,screenStart:t.screenStart,screenEnd:t.screenEnd}},e]}}class I extends A.b{constructor(t){super(),this._handles=new i.Z,this._snapToScene=new L,this._scale=1,this._radius=l.dB,this._view=t.view,this._tool=t.tool,this._discMaterial=this._createMaterial(),this._discMaterialTransparent=this._createMaterial(.5),null!=t.snapToScene&&(this.snapToScene=t.snapToScene),null!=t.radius&&(this._radius=t.radius),this._createManipulator(),this.forEachManipulator((t=>this._tool.manipulators.add(t)))}destroy(){this._handles=(0,d.SC)(this._handles),this.forEachManipulator((t=>{this._tool.manipulators.remove(t),t.destroy()})),this._tool=null,this._view=null,this._manipulator=null}forEachManipulator(t){t(this._manipulator,o.d.TRANSLATE_XY)}get displayScale(){return this._scale}set displayScale(t){this._scale=t,this._updateManipulatorTransform()}get snapToScene(){return this._snapToScene.enabled}set snapToScene(t){this._snapToScene.enabled=t}get radius(){return this._radius}set radius(t){t!==this._radius&&(this._radius=t,this._updateManipulator())}get discManipulator(){return this._manipulator}createManipulatedObjectDragPipeline(t,a,e){if(!a.operations)return(0,n.kB)();const i=a.graphic,s=a.elevationInfo,r=a.operations.data.spatialReference;return(0,y.$)(a,e,(a=>this.createDragPipeline(((e,i,n,s,r)=>(({steps:i,cancel:n}=t(e,i,n,s,r)),a(e,i,n))),s,r,i)))}createDragPipeline(t,a,e,i){const n=this._view;return(0,b.Xd)(this._manipulator,((s,r,l,u,c)=>{const h=r.next((0,b.kY)(n,s.elevationAlignedLocation)).next((0,w.G)(n,s.elevationAlignedLocation,a,e,i)).next(...this._snapToScene.createDragEventPipelineStep(n,a)).next((t=>({...t,manipulatorType:o.d.TRANSLATE_XY}))).next((0,b.zh)());t(s,h,l,u,c)}))}_updateManipulatorTransform(){const t=(0,p.xJ)(g.MP.get(),(0,M.i)(g.WM.get(),this.displayScale,this.displayScale,this.displayScale));this._manipulator.modelTransform=t}_createManipulator(){const t=this._view;this._manipulator=new m.Z({view:t,worldSized:!1,autoScaleRenderObjects:!1,focusMultiplier:1,touchMultiplier:1,collisionType:{type:"disc",direction:(0,f.al)(0,0,1)},worldOriented:!0}),this._updateManipulator()}_updateManipulator(){const t=(0,E.nb)(this._discMaterial,l.PM,1,l.NH,(0,f.al)(0,0,1),(0,f.al)(0,0,0));t.transformation=(0,p.xJ)((0,_.Ue)(),(0,f.al)(this._radius,this._radius,this._radius)),this._manipulator.renderObjects=[new v.r(t,D.Q9.Focused),new v.r(t.instantiate({material:this._discMaterialTransparent}),D.Q9.Unfocused)],this._manipulator.radius=l.sO*(this._radius/l.dB)}_createMaterial(t=1){const a=new S.E({cullFace:x.Vr.Back,renderOccluded:T.yD.Transparent,isDecoration:!0});return this._handles.add((0,r.watch)((()=>c.Z.toUnitRGBA(this._view.effectiveTheme.accentColor)),(e=>{e[3]*=t,a.setParameters({color:e})}),r.initial)),a}get test(){}}var R=e(39043),X=e(19431),Z=e(74390),z=e(13540);class U extends A.b{constructor(t){super(),this._radius=l.dB,this.events=new h.Z,this._tool=t.tool,this._view=t.view;const a=new z.Z({getTheme:()=>this._view.effectiveTheme});this._settings=a,null!=t.radius&&(this._radius=t.radius);const e=this._view.effectiveTheme.accentColor;this._materials={materialUnfocused:(0,Z.EA)(Y(e,1,.25),T.yD.Occlude),materialFocused:(0,Z.EA)(Y(e,1,0),T.yD.Occlude),materialOccludedUnfocused:(0,Z.EA)(Y(e,.7,0),a.zManipulator.renderOccluded),materialOccludedFocused:(0,Z.EA)(Y(e,.85,0),a.zManipulator.renderOccluded)},this._themeHandle=(0,r.watch)((()=>this._view.effectiveTheme.accentColor),(t=>{const a=Y(t,1,.25),e=Y(t,1,0),i=Y(t,.7,0),n=Y(t,.85,0),{materialUnfocused:s,materialFocused:r,materialOccludedUnfocused:o,materialOccludedFocused:l}=this._materials;s.setParameters({color:a}),r.setParameters({color:e}),o.setParameters({color:i}),l.setParameters({color:n})})),this._createManipulator(),this.forEachManipulator((t=>this._tool.manipulators.add(t)))}destroy(){this._themeHandle=(0,d.hw)(this._themeHandle),this._manipulator.applyObjectTransform=F,this.forEachManipulator((t=>{this._tool.manipulators.remove(t),t.destroy()}))}forEachManipulator(t){t(this._manipulator,o.d.TRANSLATE_Z)}createManipulatedObjectDragPipeline(t,a,e){if(!a.operations)return(0,n.kB)();const i=a.operations.data.spatialReference;return(0,y.$)(a,e,(a=>this.createDragPipeline(((e,i,n,s,r)=>(({steps:i,cancel:n}=t(e,i,n,s,r)),a(e,i,n))),i)))}createDragPipeline(t,a){const e=this._view;return(0,b.Xd)(this._manipulator,((i,n,s,r,l)=>{const u=n.next((t=>({...t,manipulatorType:o.d.TRANSLATE_Z}))).next((0,w.Sp)(e,i.renderLocation,a)).next((0,b.zh)());t(i,u,s,r,l)}))}get radius(){return this._radius}set radius(t){t!==this._radius&&(this._radius=t,this._updateManipulator())}_updateManipulator(){const t=this._settings,a=this._radius/l.dB,e=t.zManipulator.height*a,i=t.zManipulator.coneHeight*a,n=t.zManipulator.coneWidth*a,s=t.zManipulator.width*a,r=[(0,f.al)(0,0,0),(0,f.al)(0,0,e)],o=[(0,f.al)(0,0,0),(0,f.al)(0,0,e+i)],u=(()=>{const t=(0,_.Ue)();return(0,p.Iu)(t,t,[0,0,e]),(0,p.lM)(t,t,Math.PI/2),t})(),{materialUnfocused:c,materialFocused:h,materialOccludedUnfocused:d,materialOccludedFocused:M}=this._materials,g=(0,E.PD)(c,r,s/2,16,!1),m=(0,E.QL)(c,i,n/2,16,!1);m.transformation=u,this._manipulator.renderObjects=[new v.r(m,D.Q9.Unfocused),new v.r(g,D.Q9.Unfocused),new v.r(m.instantiate({material:h}),D.Q9.Focused),new v.r(g.instantiate({material:h}),D.Q9.Focused),new v.r(m.instantiate({material:d}),D.Q9.Unfocused),new v.r(g.instantiate({material:d}),D.Q9.Unfocused),new v.r(m.instantiate({material:M}),D.Q9.Focused),new v.r(g.instantiate({material:M}),D.Q9.Focused)],this._manipulator.radius=s/2+2,this._manipulator.collisionType={type:"line",paths:[o]}}_createManipulator(){const t=this._view,a=new m.Z({view:t,autoScaleRenderObjects:!1,worldSized:!1,selectable:!1,cursor:"ns-resize",elevationInfo:this.elevationInfo,worldOriented:!0,collisionPriority:1.6});a.applyObjectTransform=a=>{const e=t.state.camera,i=j;t.renderCoordsHelper.toRenderCoords(this._manipulator.elevationAlignedLocation,i);const n=(0,M.G)(e.eye,i),s=e.computeRenderPixelSizeAtDist(n),r=(0,M.d)(B,i,e.eye);(0,M.n)(r,r);const o=C;t.renderCoordsHelper.worldUpAtPosition(j,o);const u=Math.abs((0,M.f)(r,o)),c=(0,M.e)(B,r,o),h=(0,M.e)(B,c,o),d=(0,X.uZ)(u,.01,1),p=1-Math.sqrt(1-d*d)/d/e.fullWidth,_=this._settings,f=this._radius/l.dB,g=_.zManipulator.width*f;(0,M.h)(h,(0,M.n)(h,h),(1/p-1)*n+s*g),a[12]-=B[0],a[13]-=B[1],a[14]-=B[2]},this._manipulator=a,this._updateManipulator()}get test(){}}function Y(t,a,e){const i=(0,R._j)(t,e);return i.a*=a,c.Z.toUnitRGBA(i)}const j=(0,f.Ue)(),B=(0,f.Ue)(),C=(0,f.Ue)(),F=()=>{};class N extends u.w{constructor(t){super(),this._handles=new i.Z;const{tool:a,view:e,snapToScene:n,radius:s}=t;this._view=e,this.xyManipulation=new I({tool:a,view:e,snapToScene:n,radius:s}),this.xyAxisManipulation=new P({tool:a,view:e,radius:s}),this.zManipulation=new U({tool:a,view:e,radius:s}),this.xyManipulation.available=t.xyAvailable,this.xyAxisManipulation.available=t.xyAxisAvailable,this.zManipulation.available=t.zAvailable,this._autoHideXYAxis(),this.forEachManipulator((t=>this._handles.add(t.events.on("grab-changed",(()=>this._updateManipulatorInteractivity())))))}destroy(){this._handles.destroy(),this.xyManipulation.destroy(),this.xyAxisManipulation.destroy(),this.zManipulation.destroy()}createManipulatedObjectDragPipeline(t,a,e){return(0,n.AL)([this.xyManipulation.createManipulatedObjectDragPipeline(((a,e,i,n,s)=>t(k.XY,a,e,i,n,s)),a,e),this.xyAxisManipulation.createManipulatedObjectDragPipeline(((a,e,i,n,s)=>t(k.XY_AXIS,a,e,i,n,s)),a,e),this.zManipulation.createManipulatedObjectDragPipeline(((a,e,i,n,s)=>t(k.Z,a,e,i,n,s)),a,e)])}createDragPipeline(t,a,e,i){return(0,n.AL)([this.xyManipulation.createDragPipeline(((a,e,i,n,s)=>t(k.XY,a,e,i,n,s)),a,e,i),this.xyAxisManipulation.createDragPipeline(((a,e,i,n,s)=>t(k.XY_AXIS,a,e,i,n,s)),a,e,i),this.zManipulation.createDragPipeline(((a,e,i,n,s)=>t(k.Z,a,e,i,n,s)),e)])}set snapToScene(t){this.xyManipulation.snapToScene=t}set angle(t){this.xyAxisManipulation.angle=t}set radius(t){this.xyAxisManipulation.radius=t,this.xyManipulation.radius=t,this.zManipulation.radius=t}set displayScale(t){this.xyManipulation.displayScale=t,this.xyAxisManipulation.displayScale=t}forEachManipulator(t){this.xyManipulation.forEachManipulator((a=>t(a,o.d.TRANSLATE_XY))),this.xyAxisManipulation.forEachManipulator((a=>t(a,o.d.TRANSLATE_XY))),this.zManipulation.forEachManipulator((a=>t(a,o.d.TRANSLATE_Z)))}get _xyAxisVisible(){const t=this.xyManipulation.someManipulator((t=>t.focused))||this.xyAxisManipulation.someManipulator((t=>t.focused));return this._view.inputManager&&"touch"===this._view.inputManager.latestPointerType||t}_autoHideXYAxis(){const t=this.xyAxisManipulation,a=this.xyManipulation;if((0,s.Z)("esri-mobile"))return;const e=[];a.forEachManipulator((t=>e.push(t))),t.forEachManipulator((t=>e.push(t)));const i=()=>{const a=[];this._xyAxisVisible||t.forEachManipulator((t=>a.push(t.disableDisplay()))),this._handles.remove(Q),this._handles.add(a,Q)};for(const t of e)this._handles.add(t.events.on("focus-changed",i));this._view.inputManager&&this._handles.add((0,r.when)((()=>this._view.inputManager?.latestPointerType),i)),i()}static radiusForSymbol(t){const a=null!=t&&"point-3d"===t.type&&t.symbolLayers;return a&&a.some((t=>"icon"===t.type))?l.E5:l.dB}}const Q="disable-xy-axis-display";var k,H;(H=k||(k={}))[H.XY=0]="XY",H[H.XY_AXIS=1]="XY_AXIS",H[H.Z=2]="Z"},44789:(t,a,e)=>{e.d(a,{$8:()=>b,An:()=>x,Az:()=>d,CA:()=>c,E5:()=>u,Fv:()=>g,Ls:()=>E,NH:()=>i,PM:()=>r,Rn:()=>D,Sn:()=>v,UC:()=>_,Xt:()=>p,YK:()=>A,_P:()=>y,_v:()=>h,dB:()=>n,f2:()=>w,fJ:()=>o,j6:()=>T,oB:()=>S,ou:()=>l,qi:()=>M,sO:()=>s,uA:()=>f,xf:()=>m});const i=128,n=70,s=80,r=.02,o=54,l=100,u=Math.ceil(n/3*2),c=160,h=.5,d=24,p=9,_=c+30,M=c+53,f=60,g=23,m=5*Math.PI/12,v=1*Math.PI/3,w=10,A=.2,y=30,x=53,E=.2,T=.3,S=200,b=3,D=1e6},93793:(t,a,e)=>{e.d(a,{$:()=>n,h:()=>s});var i=e(76478);function n(t,a,e){const n=(e,i)=>{a({action:e,object:t,dxScreen:i.screenDeltaX,dyScreen:i.screenDeltaY})};return e(((a,e,s)=>(e.next((t=>("start"===t.action&&n("start",t),t))).next((0,i.$Q)(t)).next((t=>{switch(t.action){case"start":case"update":(t.translationX||t.translationY||t.translationZ)&&n("update",t);break;case"end":n("end",t)}return t})),{steps:e,cancel:s=s.next((0,i.uI)(t)).next((t=>(n("end",{screenDeltaX:0,screenDeltaY:0}),t)))})))}function s(t){if(null==t?.axis)return 1;const{mapStart:a,mapEnd:e,axis:i}=t,n=[e.x-a.x,e.y-a.y];return n[0]*i[0]+n[1]*i[1]>0?1:-1}}}]);