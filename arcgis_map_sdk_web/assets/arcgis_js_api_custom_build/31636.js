"use strict";(self.webpackChunkarcgis_webpack01=self.webpackChunkarcgis_webpack01||[]).push([[31636,8060],{8060:(e,t,r)=>{r.r(t),r.d(t,{getGeometryServiceURL:()=>l,projectGeometry:()=>p});var i=r(51366),s=r(70375),n=r(93968),o=r(94466),a=r(41268);async function l(e=null,t){if(i.Z.geometryServiceUrl)return i.Z.geometryServiceUrl;if(!e)throw new s.Z("internal:geometry-service-url-not-configured");let r;r="portal"in e?e.portal||n.Z.getDefault():e,await r.load({signal:t});const o=r.helperServices?.geometry?.url;if(!o)throw new s.Z("internal:geometry-service-url-not-configured");return o}async function p(e,t,r=null,i){const n=await l(r,i),p=new a.Z({geometries:[e],outSpatialReference:t}),d=await(0,o.i)(n,p,{signal:i});if(d&&Array.isArray(d)&&1===d.length)return d[0];throw new s.Z("internal:geometry-service-projection-failed")}},94466:(e,t,r)=>{r.d(t,{i:()=>d});var i=r(66341),s=r(7283),n=r(53736),o=r(84238),a=r(5167),l=r(41268);const p=(0,s.se)(l.Z);async function d(e,t,r){t=p(t);const s=(0,o.en)(e),l={...s.query,f:"json",...t.toJSON()},d=t.outSpatialReference,c=(0,n.Ji)(t.geometries[0]),u=(0,o.lA)(l,r);return(0,i.Z)(s.path+"/project",u).then((({data:{geometries:e}})=>(0,a.o)(e,c,d)))}},41268:(e,t,r)=>{r.d(t,{Z:()=>c});var i=r(36663),s=r(82064),n=r(81977),o=(r(39994),r(13802),r(4157),r(40266)),a=r(14685),l=r(53736),p=r(35925);let d=class extends s.Z{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((e=>e.toJSON())),t=this.geometries[0],r={};return r.outSR=(0,p.B9)(this.outSpatialReference),r.inSR=(0,p.B9)(t.spatialReference),r.geometries=JSON.stringify({geometryType:(0,l.Ji)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};(0,i._)([(0,n.Cb)()],d.prototype,"geometries",void 0),(0,i._)([(0,n.Cb)({type:a.Z,json:{read:{source:"outSR"}}})],d.prototype,"outSpatialReference",void 0),(0,i._)([(0,n.Cb)()],d.prototype,"transformation",void 0),(0,i._)([(0,n.Cb)()],d.prototype,"transformForward",void 0),d=(0,i._)([(0,o.j)("esri.rest.support.ProjectParameters")],d);const c=d},31636:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var i=r(36663),s=r(70375),n=r(61681),o=r(76868),a=r(81977),l=(r(39994),r(13802),r(4157),r(40266)),p=r(28800),d=r(86356),c=r(95484),u=r(36025),h=r(70633),y=r(53986),g=r(53448),f=r(26216),v=r(67235);let b=class extends((0,p.A)(f.Z)){constructor(){super(...arguments),this.type="graphics-3d",this.symbologySnappingSupported=!0,this._slicePlaneEnabled=!1,this.fullExtentInLocalViewSpatialReference=null,this.ignoresMemoryFactor=!0}get highlightOptions(){return null}initialize(){this._set("processor",new c.D({owner:this,scaleVisibilityEnabled:!0,frustumVisibilityEnabled:!0})),this.addResolvingPromise(this.processor.initializePromise),this.addHandles(this.layer.on("graphic-update",(e=>this.processor.graphicsCore.graphicUpdateHandler(e)))),this.layer.internal?this.notifyChange("updating"):(this.addResolvingPromise((0,y.E)(this).then((e=>this.fullExtentInLocalViewSpatialReference=e))),this.addHandles((0,o.gx)((()=>this.view?.basemapTerrain?.ready),(()=>()=>this.notifyChange("updating")),{once:!0})))}destroy(){this._updatingHandles.removeAll(),this._set("processor",(0,n.SC)(this.processor))}get loadedGraphics(){return this.layer.graphics}get legendEnabled(){return this.canResume()&&!this.processor?.frustumVisibilitySuspended}get visibleAtCurrentScale(){return!this.processor?.scaleVisibilitySuspended}get slicePlaneEnabled(){const e=this.layer.internal;return this._slicePlaneEnabled&&!e}set slicePlaneEnabled(e){this._slicePlaneEnabled=e}getSuspendInfo(){const e=super.getSuspendInfo();return e.outsideOfView=this.processor?.frustumVisibilitySuspended??!1,e}getHit(e){return this.processor.getHit(e)}whenGraphicBounds(e,t){return this.processor.whenGraphicBounds(e,t)}computeAttachmentOrigin(e,t){return this.processor?.computeAttachmentOrigin(e,t)}getSymbolLayerSize(e,t){return this.processor.getSymbolLayerSize(e,t)}queryGraphics(){return Promise.resolve(this.loadedGraphics)}maskOccludee(e){return this.processor.maskOccludee(e)}highlight(e,t){return this.processor.highlight(e,t?.name??v.b)}async elevationAlignPointsInFeatures(e,t){const{processor:r}=this;if(null==r?.graphics3DGraphics)throw new s.Z("graphicslayerview3d:missing-processor","A Graphics3D processor is needed to resolve graphics elevation.");const{graphics3DGraphics:i}=r;return(0,d.W)(this.view,this.layer,(e=>"number"==typeof e?i.get(e):void 0),e,t)}async queryForSymbologySnapping(e,t){return(0,u.c)(this.processor,e,t)}get updatePolicy(){return this.processor?.graphicsCore.effectiveUpdatePolicy||g.j.SYNC}isUpdating(){return this.view&&this.layer&&!(!this.processor?.updating&&(this.layer.internal||this.view.basemapTerrain?.ready))}get performanceInfo(){return new h.W(this.usedMemory,this.loadedGraphics.length,-1,-1)}get usedMemory(){return this.processor?.graphicsCore?.usedMemory??0}get unloadedMemory(){return this.processor?.graphicsCore?.unprocessedMemoryEstimate}get test(){return{graphics3DProcessor:this.processor,loadedGraphics:this.loadedGraphics}}};(0,i._)([(0,a.Cb)()],b.prototype,"highlightOptions",null),(0,i._)([(0,a.Cb)()],b.prototype,"loadedGraphics",null),(0,i._)([(0,a.Cb)({readOnly:!0})],b.prototype,"legendEnabled",null),(0,i._)([(0,a.Cb)()],b.prototype,"layer",void 0),(0,i._)([(0,a.Cb)({readOnly:!0})],b.prototype,"processor",void 0),(0,i._)([(0,a.Cb)({readOnly:!0})],b.prototype,"visibleAtCurrentScale",null),(0,i._)([(0,a.Cb)()],b.prototype,"_slicePlaneEnabled",void 0),(0,i._)([(0,a.Cb)({type:Boolean})],b.prototype,"slicePlaneEnabled",null),b=(0,i._)([(0,l.j)("esri.views.3d.layers.GraphicsLayerView3D")],b);const m=b},28800:(e,t,r)=>{r.d(t,{A:()=>d});var i=r(36663),s=r(23148),n=r(78668),o=r(76868),a=r(81977),l=(r(39994),r(13802),r(4157),r(40266)),p=r(64862);const d=e=>{let t=class extends e{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(){super.postscript(),(0,p.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const e=new AbortController,t=e.signal;this.addHandles((0,s.kB)((()=>e.abort()))),await(0,o.N1)((()=>this.view.defaultsFromMap?.heightModelInfoReady),t),(0,n.k_)(t);const r=(0,p.Wt)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(r)throw r}};return(0,i._)([(0,a.Cb)()],t.prototype,"view",void 0),(0,i._)([(0,a.Cb)()],t.prototype,"slicePlaneEnabled",void 0),t=(0,i._)([(0,l.j)("esri.views.3d.layers.LayerView3D")],t),t}},86356:(e,t,r)=>{r.d(t,{W:()=>u});var i=r(78668),s=r(81095),n=r(14685),o=r(57022),a=r(98196),l=r(83772),p=r(63669),d=r(29642),c=r(64487);async function u(e,t,r,u,h){const{elevationProvider:y,renderCoordsHelper:g}=e,{elevationInfo:f}=t,{pointsInFeatures:v,spatialReference:b}=u,m=n.Z.fromJSON(b),w=(0,c.WI)(f,!0),S=await(0,c.kr)(w,m,h);(0,i.k_)(h);const C=[],_=new Set,R=new Set,E=new d.o,I=(0,a.T)(0,0,0,n.Z.WGS84),O=new p.Lm,P=(0,s.Ue)();I.spatialReference=m;const Z=e.elevationProvider.spatialReference??e.spatialReference;for(const{objectId:e,points:i}of v){const s=r(e);if(null==s){for(const e of i)C.push(e.z??0);_.add(e);continue}s.isDraped&&R.add(e);const n=s.graphic.geometry;E.setFromElevationInfo((0,l.Jn)(n,f)),E.updateFeatureExpressionInfoContext(S,s.graphic,t);for(const{x:e,y:t,z:r}of i)I.x=e,I.y=t,I.z=r??0,await(0,o.U)(I,P,Z,0,{signal:h}),(0,p.qZ)(P,y,E,g,O),C.push(O.z)}return{elevations:C,drapedObjectIds:R,failedObjectIds:_}}},36025:(e,t,r)=>{r.d(t,{c:()=>n});var i=r(78668),s=r(30879);async function n(e,t,r){if(null==e||0===t.candidates.length)return o;const n=e.graphics3DGraphicsByObjectID??e.graphics3DGraphics,a=[],l=[],{renderer:p}=e,d=null!=p&&"arcadeRequired"in p&&p.arcadeRequired?(0,s.LC)():null,c=async(t,{graphic:i,graphics3DSymbol:s})=>{const n=await d,o=await e.getRenderingInfoAsync(i,p,n,{signal:r});return null==o?[]:s.queryForSnapping(t,h,o,r)},{candidates:u,spatialReference:h}=t;for(let e=0;e<u.length;++e){const t=u[e],{objectId:r}=t,i="number"==typeof r?n?.get(r):void 0;if(null==i)continue;const{graphics3DSymbol:s}=i;s.symbologySnappingSupported&&(a.push(c(t,i)),l.push(e))}if(0===a.length)return o;const y=await Promise.all(a);(0,i.k_)(r);const g=[],f=[];for(let e=0;e<y.length;++e){const t=y[e],r=l[e];for(const e of t)g.push(e),f.push(r)}return{candidates:g,sourceCandidateIndices:f}}const o={candidates:[],sourceCandidateIndices:[]}},53986:(e,t,r)=>{r.d(t,{E:()=>n});var i=r(39536),s=r(8060);async function n(e){const t=e.view.spatialReference,r=e.layer.fullExtent,n=null!=r&&r.spatialReference;if(null==r||!n)return null;if(n.equals(t))return r.clone();const o=(0,i.iV)(r,t);if(null!=o)return o;if(e.view.state.isLocal)try{const i=await(0,s.projectGeometry)(r,t,e.layer.portalItem);return e.destroyed||null==i?null:i}catch{return null}return null}},26216:(e,t,r)=>{r.d(t,{Z:()=>g});var i=r(36663),s=r(74396),n=r(31355),o=r(86618),a=r(13802),l=r(61681),p=r(64189),d=r(81977),c=(r(39994),r(4157),r(40266)),u=r(98940),h=r(42780);let y=class extends(o.Z.IdentifiableMixin(p.Z.EsriPromiseMixin(n.Z.EventedMixin(s.Z)))){get spatialReferenceSupported(){return!0}constructor(e){super(e),this._updatingHandles=new u.R,this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",r=this.layer?.title||"no title";a.Z.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e)}}))}destroy(){this._updatingHandles=(0,l.SC)(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome("visible",e)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){const e=this.view.timeExtent,t=this.layer?.visibilityTimeExtent;return!e||!t||!e.intersection(t).isEmpty}canResume(){const e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&this.parent&&!this.parent.suspended&&this.view?.ready&&(0,h.Cy)(e)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){const e=this.parent?.suspended?this.parent.suspendInfo:{};this.view?.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0);const t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return(0,h.Cy)(t)&&this.visibleAtCurrentScale||(e.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(e.outsideVisibilityTimeExtent=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};(0,i._)([(0,d.Cb)({readOnly:!0})],y.prototype,"spatialReferenceSupported",null),(0,i._)([(0,d.Cb)()],y.prototype,"view",void 0),(0,i._)([(0,d.Cb)()],y.prototype,"fullOpacity",null),(0,i._)([(0,d.Cb)()],y.prototype,"layer",void 0),(0,i._)([(0,d.Cb)()],y.prototype,"parent",void 0),(0,i._)([(0,d.Cb)({readOnly:!0})],y.prototype,"suspended",null),(0,i._)([(0,d.Cb)({readOnly:!0})],y.prototype,"suspendInfo",null),(0,i._)([(0,d.Cb)({readOnly:!0})],y.prototype,"legendEnabled",null),(0,i._)([(0,d.Cb)({type:Boolean,readOnly:!0})],y.prototype,"updating",null),(0,i._)([(0,d.Cb)({readOnly:!0})],y.prototype,"updatingProgress",null),(0,i._)([(0,d.Cb)()],y.prototype,"updateSuspended",null),(0,i._)([(0,d.Cb)()],y.prototype,"visible",null),(0,i._)([(0,d.Cb)({readOnly:!0})],y.prototype,"visibleAtCurrentScale",null),(0,i._)([(0,d.Cb)({readOnly:!0})],y.prototype,"visibleAtCurrentTimeExtent",null),y=(0,i._)([(0,c.j)("esri.views.layers.LayerView")],y);const g=y}}]);