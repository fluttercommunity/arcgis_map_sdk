"use strict";(self.webpackChunkarcgis_webpack01=self.webpackChunkarcgis_webpack01||[]).push([[94087,95970],{55709:(e,t,n)=>{n.d(t,{a:()=>s,f:()=>l,n:()=>o});var r=n(86098);function o(e,t){s(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function s(e,t,n=2,o=n){const s=t.length/2;let l=0,c=0;if(!(0,r.fU)(t)||(0,r.Q7)(t)){for(let r=0;r<s;++r)e[l]=t[c],e[l+1]=t[c+1],l+=n,c+=o;return}const a=(0,r.Op)(t);if((0,r.B3)(t))for(let r=0;r<s;++r)e[l]=Math.max(t[c]/a,-1),e[l+1]=Math.max(t[c+1]/a,-1),l+=n,c+=o;else for(let r=0;r<s;++r)e[l]=t[c]/a,e[l+1]=t[c+1]/a,l+=n,c+=o}function l(e,t,n,r){const o=e.typedBuffer,s=e.typedBufferStride,l=r?.count??e.count;let c=(r?.dstIndex??0)*s;for(let e=0;e<l;++e)o[c]=t,o[c+1]=n,c+=s}Object.freeze(Object.defineProperty({__proto__:null,fill:l,normalizeIntegerBuffer:s,normalizeIntegerBufferView:o},Symbol.toStringTag,{value:"Module"}))},94087:(e,t,n)=>{n.r(t),n.d(t,{loadGLTFMesh:()=>j});var r=n(30936),o=n(86875),s=n(66341),l=n(70375),c=n(86114),a=n(19431),u=n(46332),i=n(3965),f=n(81095),d=n(52721),p=n(77727),m=n(1680),y=n(33206),g=n(29952),x=n(124),T=n(50442),w=n(81936),b=n(6766),h=n(94140),v=n(90331);Object.freeze(Object.defineProperty({__proto__:null,copy:function(e,t,n){const r=e.typedBuffer,o=e.typedBufferStride,s=t.typedBuffer,l=t.typedBufferStride,c=n?n.count:t.count;let a=(n?.dstIndex??0)*o,u=(n?.srcIndex??0)*l;for(let e=0;e<c;++e){for(let e=0;e<9;++e)r[a+e]=s[u+e];a+=o,u+=l}}},Symbol.toStringTag,{value:"Module"}));Object.freeze(Object.defineProperty({__proto__:null,copy:function(e,t,n){const r=e.typedBuffer,o=e.typedBufferStride,s=t.typedBuffer,l=t.typedBufferStride,c=n?n.count:t.count;let a=(n?.dstIndex??0)*o,u=(n?.srcIndex??0)*l;for(let e=0;e<c;++e){for(let e=0;e<16;++e)r[a+e]=s[u+e];a+=o,u+=l}}},Symbol.toStringTag,{value:"Module"}));n(15642);var B=n(55709),S=n(14789);function R(e,t,n=4){const r=t.typedBuffer,o=t.typedBufferStride,s=t.count;let l=0,c=0;for(let t=0;t<s;++t)e[l]=r[c],e[l+1]=r[c+1],e[l+2]=r[c+2],e[l+3]=r[c+3],l+=n,c+=o}function _(e,t,n,r,o,s){const l=e.typedBuffer,c=e.typedBufferStride,a=s?.count??e.count;let u=(s?.dstIndex??0)*c;for(let e=0;e<a;++e)l[u]=t,l[u+1]=n,l[u+2]=r,l[u+3]=o,u+=c}Object.freeze(Object.defineProperty({__proto__:null,copy:R,copyView:function(e,t){R(e.typedBuffer,t,e.typedBufferStride)},fill:_},Symbol.toStringTag,{value:"Module"}));function E(e,t){return new e(new ArrayBuffer(t*e.ElementCount*(0,v.n1)(e.ElementType)))}var A=n(59572),M=n(91420),C=n(85636),I=n(1731),L=n(95970),O=n(91907);async function j(e,t,n){const o=new M.C(function(e){const t=e?.resolveFile;return t?{busy:!1,request:async(e,n,r)=>{const o=t?.(e)??e,l="image"===n?"image":"binary"===n||"image+type"===n?"array-buffer":"json";return(await(0,s.Z)(o,{responseType:l,signal:r?.signal,timeout:0})).data}}:null}(n)),u=(await(0,C.loadGLTF)(o,t,n,!0)).model,i=u.lods.shift(),p=new Map,b=new Map;u.textures.forEach(((e,t)=>p.set(t,function(e){return new y.Z({data:((0,L.$A)(e.data),e.data),wrap:N(e.parameters.wrap)})}(e)))),u.materials.forEach(((e,t)=>b.set(t,function(e,t){const n=new r.Z(function(e,t){return(0,d.al)(G(e[0]),G(e[1]),G(e[2]),t)}(e.color,e.opacity)),o=e.emissiveFactor?new r.Z(function(e){return(0,f.al)(G(e[0]),G(e[1]),G(e[2]))}(e.emissiveFactor)):null,s=e=>e?new g.Z({scale:e.scale?[e.scale[0],e.scale[1]]:[1,1],rotation:(0,a.BV)(e.rotation??0),offset:e.offset?[e.offset[0],e.offset[1]]:[0,0]}):null;return new m.Z({color:n,colorTexture:t.get(e.colorTexture),normalTexture:t.get(e.normalTexture),emissiveColor:o,emissiveTexture:t.get(e.emissiveTexture),occlusionTexture:t.get(e.occlusionTexture),alphaMode:F(e.alphaMode),alphaCutoff:e.alphaCutoff,doubleSided:e.doubleSided,metallic:e.metallicFactor,roughness:e.roughnessFactor,metallicRoughnessTexture:t.get(e.metallicRoughnessTexture),colorTextureTransform:s(e.colorTextureTransform),normalTextureTransform:s(e.normalTextureTransform),occlusionTextureTransform:s(e.occlusionTextureTransform),emissiveTextureTransform:s(e.emissiveTextureTransform),metallicRoughnessTextureTransform:s(e.metallicRoughnessTextureTransform)})}(e,p))));const h=function(e){let t=0;const n={color:!1,tangent:!1,normal:!1,texCoord0:!1},r=new Map,o=new Map,s=[];for(const l of e.parts){const{position:e,normal:a,color:u,tangent:i,texCoord0:f}=l.attributes,d=`\n      ${U(e,r)}/\n      ${U(a,r)}/\n      ${U(u,r)}/\n      ${U(i,r)}/\n      ${U(f,r)}/\n      ${$(l.transform)}\n    `;let p=!1;const m=(0,c.s1)(o,d,(()=>(p=!0,{start:t,length:e.count})));p&&(t+=e.count),a&&(n.normal=!0),u&&(n.color=!0),i&&(n.tangent=!0),f&&(n.texCoord0=!0),s.push({gltf:l,writeVertices:p,region:m})}return{vertexAttributes:{position:E(w.fP,t),normal:n.normal?E(w.ct,t):null,tangent:n.tangent?E(w.ek,t):null,color:n.color?E(w.mc,t):null,texCoord0:n.texCoord0?E(w.Eu,t):null},parts:s,components:[]}}(i);for(const e of h.parts)k(h,e,b);const{position:v,normal:B,tangent:S,color:R,texCoord0:_}=h.vertexAttributes,I=(0,T.G7)(e,n),O=e.spatialReference.isGeographic?(0,T.G7)(e):I,j=(0,A.qk)({vertexAttributes:{position:v.typedBuffer,normal:B?.typedBuffer,tangent:S?.typedBuffer},vertexSpace:O,spatialReference:e.spatialReference},I,{allowBufferReuse:!0,sourceUnit:n?.unitConversionDisabled?void 0:"meters"});if(!j)throw new l.Z("load-gltf-mesh:vertex-space-projection",`Failed to load mesh from glTF because we could not convert the vertex space from ${O.type} to ${I.type}`);return{transform:null,vertexSpace:I,components:h.components,spatialReference:e.spatialReference,vertexAttributes:new x.Q({...j,color:R?.typedBuffer,uv:_?.typedBuffer})}}function U(e,t){if(null==e)return"-";const n=e.typedBuffer;return`${(0,c.s1)(t,n.buffer,(()=>t.size))}/${n.byteOffset}/${n.byteLength}`}function $(e){return null!=e?e.toString():"-"}function k(e,t,n){t.writeVertices&&function(e,t){const{position:n,normal:r,tangent:o,color:s,texCoord0:l}=e.vertexAttributes,c=t.region.start,{attributes:f,transform:d}=t.gltf,p=f.position.count;if((0,b.d)(n.slice(c,p),f.position,d),null!=f.normal&&null!=r){const e=(0,u.XL)((0,i.Ue)(),d),t=r.slice(c,p);(0,b.c)(t,f.normal,e),(0,a.oc)(e)&&(0,b.e)(t,t)}else null!=r&&(0,S.f)(r,0,0,1,{dstIndex:c,count:p});if(null!=f.tangent&&null!=o){const e=(0,u.xO)((0,i.Ue)(),d),t=o.slice(c,p);(0,h.a)(t,f.tangent,e),(0,a.oc)(e)&&(0,h.n)(t,t)}else null!=o&&_(o,0,0,1,1,{dstIndex:c,count:p});if(null!=f.texCoord0&&null!=l?(0,B.n)(l.slice(c,p),f.texCoord0):null!=l&&(0,B.f)(l,0,0,{dstIndex:c,count:p}),null!=f.color&&null!=s){const e=f.color,t=s.slice(c,p);if(4===e.elementCount)e instanceof w.ek?(0,h.l)(t,e,1,255):(e instanceof w.mc||e instanceof w.v6)&&(0,h.l)(t,e,1/255,255);else{_(t,255,255,255,255);const n=w.ne.fromTypedArray(t.typedBuffer,t.typedBufferStride);e instanceof w.ct?(0,b.l)(n,e,1,255):(e instanceof w.ne||e instanceof w.mw)&&(0,b.l)(n,e,1/255,255)}}else null!=s&&_(s.slice(c,p),255,255,255,255)}(e,t);const{indices:r,attributes:o,primitiveType:s,material:l}=t.gltf;let c=(0,I.p)(r||o.position.count,s);const f=t.region.start;if(f){const e=new Uint32Array(c);for(let t=0;t<c.length;t++)e[t]+=f;c=e}e.components.push(new p.Z({name:t.gltf.name,faces:c,material:n.get(l),shading:o.normal?"source":"flat",trustSourceNormals:!0}))}function F(e){switch(e){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function N(e){return{horizontal:P(e.s),vertical:P(e.t)}}function P(e){switch(e){case O.e8.CLAMP_TO_EDGE:return"clamp";case O.e8.MIRRORED_REPEAT:return"mirror";case O.e8.REPEAT:return"repeat"}}function G(e){return e**(1/o.jm)*255}},1731:(e,t,n)=>{n.d(t,{p:()=>l});var r=n(86098),o=n(35914),s=n(91907);function l(e,t){switch(t){case s.MX.TRIANGLES:return"number"==typeof(n=e)?(0,o.KF)(n):(0,r.lq)(n)?new Uint16Array(n):n;case s.MX.TRIANGLE_STRIP:return function(e){const t="number"==typeof e?e:e.length;if(t<3)return[];const n=t-2,r=(0,o.$z)(3*n);if("number"==typeof e){let e=0;for(let t=0;t<n;t+=1)t%2==0?(r[e++]=t,r[e++]=t+1,r[e++]=t+2):(r[e++]=t+1,r[e++]=t,r[e++]=t+2)}else{let t=0;for(let o=0;o<n;o+=1)o%2==0?(r[t++]=e[o],r[t++]=e[o+1],r[t++]=e[o+2]):(r[t++]=e[o+1],r[t++]=e[o],r[t++]=e[o+2])}return r}(e);case s.MX.TRIANGLE_FAN:return function(e){const t="number"==typeof e?e:e.length;if(t<3)return new Uint16Array(0);const n=t-2,r=n<=65536?new Uint16Array(3*n):new Uint32Array(3*n);if("number"==typeof e){let e=0;for(let t=0;t<n;++t)r[e++]=0,r[e++]=t+1,r[e++]=t+2;return r}const o=e[0];let s=e[1],l=0;for(let t=0;t<n;++t){const n=e[t+2];r[l++]=o,r[l++]=s,r[l++]=n,s=n}return r}(e)}var n}},95970:(e,t,n)=>{n.d(t,{$A:()=>l,Ml:()=>a,NM:()=>s,i$:()=>c});var r=n(39994),o=n(70984);class s{constructor(e){this.data=e,this.type="encoded-mesh-texture",this.encoding=o.Ti.KTX2_ENCODING}}function l(e){return"encoded-mesh-texture"===e?.type}async function c(e){const t=new Blob([e]),n=await t.text();return JSON.parse(n)}async function a(e,t){if(t===o.Ti.KTX2_ENCODING)return new s(e);const n=new Blob([e],{type:t});let l=URL.createObjectURL(n);switch(t){case"image/jpeg":l+="#.jpg";break;case"image/png":l+="#.png"}const c=new Image;if((0,r.Z)("esri-iPhone"))return new Promise(((e,t)=>{const n=()=>{o(),e(c)},r=e=>{o(),t(e)},o=()=>{URL.revokeObjectURL(l),c.removeEventListener("load",n),c.removeEventListener("error",r)};c.addEventListener("load",n),c.addEventListener("error",r),c.src=l}));try{c.src=l,await c.decode()}catch(e){console.warn("Failed decoding HTMLImageElement")}return URL.revokeObjectURL(l),c}}}]);