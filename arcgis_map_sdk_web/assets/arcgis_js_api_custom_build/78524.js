"use strict";(self.webpackChunkarcgis_webpack01=self.webpackChunkarcgis_webpack01||[]).push([[78524],{94140:(t,n,r)=>{r.d(n,{a:()=>i,b:()=>c,l:()=>s,n:()=>a,t:()=>l});var e=r(86875),o=(r(39994),r(13802));function i(t,n,r){l(t.typedBuffer,n.typedBuffer,r,t.typedBufferStride,n.typedBufferStride)}function l(t,n,r,e=4,o=e){if(t.length/e!=n.length/o)return;const i=t.length/e,l=r[0],a=r[1],u=r[2],s=r[3],c=r[4],f=r[5],p=r[6],g=r[7],d=r[8];let y=0,A=0;for(let r=0;r<i;r++){const r=n[y],i=n[y+1],m=n[y+2],h=n[y+3];t[A]=l*r+s*i+p*m,t[A+1]=a*r+c*i+g*m,t[A+2]=u*r+f*i+d*m,t[A+3]=h,y+=o,A+=e}}function a(t,n){const r=Math.min(t.count,n.count),e=t.typedBuffer,o=t.typedBufferStride,i=n.typedBuffer,l=n.typedBufferStride;for(let t=0;t<r;t++){const n=t*o,r=t*l,a=i[r],u=i[r+1],s=i[r+2],c=a*a+u*u+s*s;if(c>0){const t=1/Math.sqrt(c);e[n]=t*a,e[n+1]=t*u,e[n+2]=t*s}}}function u(t,n,r,e=4){const o=Math.min(t.length/e,n.count),i=n.typedBuffer,l=n.typedBufferStride;let a=0,u=0;for(let n=0;n<o;n++)t[u]=r*i[a],t[u+1]=r*i[a+1],t[u+2]=r*i[a+2],t[u+3]=r*i[a+3],a+=l,u+=e}function s(t,n,r,e){c(t.typedBuffer,n,r,e,t.typedBufferStride)}function c(t,n,r,o,i=4){const l=Math.min(t.length/i,n.count),a=n.typedBuffer,u=n.typedBufferStride;let s=0,c=0;const f=1/e.jm;for(let n=0;n<l;n++)t[c]=o*(r*a[s])**f,t[c+1]=o*(r*a[s+1])**f,t[c+2]=o*(r*a[s+2])**f,t[c+3]=o*r*a[s+3],s+=u,c+=i}Object.freeze(Object.defineProperty({__proto__:null,linearToSRGB:c,linearToSRGBView:s,normalize:a,scale:u,scaleView:function(t,n,r){u(t.typedBuffer,n,r,t.typedBufferStride)},transformMat3:l,transformMat3View:i,transformMat4:function(t,n,r,e=4,i=e){if(t.length/e!=n.length/i)return void o.Z.getLogger("esri.views.3d.support.buffer.math").error("source and destination buffers need to have the same number of elements");const l=t.length/e,a=r[0],u=r[1],s=r[2],c=r[3],f=r[4],p=r[5],g=r[6],d=r[7],y=r[8],A=r[9],m=r[10],h=r[11],T=r[12],v=r[13],w=r[14],_=r[15];let F=0,R=0;for(let r=0;r<l;r++){const r=n[F],o=n[F+1],l=n[F+2],S=n[F+3];t[R]=a*r+f*o+y*l+T*S,t[R+1]=u*r+p*o+A*l+v*S,t[R+2]=s*r+g*o+m*l+w*S,t[R+3]=c*r+d*o+h*l+_*S,F+=i,R+=e}},transformMat4View:function(t,n,r){if(t.count!==n.count)return;const e=t.count,o=r[0],i=r[1],l=r[2],a=r[3],u=r[4],s=r[5],c=r[6],f=r[7],p=r[8],g=r[9],d=r[10],y=r[11],A=r[12],m=r[13],h=r[14],T=r[15],v=t.typedBuffer,w=t.typedBufferStride,_=n.typedBuffer,F=n.typedBufferStride;for(let t=0;t<e;t++){const n=t*w,r=t*F,e=_[r],R=_[r+1],S=_[r+2],b=_[r+3];v[n]=o*e+u*R+p*S+A*b,v[n+1]=i*e+s*R+g*S+m*b,v[n+2]=l*e+c*R+d*S+h*b,v[n+3]=a*e+f*R+y*S+T*b}}},Symbol.toStringTag,{value:"Module"}))},124:(t,n,r)=>{r.d(n,{Q:()=>p});var e,o=r(36663),i=r(82064),l=r(67134),a=r(13802),u=r(81977),s=r(69236),c=r(40266),f=r(52190);let p=e=class extends i.Z{constructor(t){super(t),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(t){return(0,f.X)(t,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},a.Z.getLogger(this))}castPosition(t){return t&&t instanceof Float32Array&&a.Z.getLogger(this).warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array"),(0,f.X)(t,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},a.Z.getLogger(this))}castUv(t){return(0,f.X)(t,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},a.Z.getLogger(this))}castNormal(t){return(0,f.X)(t,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},a.Z.getLogger(this))}castTangent(t){return(0,f.X)(t,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},a.Z.getLogger(this))}clone(){const t={position:(0,l.d9)(this.position),uv:(0,l.d9)(this.uv),normal:(0,l.d9)(this.normal),tangent:(0,l.d9)(this.tangent),color:(0,l.d9)(this.color)};return new e(t)}clonePositional(){const t={position:(0,l.d9)(this.position),normal:(0,l.d9)(this.normal),tangent:(0,l.d9)(this.tangent),uv:this.uv,color:this.color};return new e(t)}get usedMemory(){return this.position.byteLength+(this.uv?.byteLength??0)+(this.normal?.byteLength??0)+(this.tangent?.byteLength??0)+(this.color?.byteLength??0)}};(0,o._)([(0,u.Cb)({json:{write:f.d}})],p.prototype,"color",void 0),(0,o._)([(0,s.p)("color")],p.prototype,"castColor",null),(0,o._)([(0,u.Cb)({nonNullable:!0,json:{write:f.d}})],p.prototype,"position",void 0),(0,o._)([(0,s.p)("position")],p.prototype,"castPosition",null),(0,o._)([(0,u.Cb)({json:{write:f.d}})],p.prototype,"uv",void 0),(0,o._)([(0,s.p)("uv")],p.prototype,"castUv",null),(0,o._)([(0,u.Cb)({json:{write:f.d}})],p.prototype,"normal",void 0),(0,o._)([(0,s.p)("normal")],p.prototype,"castNormal",null),(0,o._)([(0,u.Cb)({json:{write:f.d}})],p.prototype,"tangent",void 0),(0,o._)([(0,s.p)("tangent")],p.prototype,"castTangent",null),p=e=(0,o._)([(0,c.j)("esri.geometry.support.MeshVertexAttributes")],p)},52190:(t,n,r)=>{function e(t,n,r,e){const{loggerTag:o,stride:i}=n;return t.length%i!=0?(e.error(o,`Invalid array length, expected a multiple of ${i}`),new r([])):t}function o(t,n,r,o,i){if(!t)return t;if(t instanceof n)return e(t,o,n,i);for(const l of r)if(t instanceof l)return e(new n(t),o,n,i);if(Array.isArray(t))return e(new n(t),o,n,i);{const e=r.map((t=>`'${t.name}'`));return i.error(`Failed to set property, expected one of ${e}, but got ${t.constructor.name}`),new n([])}}function i(t,n,r){n[r]=function(t){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r];return n}(t)}r.d(n,{X:()=>o,d:()=>i})},78524:(t,n,r)=>{r.r(n),r.d(n,{convertMeshVertexSpace:()=>u});var e=r(70375),o=r(67134),i=r(78668),l=r(124),a=r(59572);async function u(t,n,r){await Promise.resolve(),(0,i.k_)(r);const u=(0,a.qk)(t,n,{useEllipsoid:r?.useEllipsoid});if(!u)throw new e.Z("meshUtils:convertVertexSpace()","Failed to convert to provided vertex space due to projection errors");const s=t.cloneAndModifyVertexAttributes(new l.Q({...u,uv:(0,o.d9)(t.vertexAttributes.uv),color:(0,o.d9)(t.vertexAttributes.color)}),n);return s.transform=null,s}},49921:(t,n,r)=>{r.d(n,{$s:()=>E,Gi:()=>h,Iz:()=>v,M2:()=>P,MO:()=>N,Ot:()=>b,To:()=>F,VS:()=>S,XO:()=>_,Yk:()=>w,pn:()=>T,w9:()=>R,wi:()=>O});var e=r(19431),o=r(46332),i=r(3965),l=r(32114),a=r(3308),u=r(86717),s=r(81095),c=r(7845),f=r(22349),p=r(14260),g=r(35925),d=r(39536),y=r(81936),A=r(6766),m=r(94140);const h="Projection may be possible after calling projection.load().";function T(t,n,r,e){t.error(`Failed to project from (wkid:${n.wkid}) to (wkid:${r.wkid}).${e?" ":""}${e}`)}function v(t,n,r,e,o,i){return U(B.TO_PCPF,y.ct.fromTypedArray(t),N.NORMAL,y.fP.fromTypedArray(n),r,y.fP.fromTypedArray(e),o,y.ct.fromTypedArray(i))?i:null}function w(t,n,r,e,o,i){return U(B.FROM_PCPF,y.ct.fromTypedArray(t),N.NORMAL,y.fP.fromTypedArray(n),r,y.fP.fromTypedArray(e),o,y.ct.fromTypedArray(i))?i:null}function _(t,n,r,e){return(0,f.projectBuffer)(t,n,0,r,e,0)?r:null}function F(t,n,r,e){return(0,f.projectBuffer)(t,n,0,r,e,0)?r:null}function R(t,n,r){return(0,o.XL)(j,r),(0,A.b)(n,t,j),(0,e.oc)(j)&&(0,A.n)(n,n),n}function S(t,n,r){return(0,o.xO)(j,r),(0,m.t)(n,t,j),(0,e.oc)(j)&&(0,A.n)(n,n,4),n}function b(t,n,r,o){const i=n===N.NORMAL;return M(t,n,r,((t,n)=>{const r=Math.cos((0,e.Vl)(t));n[0]=i?r:1/r,n[1]=1}),o)}function E(t,n,r,e){const o=n===N.NORMAL;return M(t,n,r,((t,n)=>{const r=Math.cosh(-t/p.sv.radius);n[0]=1,n[1]=o?r:1/r}),e)}function M(t,n,r,e,o){const i=n===N.NORMAL?3:4,l=[0,0];for(let n=0,a=1;n<t.length;n+=i,a+=3){e(r[a],l);const u=t[n]*l[0],s=t[n+1]*l[1],c=t[n+2],f=1/Math.sqrt(u*u+s*s+c*c);o[n]=u*f,o[n+1]=s*f,o[n+2]=c*f,4===i&&(o[n+3]=t[n+3])}return o}function O(t,n,r,e,o,i){if(!U(B.TO_PCPF,y.ct.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT),N.TANGENT,y.fP.fromTypedArray(n),r,y.fP.fromTypedArray(e),o,y.ct.fromTypedArray(i,4*Float32Array.BYTES_PER_ELEMENT)))return null;for(let n=3;n<t.length;n+=4)i[n]=t[n];return i}function P(t,n,r,e,o,i){if(!U(B.FROM_PCPF,y.ct.fromTypedArray(t,16),N.TANGENT,y.fP.fromTypedArray(n),r,y.fP.fromTypedArray(e),o,y.ct.fromTypedArray(i,16)))return null;for(let n=3;n<t.length;n+=4)i[n]=t[n];return i}var N,B,C;function x(t,n,r,e,i){switch((0,c.B)(e,r,V,e),t===B.FROM_PCPF&&(0,l.U_)(V,V),n){case N.NORMAL:return(0,o.XL)(i,V);case N.TANGENT:return(0,o.xO)(i,V)}}function U(t,n,r,e,o,i,l,a){if(!n)return;const s=e.count;if(function(t){return t.isWGS84||(0,g.yW)(t)||(0,g.BZ)(t)||(0,g.V2)(t)}(o))for(let e=0;e<s;e++)i.getVec(e,L),n.getVec(e,G),(0,u.q)(G,G,x(t,r,L,l,j)),a.setVec(e,G);else for(let o=0;o<s;o++){i.getVec(o,L),n.getVec(o,G);const s=(0,d.mZ)(e.get(o,1));let c=Math.cos(s);r===N.TANGENT!=(t===B.TO_PCPF)&&(c=1/c),x(t,r,L,l,j),t===B.TO_PCPF?(j[0]*=c,j[1]*=c,j[2]*=c,j[3]*=c,j[4]*=c,j[5]*=c):(j[0]*=c,j[3]*=c,j[6]*=c,j[1]*=c,j[4]*=c,j[7]*=c),(0,u.q)(G,G,j),(0,u.n)(G,G),a.setVec(o,G)}return a}(C=N||(N={}))[C.NORMAL=0]="NORMAL",C[C.TANGENT=1]="TANGENT",function(t){t[t.TO_PCPF=0]="TO_PCPF",t[t.FROM_PCPF=1]="FROM_PCPF"}(B||(B={}));const L=(0,s.Ue)(),G=(0,s.Ue)(),V=(0,a.Ue)(),j=(0,i.Ue)()},59572:(t,n,r)=>{r.d(n,{qk:()=>w,ur:()=>E,x1:()=>v});var e=r(13802),o=r(19431),i=r(17321),l=r(46332),a=r(3965),u=r(32114),s=r(3308),c=r(86717),f=r(81095),p=r(61170),g=r(7845),d=r(57022),y=r(50442),A=r(35925),m=r(6766),h=r(49921);const T=()=>e.Z.getLogger("esri.geometry.support.meshUtils.vertexSpaceConversion");function v(t,n,{vertexSpace:r,spatialReference:e}){if("georeferenced"===r.type){const o=t;if(!(0,d.K)(n,o,e))return!1;const{origin:i}=r;return(0,c.d)(t,o,i),!0}const o=(0,p.rS)(e),i=t;if(!(0,d.K)(n,i,o))return!1;const{origin:l}=r,a=B;if(!(0,g.B)(e,l,a,o))return!1;const s=(0,u.U_)(B,a);return null!=s&&((0,c.t)(t,i,s),!0)}function w(t,n,r){const{vertexSpace:e,transform:o,vertexAttributes:i}=t,a=(0,y.zZ)(e)?o:null,f=S(t.spatialReference,r,C.SOURCE_AND_TARGET);if((0,y.vI)(e,n)&&(!a||(0,u.I6)(a.localMatrix,s.Wd))&&b(f)){const{position:t,normal:n,tangent:e}=i,o=r?.allowBufferReuse;return{position:o?t:t.slice(),normal:o?n:n?.slice(),tangent:o?e:e?.slice()}}switch(t.vertexSpace.type){case"local":return"local"===n.type?function({vertexAttributes:t,spatialReference:n,transform:r},{origin:e},o,i){const l=_(n,i);if(!(0,g.B)(n,e,M,l))return(0,h.pn)(T(),n,l),null;if(r&&(0,u.Jp)(M,M,r.localMatrix),!(0,g.B)(n,o,O,l))return(0,h.pn)(T(),l,n),null;(0,u.U_)(O,O);const a=(0,u.Jp)(M,O,M);return R(a,n,i,C.SOURCE_AND_TARGET),F(t,a)}(t,t.vertexSpace,n.origin,r):function({spatialReference:t,vertexAttributes:n,transform:r},{origin:e},o,i){const l=_(t,i);if(!(0,g.B)(t,e,M,l))return(0,h.pn)(T(),t,l),null;r&&(0,u.Jp)(M,M,r.localMatrix),R(M,t,i,C.SOURCE);const a=new Float64Array(n.position.length),s=function(t,n,r,e,o){(0,m.t)(e,t,n);const i=new Float64Array(t.length);return(0,h.To)(e,o,i,r)?i:((0,h.pn)(T(),o,r),null)}(n.position,M,t,a,l);if(!s)return null;const f=function(t,n,r,e,o,i){if(null==o)return null;const l=new Float32Array(o.length);return(0,h.w9)(o,l,i),(0,h.Yk)(l,t,n,r,e,l)?l:((0,h.pn)(T(),e,n),null)}(s,t,a,l,n.normal,M);if(n.normal&&!f)return null;const p=function(t,n,r,e,o,i){if(null==o)return null;const l=new Float32Array(o.length);return(0,h.VS)(o,l,i),(0,h.M2)(l,t,n,r,e,l)?l:((0,h.pn)(T(),e,n),null)}(s,t,a,l,n.tangent,M);if(n.tangent&&!p)return null;if(o){const t=(0,c.v)(N,o);(0,m.a)(s,s,t)}return{position:s,normal:f,tangent:p}}(t,t.vertexSpace,n.origin,r);case"georeferenced":return"local"===n.type?function({vertexAttributes:t,spatialReference:n,transform:r},{origin:e},o,i){const a=_(n,i);if(!(0,g.B)(n,o,M,a))return(0,h.pn)(T(),n,a),null;const s=1/S(n,i,C.TARGET);(0,u.bA)(M,M,[s,s,s]);const c=(0,u.U_)(O,M),{position:f,normal:p,tangent:d}=function(t,n,r){if(!n)return t;if(!r){const{position:r,normal:e,tangent:o}=t;return{position:(0,m.a)(new Float64Array(r.length),r,n),tangent:o,normal:e}}const e=F(t,r.localMatrix);return(0,m.a)(e.position,e.position,n),e}(t,e,r),y=new Float64Array(f.length),A=function(t,n,r,e,o){const i=(0,h.XO)(t,n,e,o);if(!i)return(0,h.pn)(T(),n,o),null;const l=new Float64Array(i.length);return(0,m.t)(l,i,r),l}(f,n,c,y,a);if(!A)return null;const v=(0,l.XL)(P,c),w=function(t,n,r,e,o,i,l){if(null==t)return null;const a=l??new Float32Array(t.length);return(0,h.Iz)(t,n,r,e,o,a)?((0,m.b)(a,a,i),a):((0,h.pn)(T(),r,o),null)}(p,f,n,y,a,v,p!==t.normal?p:void 0);if(!w&&p)return null;const R=function(t,n,r,e,o,i,l){if(null==t)return null;const a=l??new Float32Array(t.length);return(0,h.wi)(t,n,r,e,o,a)?((0,m.b)(a,a,i,4),a):((0,h.pn)(T(),r,o),null)}(d,f,n,y,a,v,d!==t.tangent?d:void 0);return!R&&d?null:{position:A,normal:w,tangent:R}}(t,t.vertexSpace,n.origin,r):function({vertexAttributes:t,transform:n,spatialReference:r},{origin:e},o,i){const l=S(r,i,C.SOURCE_AND_TARGET),a=e||!b(l)?(0,u.JG)(M,n?.localMatrix??s.Wd):null;a&&R(a,r,i,C.SOURCE_AND_TARGET);const{position:f,normal:p,tangent:g}=a?F(t,a):t,d=i?.allowBufferReuse,y=d?f:new Float64Array(f.length);let A=f;if(e&&(A=(0,m.a)(y,A,e)),o){const t=(0,c.v)(N,o);A=(0,m.a)(y,A,t)}return{position:A!==t.position||d?A:A.slice(),normal:p!==t.normal||d?p:p?.slice(),tangent:g!==t.tangent||d?g:g?.slice()}}(t,t.vertexSpace,n.origin,r)}}function _(t,n){return n?.useEllipsoid&&(0,A.N$)(t)?p.wY:(0,p.rS)(t)}function F(t,n){const r=new Float64Array(t.position.length);(0,m.t)(r,t.position,n);const e=t.normal?new Float32Array(t.normal.length):null,o=t.tangent?new Float32Array(t.tangent.length):null;return e&&t.normal&&(0,h.w9)(t.normal,e,n),o&&t.tangent&&(0,h.VS)(t.tangent,o,n),{position:r,normal:e,tangent:o}}function R(t,n,r,e){const o=S(n,r,e);b(o)||(0,u.bA)(t,t,[o,o,o])}function S(t,n,r){const e=!!(r&C.SOURCE),o=!!(r&C.TARGET),i=n?.sourceUnit,l=n?.targetUnit;if(!i&&!l)return 1;let a=E(i,t);e||!i||b(a)||(T().warn("source unit conversion not supported"),a=1);let u=1/E(l,t);return o||!l||b(u)||(T().warn("target unit conversion not supported"),u=1),a*u}function b(t){return(0,o.Po)(t,1)}function E(t,n){if(null==t)return 1;const r=(0,i.r6)(n);return 1/(0,i.En)(r,"meters",t)}const M=(0,s.Ue)(),O=(0,s.Ue)(),P=(0,a.Ue)(),N=(0,f.Ue)(),B=(0,s.Ue)();var C,x;(x=C||(C={}))[x.NONE=0]="NONE",x[x.SOURCE=1]="SOURCE",x[x.TARGET=2]="TARGET",x[x.SOURCE_AND_TARGET=3]="SOURCE_AND_TARGET"}}]);