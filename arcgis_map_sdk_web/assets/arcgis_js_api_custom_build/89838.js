"use strict";(self.webpackChunkarcgis_webpack01=self.webpackChunkarcgis_webpack01||[]).push([[89838],{89838:(e,n,t)=>{t.r(n),t.d(n,{getRampStops:()=>I,getReferenceSizeSymbol:()=>C,realWorldMaxSize:()=>w,realWorldMinSize:()=>z});var l,o=t(30936),i=t(21758),r=(t(70375),t(67134));t(73665),t(62589),t(25609);function s(e){switch(e){case"circle":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case"square":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case"diamond":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case"hexagon-pointy":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case"hexagon-flat":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function a(e){return"CIMVectorMarker"===e?.type?e.markerGraphics?.[0]:void 0}function u(e){return"CIMPolygonSymbol"===e?.symbol?.type?e.symbol.symbolLayers?.[0]:void 0}function c(e,n){"CIMVectorMarker"===e?.type&&null!=n&&(e.size=n)}function f(e,n){const t=a(e);t&&null!=n&&(t.geometry=s(n))}function y(e,n){const t=u(a(e));t&&null!=n&&(t.color=n.toArray())}function m(e,n,t){const l=u(a(e));l&&null!=n&&t&&(l.colorLocked=n)}!function(e){e.OuterRing="reference-size-outer-ring",e.InnerDot="reference-size-inner-dot"}(l||(l={}));var p=t(15498),b=t(1759),d=t(97500),g=t(9539),h=t(59672),S=t(17075),v=(t(54956),t(3368));const w=30,z=12,k=[255,255,255],M=[200,200,200],x=[128,128,128];async function I(e,n,t,l,o,r,s){const a=n.legendOptions?.customValues,u=s||await D(e,t),c=n.stops,f=!!u,y=!!a,m=null!=n.minSize&&null!=n.maxSize,p=c&&c.length>1,b=!!n.target;if(!f||!y&&!(m||p&&!b))return;const d=(0,h.YW)(u);let g=!1,v=null,w=null;v=d&&!p?(0,i.NM)([n.minDataValue,n.maxDataValue]):a??await P(n,u,l,o?.type);const z=e?.authoringInfo,k="univariate-color-size"===z?.type,M=k&&"above-and-below"===z?.univariateTheme,x=!!(0,S.getReferenceSizeAuthoringInfoVisualVariable)(e);if(!v&&p&&(v=c.map((e=>e.value)),g=c.some((e=>!!e.label)),"flow"===e.type&&(v=(0,i.NM)(v)),g&&(w=c.map((e=>e.label)))),d&&null!=v&&v?.length>2&&!M&&(v=[v[0],v[v.length-1]]),!v)return null;k&&5!==v?.length&&(v=q({minSize:v[0],maxSize:v[v.length-1]}));const I=d?V(e,v):null,R=(0,h.Y6)(u),O=g?null:function(e,n){const t=e.length-1;return e.map(((e,l)=>(0,S.createStopLabel)(e,l,t,n)))}(v,r);return(await Promise.all(v.map((async(i,r)=>{const s=d?I[r]:await Z(n,u,i,l,o?.type);return{value:i,symbol:!x||"class-breaks"!==e.type&&"unique-value"!==e.type?B(M&&"class-breaks"===e.type?L(e,r):u,s):C(e,s,n.maxSize,t)??u,label:g?w[r]:O[r],size:x?24:s,outlineSize:R}})))).reverse()}function V(e,n){const t=e?.authoringInfo,l="univariate-color-size"===t?.type;let o=[z,w];if(l){const e=n[0],t=n[n.length-1],l=z,i=w;o=n.map((n=>l+(n-e)/(t-e)*(i-l)))}return l&&"below"===t?.univariateTheme&&o.reverse(),o}function C(e,n,t,i){const s="class-breaks"===e.type,a=s?e.classBreakInfos?.[0]?.symbol?.clone():e.uniqueValueInfos?.[0]?.symbol?.clone();return a&&"type"in a&&"cim"===a.type?(function(e,n){const{outerRingSize:t,innerDotSize:o,type:i,color:s,colorLocked:a,primitiveOverrides:u}=n,p="CIMPolygonSymbol"===e.data.symbol?.type?e.data.symbol.symbolLayers:null;if(2===p?.length)for(const e of p){const n=e.primitiveName===l.OuterRing;c(e,n?t:o),f(e,i),y(e,s),m(e,a,n)}null!=t&&null!=o&&(e.data.primitiveOverrides=null),void 0!==u&&(e.data.primitiveOverrides=(0,r.d9)(u))}(a,{color:i??(s?null:new o.Z(M)),innerDotSize:n*(24/t)||1,outerRingSize:24}),a):null}function L(e,n){const t=e.classBreakInfos,l=t.length,o=l<2||!(n>=2)?t[0].symbol.clone():t[l-1].symbol.clone(),i=e.visualVariables?.some((e=>"color"===e.type));return i&&(o.type.includes("3d")?R(o):O(o)),o}async function D(e,n){if("flow"===e.type)return(0,S.getSymbolForFlowRenderer)(e,n);if("pie-chart"===e.type)return new b.Z({color:null,outline:e.outline?.width?e.outline:new p.Z});let t=null,l=null;if("simple"===e.type)t=e.symbol;else if("class-breaks"===e.type){const n=e.classBreakInfos;t=n&&n[0]&&n[0].symbol,l=n.length>1}else if("unique-value"===e.type){const n=e.uniqueValueInfos;t=n?.[0]?.symbol,l=null!=n&&n.length>1}return!t||function(e){return(0,g.dU)(e)?e.symbolLayers?.some((e=>"fill"===e?.type))??!1:e?.type.includes("fill")??!1}(t)?null:(t=t.clone(),(n||l)&&(t.type.includes("3d")?R(t):O(t)),t)}function R(e){"line-3d"===e.type?e.symbolLayers.forEach((e=>{e.material={color:x}})):e.symbolLayers.forEach((e=>{"icon"!==e.type||e.resource?.href?e.material={color:M}:(e.material={color:k},e.outline={color:x,size:1.5})}))}function O(e){const n=(0,v.$o)();if("cim"===e.type)(0,d.ZB)(e,new o.Z(M));else if(e.type.includes("line"))e.color=x;else if(e.color=n?x:k,"simple-marker"===e.type)if(e.outline){const n=e.outline?.color?.toHex();"#ffffff"===n&&(e.outline.color=x)}else e.outline={color:x,width:1.5}}async function P(e,n,l,o){const r=(await Promise.resolve().then(t.bind(t,36496))).getSizeRangeAtScale(e,l,o),s=r&&q(r);if(!r||!s)return;let a=s.map((n=>function(e,n,t){const l=t.minSize,o=t.maxSize,i=n.minDataValue,r=n.maxDataValue;let s;s=e<=l?i:e>=o?r:(e-l)/(o-l)*(r-i)+i;return s}(n,e,r)));a=(0,i.NM)(a);for(let t=1;t<a.length-1;t++){const i=await N(e,n,a[t],a[t-1],l,o);i&&(a[t]=i[0],s[t]=i[1])}return a}function q(e){const n=e.minSize,t=(e.maxSize-n)/4,l=[];for(let e=0;e<5;e++)l.push(n+t*e);return l}async function N(e,n,t,l,o,r){const s=await Z(e,n,t,o,r),a=await Z(e,n,l,o,r),u=(0,i.D2)(t),c=u.fractional;let f=u.integer,y=null,m=null;t>0&&t<1&&(y=10**c,f=(0,i.D2)(t*=y).integer);for(let l=f-1;l>=0;l--){const u=10**l;let c=Math.floor(t/u)*u,f=Math.ceil(t/u)*u;null!=y&&(c/=y,f/=y);let p=(c+f)/2;[,p]=(0,i.NM)([c,p,f],{indexes:[1]});const b=await Z(e,n,c,o,r),d=await Z(e,n,f,o,r),g=await Z(e,n,p,o,r),h=(0,i.f1)(s,b,a,null),S=(0,i.f1)(s,d,a,null),v=(0,i.f1)(s,g,a,null);let w=h.previous<=20,z=S.previous<=20;if(w&&z&&(h.previous<=S.previous?(w=!0,z=!1):(z=!0,w=!1)),w?m=[c,b]:z?m=[f,d]:v.previous<=20&&(m=[p,g]),m)break}return m}async function Z(e,n,l,o,i){const{getSize:r}=await Promise.resolve().then(t.bind(t,36496));return r(e,l,{scale:o,view:i,shape:"simple-marker"===n.type?n.style:null})}function B(e,n){const t=e.clone();if((0,g.dU)(t))(0,h.YW)(t)||t.symbolLayers.forEach((e=>{"fill"!==e.type&&(e.size=n)}));else if(function(e){return"esri.symbols.SimpleMarkerSymbol"===e.declaredClass}(t))t.size=n;else if(function(e){return"esri.symbols.PictureMarkerSymbol"===e.declaredClass}(t)){const e=t.width,l=t.height;t.height=n,t.width=n*(e/l)}else!function(e){return"esri.symbols.SimpleLineSymbol"===e.declaredClass}(t)?function(e){return"esri.symbols.TextSymbol"===e.declaredClass}(t)&&t.font&&(t.font.size=n):t.width=n;return t}}}]);