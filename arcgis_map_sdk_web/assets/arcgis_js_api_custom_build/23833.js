"use strict";(self.webpackChunkarcgis_webpack01=self.webpackChunkarcgis_webpack01||[]).push([[23833],{23833:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Ce});var s=r(36663),i=r(41831),o=r(81739),l=r(70375),n=r(67134),a=r(63592),u=r(13802),y=r(15842),p=r(78668),d=r(3466),c=r(81977),h=(r(39994),r(34248)),b=r(40266),g=r(14685),f=r(38481),v=r(2556),_=r(71314),m=r(91223),S=r(87232),w=r(63989),C=r(43330),j=r(18241),Z=r(95874),x=r(93902),B=r(53264),T=r(82064),O=r(12173);r(4157);let F=class extends T.Z{constructor(){super(...arguments),this.type=null}};(0,s._)([(0,c.Cb)({type:String,readOnly:!0,json:{write:{isRequired:!0}}})],F.prototype,"type",void 0),F=(0,s._)([(0,b.j)("esri.layers.support.BuildingFilterAuthoringInfo")],F);const I=F;var k;let R=k=class extends T.Z{constructor(){super(...arguments),this.filterType=null,this.filterValues=null}clone(){return new k({filterType:this.filterType,filterValues:(0,n.d9)(this.filterValues)})}};(0,s._)([(0,c.Cb)({type:String,json:{write:{isRequired:!0}}})],R.prototype,"filterType",void 0),(0,s._)([(0,c.Cb)({type:[String],json:{write:{isRequired:!0}}})],R.prototype,"filterValues",void 0),R=k=(0,s._)([(0,b.j)("esri.layers.support.BuildingFilterAuthoringInfoType")],R);const A=R;var E;const L=i.Z.ofType(A);let q=E=class extends T.Z{clone(){return new E({filterTypes:(0,n.d9)(this.filterTypes)})}};(0,s._)([(0,c.Cb)({type:L,json:{write:{isRequired:!0}}})],q.prototype,"filterTypes",void 0),q=E=(0,s._)([(0,b.j)("esri.layers.support.BuildingFilterAuthoringInfoBlock")],q);const M=q;var N;const P=i.Z.ofType(M);let V=N=class extends I{constructor(){super(...arguments),this.type="checkbox"}clone(){return new N({filterBlocks:(0,n.d9)(this.filterBlocks)})}};(0,s._)([(0,c.Cb)({type:["checkbox"]})],V.prototype,"type",void 0),(0,s._)([(0,c.Cb)({type:P,json:{write:{isRequired:!0}}})],V.prototype,"filterBlocks",void 0),V=N=(0,s._)([(0,b.j)("esri.layers.support.BuildingFilterAuthoringInfoCheckbox")],V);const K=V;let J=class extends T.Z{};(0,s._)([(0,c.Cb)({readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],J.prototype,"type",void 0),J=(0,s._)([(0,b.j)("esri.layers.support.BuildingFilterMode")],J);const H=J;var G;let U=G=class extends H{constructor(){super(...arguments),this.type="solid"}clone(){return new G}};(0,s._)([(0,c.Cb)({type:["solid"],readOnly:!0,json:{write:{isRequired:!0}}})],U.prototype,"type",void 0),U=G=(0,s._)([(0,b.j)("esri.layers.support.BuildingFilterModeSolid")],U);const $=U;var z,D=r(79438),W=r(44874);let X=z=class extends H{constructor(){super(...arguments),this.type="wire-frame",this.edges=null}clone(){return new z({edges:(0,n.d9)(this.edges)})}};(0,s._)([(0,D.J)({wireFrame:"wire-frame"})],X.prototype,"type",void 0),(0,s._)([(0,c.Cb)(W.Z)],X.prototype,"edges",void 0),X=z=(0,s._)([(0,b.j)("esri.layers.support.BuildingFilterModeWireFrame")],X);const Y=X;var Q;let ee=Q=class extends H{constructor(){super(...arguments),this.type="x-ray"}clone(){return new Q}};(0,s._)([(0,c.Cb)({type:["x-ray"],readOnly:!0,json:{write:{isRequired:!0}}})],ee.prototype,"type",void 0),ee=Q=(0,s._)([(0,b.j)("esri.layers.support.BuildingFilterModeXRay")],ee);const te=ee;var re;const se={nonNullable:!0,types:{key:"type",base:H,typeMap:{solid:$,"wire-frame":Y,"x-ray":te}},json:{read:e=>{switch(e?.type){case"solid":return $.fromJSON(e);case"wireFrame":return Y.fromJSON(e);case"x-ray":return te.fromJSON(e);default:return}},write:{enabled:!0,isRequired:!0}}};let ie=re=class extends T.Z{constructor(){super(...arguments),this.filterExpression=null,this.filterMode=new $,this.title=""}clone(){return new re({filterExpression:this.filterExpression,filterMode:(0,n.d9)(this.filterMode),title:this.title})}};(0,s._)([(0,c.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],ie.prototype,"filterExpression",void 0),(0,s._)([(0,c.Cb)(se)],ie.prototype,"filterMode",void 0),(0,s._)([(0,c.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],ie.prototype,"title",void 0),ie=re=(0,s._)([(0,b.j)("esri.layers.support.BuildingFilterBlock")],ie);const oe=ie;var le;const ne=i.Z.ofType(oe);let ae=le=class extends T.Z{constructor(){super(...arguments),this.description=null,this.filterBlocks=null,this.id=(0,O.DO)(),this.name=null}clone(){return new le({description:this.description,filterBlocks:(0,n.d9)(this.filterBlocks),id:this.id,name:this.name,filterAuthoringInfo:(0,n.d9)(this.filterAuthoringInfo)})}};(0,s._)([(0,c.Cb)({type:String,json:{write:!0}})],ae.prototype,"description",void 0),(0,s._)([(0,c.Cb)({type:ne,json:{write:{enabled:!0,isRequired:!0}}})],ae.prototype,"filterBlocks",void 0),(0,s._)([(0,c.Cb)({types:{key:"type",base:I,typeMap:{checkbox:K}},json:{read:e=>"checkbox"===e?.type?K.fromJSON(e):null,write:!0}})],ae.prototype,"filterAuthoringInfo",void 0),(0,s._)([(0,c.Cb)({type:String,constructOnly:!0,json:{write:{enabled:!0,isRequired:!0}}})],ae.prototype,"id",void 0),(0,s._)([(0,c.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],ae.prototype,"name",void 0),ae=le=(0,s._)([(0,b.j)("esri.layers.support.BuildingFilter")],ae);const ue=ae;var ye=r(66341),pe=r(68309),de=r(64189);let ce=class extends T.Z{constructor(){super(...arguments),this.fieldName=null,this.modelName=null,this.label=null,this.min=null,this.max=null,this.mostFrequentValues=null,this.subLayerIds=null}};(0,s._)([(0,c.Cb)({type:String})],ce.prototype,"fieldName",void 0),(0,s._)([(0,c.Cb)({type:String})],ce.prototype,"modelName",void 0),(0,s._)([(0,c.Cb)({type:String})],ce.prototype,"label",void 0),(0,s._)([(0,c.Cb)({type:Number})],ce.prototype,"min",void 0),(0,s._)([(0,c.Cb)({type:Number})],ce.prototype,"max",void 0),(0,s._)([(0,c.Cb)({json:{read:e=>Array.isArray(e)&&(e.every((e=>"string"==typeof e))||e.every((e=>"number"==typeof e)))?e.slice():null}})],ce.prototype,"mostFrequentValues",void 0),(0,s._)([(0,c.Cb)({type:[Number]})],ce.prototype,"subLayerIds",void 0),ce=(0,s._)([(0,b.j)("esri.layers.support.BuildingSummaryStatistics.BuildingFieldStatistics")],ce);let he=class extends(pe.Z.LoadableMixin(de.Z.EsriPromiseMixin(T.Z))){constructor(){super(...arguments),this.url=null}get fields(){return this.loaded||"loading"===this.loadStatus?this._get("fields"):(u.Z.getLogger(this).error("building summary statistics are not loaded"),null)}load(e){const t=null!=e?e.signal:null;return this.addResolvingPromise(this._fetchService(t)),Promise.resolve(this)}async _fetchService(e){const t=(await(0,ye.Z)(this.url,{query:{f:"json"},responseType:"json",signal:e})).data;this.read(t,{origin:"service"})}};(0,s._)([(0,c.Cb)({constructOnly:!0,type:String})],he.prototype,"url",void 0),(0,s._)([(0,c.Cb)({readOnly:!0,type:[ce],json:{read:{source:"summary"}}})],he.prototype,"fields",null),he=(0,s._)([(0,b.j)("esri.layers.support.BuildingSummaryStatistics")],he);const be=he;var ge=r(23072),fe=r(83772);const ve=i.Z.ofType(ue),_e=(0,n.d9)(_.Z.sublayersProperty),me=_e.json?.origins;me&&(me["web-scene"]={type:[v.Z],write:{enabled:!0,overridePolicy:()=>({enabled:!1})}},me["portal-item"]={type:[v.Z],write:{enabled:!0,overridePolicy:()=>({enabled:!1})}});let Se=class extends((0,x.Vt)((0,S.Y)((0,C.q)((0,j.I)((0,Z.M)((0,y.R)((0,w.N)((0,m.V)(f.Z))))))))){constructor(e){super(e),this.operationalLayerType="BuildingSceneLayer",this.allSublayers=new o.Z({getCollections:()=>[this.sublayers],getChildrenFunction:e=>"building-group"===e.type?e.sublayers:null}),this.sublayers=null,this._allSublayerOverrides=null,this.filters=new ve,this.activeFilterId=null,this.summaryStatistics=null,this.outFields=null,this.legendEnabled=!0,this.type="building-scene"}normalizeCtorArgs(e){return"string"==typeof e?{url:e}:e??{}}destroy(){this.allSublayers.destroy()}readSublayers(e,t,r){const s=_.Z.readSublayers(e,t,r);return _.Z.forEachSublayer(s,(e=>e.layer=this)),this._allSublayerOverrides&&(function(e,t){t.forEach((t=>we(e,t)))}(s,this._allSublayerOverrides),this._allSublayerOverrides=null),s}write(e,t){return e=super.write(e,t),!t||"web-scene"!==t.origin&&"portal-item"!==t.origin||(this.sublayers?function(e,t,r){const s=[];_.Z.forEachSublayer(e,(e=>{const t=e.write({},r);Object.keys(t).length>1&&s.push(t)})),s.length>0&&(t.sublayers=s)}(this.sublayers,e,t):this._allSublayerOverrides&&function(e,t,r){const s=r?.origin&&e.get(r.origin);s&&(t.sublayers=[],s.overrides.forEach((e=>{t.sublayers.push((0,n.d9)(e))})))}(this._allSublayerOverrides,e,t)),e}read(e,t){if(super.read(e,t),("web-scene"===t?.origin||"portal-item"===t?.origin)&&Array.isArray(e?.sublayers)){const r=function(e,t){const r=new Map;for(const s of e)null!=s&&"object"==typeof s&&"number"==typeof s.id?r.set(s.id,s):t.messages?.push(new l.Z("building-scene-layer:invalid-sublayer-override","Invalid value for sublayer override. Not an object or no id specified.",{value:s}));return{overrides:r,context:t}}(e.sublayers,t);this.sublayers?we(this.sublayers,r):(this._allSublayerOverrides??=new Map,this._allSublayerOverrides.set(t.origin,r))}}readSummaryStatistics(e,t){if("string"==typeof t.statisticsHRef){const e=(0,d.v_)(this.parsedUrl?.path,t.statisticsHRef);return new be({url:e})}return null}set elevationInfo(e){null!=e&&"absolute-height"!==e.mode||this._set("elevationInfo",e),this._validateElevationInfo(e)}load(e){const t=null!=e?e.signal:null,r=this.loadFromPortal({supportedTypes:["Scene Service"]},e).catch(p.r9).then((()=>this._fetchService(t))).then((()=>this._fetchAssociatedFeatureService(t)));return this.addResolvingPromise(r),Promise.resolve(this)}loadAll(){return(0,a.G)(this,(e=>{_.Z.forEachSublayer(this.sublayers,(t=>{"building-group"!==t.type&&e(t)})),this.summaryStatistics&&e(this.summaryStatistics)}))}async saveAs(e,t){return this._debouncedSaveOperations(x.xp.SAVE_AS,{...t,getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"building-scene"},e)}async save(){const e={getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"building-scene"};return this._debouncedSaveOperations(x.xp.SAVE,e)}validateLayer(e){if(!e.layerType||"Building"!==e.layerType)throw new l.Z("buildingscenelayer:layer-type-not-supported","BuildingSceneLayer does not support this layer type",{layerType:e.layerType})}_getTypeKeywords(){return["Building"]}async _fetchAssociatedFeatureService(e){try{const{portalItem:t}=await(0,B.w)(`${this.url}/layers/${this.layerId}`,{sceneLayerItem:this.portalItem,customParameters:this.customParameters,apiKey:this.apiKey,signal:e});this.associatedFeatureServiceItem=t}catch(e){u.Z.getLogger(this).warn("Associated feature service item could not be loaded",e)}}_validateElevationInfo(e){const t="Building scene layers";(0,fe.LR)(u.Z.getLogger(this),(0,fe.Uy)(t,"absolute-height",e)),(0,fe.LR)(u.Z.getLogger(this),(0,fe.kf)(t,e))}};function we(e,t){const{overrides:r,context:s}=t;_.Z.forEachSublayer(e,(e=>e.read(r.get(e.id),s)))}(0,s._)([(0,c.Cb)({type:["BuildingSceneLayer"]})],Se.prototype,"operationalLayerType",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],Se.prototype,"allSublayers",void 0),(0,s._)([(0,c.Cb)(_e)],Se.prototype,"sublayers",void 0),(0,s._)([(0,h.r)("service","sublayers")],Se.prototype,"readSublayers",null),(0,s._)([(0,c.Cb)({type:ve,nonNullable:!0,json:{write:!0}})],Se.prototype,"filters",void 0),(0,s._)([(0,c.Cb)({type:String,json:{write:!0}})],Se.prototype,"activeFilterId",void 0),(0,s._)([(0,c.Cb)({readOnly:!0,type:be})],Se.prototype,"summaryStatistics",void 0),(0,s._)([(0,h.r)("summaryStatistics",["statisticsHRef"])],Se.prototype,"readSummaryStatistics",null),(0,s._)([(0,c.Cb)({type:[String],json:{read:!1}})],Se.prototype,"outFields",void 0),(0,s._)([(0,c.Cb)(ge.vg)],Se.prototype,"fullExtent",void 0),(0,s._)([(0,c.Cb)(ge.rn)],Se.prototype,"legendEnabled",void 0),(0,s._)([(0,c.Cb)({type:["show","hide","hide-children"]})],Se.prototype,"listMode",void 0),(0,s._)([(0,c.Cb)((0,ge.Lx)(g.Z))],Se.prototype,"spatialReference",void 0),(0,s._)([(0,c.Cb)(ge.PV)],Se.prototype,"elevationInfo",null),(0,s._)([(0,c.Cb)({json:{read:!1},readOnly:!0})],Se.prototype,"type",void 0),(0,s._)([(0,c.Cb)()],Se.prototype,"associatedFeatureServiceItem",void 0),Se=(0,s._)([(0,b.j)("esri.layers.BuildingSceneLayer")],Se);const Ce=Se},71314:(e,t,r)=>{r.d(t,{Z:()=>g});var s,i=r(36663),o=r(41831),l=r(63592),n=r(96863),a=r(81977),u=(r(39994),r(13802),r(4157),r(40266)),y=r(2556),p=r(96698);const d={type:o.Z,readOnly:!0,json:{origins:{service:{read:{source:"sublayers",reader:c}}},read:!1}};function c(e,t,r){if(e&&Array.isArray(e))return new o.Z(e.map((e=>{const t=function(e){return"group"===e.layerType?h:y.Z}(e);if(t){const s=new t;return s.read(e,r),s}return r?.messages&&e&&r.messages.push(new n.Z("building-scene-layer:unsupported-sublayer-type","Building scene sublayer of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:r})),null})))}let h=s=class extends p.Z{constructor(e){super(e),this.type="building-group",this.listMode="show",this.sublayers=null}loadAll(){return(0,l.w)(this,(e=>s.forEachSublayer(this.sublayers,(t=>{"building-group"!==t.type&&e(t)}))))}};var b;(0,i._)([(0,a.Cb)({type:["hide","show","hide-children"],json:{write:!0}})],h.prototype,"listMode",void 0),(0,i._)([(0,a.Cb)(d)],h.prototype,"sublayers",void 0),h=s=(0,i._)([(0,u.j)("esri.layers.buildingSublayers.BuildingGroupSublayer")],h),(b=h||(h={})).sublayersProperty=d,b.readSublayers=c,b.forEachSublayer=function e(t,r){t.forEach((t=>{r(t),"building-group"===t.type&&e(t.sublayers,r)}))};const g=h}}]);