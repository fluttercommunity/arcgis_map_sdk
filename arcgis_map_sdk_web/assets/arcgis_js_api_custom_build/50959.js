"use strict";(self.webpackChunkarcgis_webpack01=self.webpackChunkarcgis_webpack01||[]).push([[50959],{76480:(t,e,i)=>{i.d(e,{Z:()=>h});var r,s=i(39994),n=i(99235),o=i(34596);!function(t){t[t.varint=0]="varint",t[t.fixed64=1]="fixed64",t[t.delimited=2]="delimited",t[t.fixed32=5]="fixed32",t[t.unknown=99]="unknown"}(r||(r={}));const a=4294967296,c=new TextDecoder("utf-8"),u=(0,s.Z)("safari")||(0,s.Z)("ios")?6:(0,s.Z)("ff")?12:32;class h{constructor(t,e,i=0,s=(t?t.byteLength:0)){this._tag=0,this._dataType=r.unknown,this._init(t,e,i,s)}_init(t,e,i,r){this._data=t,this._dataView=e,this._pos=i,this._end=r}get usedMemory(){return 64+(0,n.G7)(this._data)}asUnsafe(){return this}clone(){return new h(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const e=this._decodeVarint();if(this._tag=e>>3,this._dataType=7&e,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;if(t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128)return t;if(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)return t;if(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)return t;if(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)return t;if(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128)return t;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)}getSInt64(){return this._decodeSVarint()}getBool(){const t=0!==this._data[this._pos];return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,e=this._pos,i=t.getUint32(e,!0)+t.getUint32(e+4,!0)*a;return this._skip(8),i}getSFixed64(){const t=this._dataView,e=this._pos,i=t.getUint32(e,!0)+t.getInt32(e+4,!0)*a;return this._skip(8),i}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),e=this._pos,i=this._toString(this._data,e,e+t);return this._skip(t),i}getBytes(){const t=this._getLength(),e=this._pos,i=this._toBytes(this._data,e,e+t);return this._skip(t),i}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,e,i,r){const s=this.getMessage(),n=t(s,e,i,r);return s.release(),n}processMessage(t){const e=this.getMessage(),i=t(e);return e.release(),i}getMessage(){const t=this._getLength(),e=h.pool.acquire();return e._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),e}release(){h.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case r.varint:this._decodeVarint();break;case r.fixed64:this._skip(8);break;case r.delimited:this._skip(this._getLength());break;case r.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let e=this._pos,i=0,r=0;if(this._end-e>=10)do{if(r=t[e++],i|=127&r,!(128&r))break;if(r=t[e++],i|=(127&r)<<7,!(128&r))break;if(r=t[e++],i|=(127&r)<<14,!(128&r))break;if(r=t[e++],i|=(127&r)<<21,!(128&r))break;if(r=t[e++],i+=268435456*(127&r),!(128&r))break;if(r=t[e++],i+=34359738368*(127&r),!(128&r))break;if(r=t[e++],i+=4398046511104*(127&r),!(128&r))break;if(r=t[e++],i+=562949953421312*(127&r),!(128&r))break;if(r=t[e++],i+=72057594037927940*(127&r),!(128&r))break;if(r=t[e++],i+=0x8000000000000000*(127&r),!(128&r))break;throw new Error("Varint too long!")}while(0);else{let s=1;for(;e!==this._end&&(r=t[e],128&r);)++e,i+=(127&r)*s,s*=128;if(e===this._end)throw new Error("Varint overrun!");++e,i+=r*s}return this._pos=e,i}_decodeSVarint(){const t=this._data;let e,i=0,r=0;const s=1&t[this._pos];if(r=t[this._pos++],i|=127&r,!(128&r))return s?-(i+1)/2:i/2;if(r=t[this._pos++],i|=(127&r)<<7,!(128&r))return s?-(i+1)/2:i/2;if(r=t[this._pos++],i|=(127&r)<<14,!(128&r))return s?-(i+1)/2:i/2;if(r=t[this._pos++],i|=(127&r)<<21,!(128&r))return s?-(i+1)/2:i/2;if(r=t[this._pos++],i+=268435456*(127&r),!(128&r))return s?-(i+1)/2:i/2;if(r=t[this._pos++],i+=34359738368*(127&r),!(128&r))return s?-(i+1)/2:i/2;if(r=t[this._pos++],i+=4398046511104*(127&r),!(128&r))return s?-(i+1)/2:i/2;if(e=BigInt(i),r=t[this._pos++],e+=0x2000000000000n*BigInt(127&r),!(128&r))return Number(s?-(e+1n)/2n:e/2n);if(r=t[this._pos++],e+=0x100000000000000n*BigInt(127&r),!(128&r))return Number(s?-(e+1n)/2n:e/2n);if(r=t[this._pos++],e+=0x8000000000000000n*BigInt(127&r),!(128&r))return Number(s?-(e+1n)/2n:e/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==r.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,e,i){if((i=Math.min(this._end,i))-e>u){const r=t.subarray(e,i);return c.decode(r)}let r="",s="";for(let n=e;n<i;++n){const e=t[n];128&e?s+="%"+e.toString(16):(r+=decodeURIComponent(s)+String.fromCharCode(e),s="")}return s.length&&(r+=decodeURIComponent(s)),r}_toBytes(t,e,i){return i=Math.min(this._end,i),new Uint8Array(t.buffer,e,i-e)}}h.pool=new o.Z(h,void 0,(t=>{t._data=null,t._dataView=null}))},38958:(t,e,i)=>{i.d(e,{b:()=>c,j:()=>a});var r=i(36567),s=i(39994);let n=null,o=null;async function a(){return n||(n=async function(){const t=(0,s.Z)("esri-csp-restrictions")?await i.e(42394).then(i.bind(i,42394)).then((t=>t.l)):await i.e(87981).then(i.bind(i,87981)).then((t=>t.l));o=await t.default({locateFile:t=>(0,r.V)(`esri/core/libs/libtess/${t}`)})}()),n}function c(t,e){const i=Math.max(t.length,128e3);return o.triangulate(t,e,i)}},29882:(t,e,i)=>{i.d(e,{j:()=>c});var r=i(25245),s=i(47349),n=i(24262),o=i(20270),a=i(95215);class c{static executeEffects(t,e,i,r,s){const c=(0,a.Tg)(t);let u=new n.z(e);for(const e of t){const t=(0,o.h)(e);t&&(u=t.execute(u,e,1.3333333333333333,i,r,c,s))}return u}static applyEffects(t,e,i){if(!t)return e;const c=(0,a.Tg)(t);let u,h=new n.z(r.z.fromJSONCIM(e));for(const e of t){const t=(0,o.h)(e);t&&(h=t.execute(h,e,1,null,i,c,!1))}const l=[];let d=null;for(;u=h.next();)l.push(...(0,s.M)(u)),d=u.geometryType;return 0===l.length||null===d?null:"esriGeometryPolygon"===d?{rings:l}:{paths:l}}}},98186:(t,e,i)=>{i.d(e,{i:()=>s});var r=i(20270);class s{static getPlacement(t,e,i,s,n,o){const a=(0,r.W)(i);return a?(-1===e&&t.invertY(),a.execute(t,i,s,n,o)):null}}},54475:(t,e,i)=>{i.d(e,{z:()=>f});var r=i(25609),s=i(14266);function n(t,e){return t.x===e.x&&t.y===e.y}function o(t){if(!t)return;const e=t.length;if(e<=1)return;let i=0;for(let r=1;r<e;r++)n(t[r],t[i])||++i===r||(t[i]=t[r]);t.length=i+1}function a(t,e){return t.x=e.y,t.y=-e.x,t}function c(t,e){return t.x=-e.y,t.y=e.x,t}function u(t,e){return t.x=e.x,t.y=e.y,t}function h(t,e){return t.x=-e.x,t.y=-e.y,t}function l(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function d(t,e){return t.x*e.y-t.y*e.x}function p(t,e){return t.x*e.x+t.y*e.y}function x(t,e,i,r){return t.x=e.x*i+e.y*r,t.y=e.x*r-e.y*i,t}class f{constructor(t,e,i){this._writeVertex=t,this._writeTriangle=e,this._canUseThinTessellation=i,this._prevNormal={x:void 0,y:void 0},this._nextNormal={x:void 0,y:void 0},this._textureNormalLeft={x:0,y:1},this._textureNormalRight={x:0,y:-1},this._textureNormal={x:void 0,y:void 0},this._joinNormal={x:void 0,y:void 0},this._inner={x:void 0,y:void 0},this._outer={x:void 0,y:void 0},this._roundStart={x:void 0,y:void 0},this._roundEnd={x:void 0,y:void 0},this._startBreak={x:void 0,y:void 0},this._endBreak={x:void 0,y:void 0},this._innerPrev={x:void 0,y:void 0},this._innerNext={x:void 0,y:void 0},this._bevelStart={x:void 0,y:void 0},this._bevelEnd={x:void 0,y:void 0},this._bevelMiddle={x:void 0,y:void 0}}tessellate(t,e,i=this._canUseThinTessellation){o(t),i&&e.halfWidth<s.do&&!e.offset?this._tessellateThin(t,e):this._tessellate(t,e)}_tessellateThin(t,e){if(t.length<2)return;const i=e.wrapDistance||65535;let r=e.initialDistance||0,s=!1,n=t[0].x,o=t[0].y;const a=t.length;for(let e=1;e<a;++e){s&&(s=!1,r=0);let a=t[e].x,c=t[e].y,u=a-n,h=c-o,l=Math.sqrt(u*u+h*h);if(u/=l,h/=l,r+l>i){s=!0;const t=(i-r)/l;l=i-r,a=(1-t)*n+t*a,c=(1-t)*o+t*c,--e}const d=this._writeVertex(n,o,0,0,u,h,h,-u,0,-1,r),p=this._writeVertex(n,o,0,0,u,h,-h,u,0,1,r);r+=l;const x=this._writeVertex(a,c,0,0,u,h,h,-u,0,-1,r),f=this._writeVertex(a,c,0,0,u,h,-h,u,0,1,r);this._writeTriangle(d,p,x),this._writeTriangle(p,x,f),n=a,o=c}}_tessellate(t,e){const i=t[0],s=t[t.length-1],o=n(i,s),f=o?3:2;if(t.length<f)return;const y=e.pixelCoordRatio,_=null!=e.capType?e.capType:r.RL.BUTT,m=null!=e.joinType?e.joinType:r.AH.MITER,g=null!=e.miterLimit?Math.min(e.miterLimit,4):2,k=null!=e.roundLimit?Math.min(e.roundLimit,1.05):1.05,v=null!=e.halfWidth?e.halfWidth:2,w=!!e.textured;let b,S,T,P=null;const M=this._prevNormal,E=this._nextNormal;let F=-1,L=-1;const N=this._joinNormal;let A,I;const z=this._textureNormalLeft,D=this._textureNormalRight,B=this._textureNormal;let R=-1,G=-1;const U=e.wrapDistance||65535;let V=e.initialDistance||0;const C=this._writeVertex,Y=this._writeTriangle,O=(t,e,i,r,s,n)=>{const o=C(S,T,A,I,i,r,t,e,s,n,V);return R>=0&&G>=0&&o>=0&&Y(R,G,o),R=G,G=o,o};o&&(b=t[t.length-2],E.x=s.x-b.x,E.y=s.y-b.y,L=l(E),E.x/=L,E.y/=L);let W=!1;for(let e=0;e<t.length;++e){if(W&&(W=!1,V=0),b&&(M.x=-E.x,M.y=-E.y,F=L,V+F>U&&(W=!0)),W){const i=(U-V)/F;F=U-V,b={x:(1-i)*b.x+i*t[e].x,y:(1-i)*b.y+i*t[e].y},--e}else b=t[e];S=b.x,T=b.y;const i=e<=0&&!W,s=e===t.length-1;if(i||(V+=F),P=s?o?t[1]:null:t[e+1],P?(E.x=P.x-S,E.y=P.y-T,L=l(E),E.x/=L,E.y/=L):(E.x=void 0,E.y=void 0),!o){if(i){c(N,E),A=N.x,I=N.y,_===r.RL.SQUARE&&(O(-E.y-E.x,E.x-E.y,E.x,E.y,0,-1),O(E.y-E.x,-E.x-E.y,E.x,E.y,0,1)),_===r.RL.ROUND&&(O(-E.y-E.x,E.x-E.y,E.x,E.y,-1,-1),O(E.y-E.x,-E.x-E.y,E.x,E.y,-1,1)),_!==r.RL.ROUND&&_!==r.RL.BUTT||(O(-E.y,E.x,E.x,E.y,0,-1),O(E.y,-E.x,E.x,E.y,0,1));continue}if(s){a(N,M),A=N.x,I=N.y,_!==r.RL.ROUND&&_!==r.RL.BUTT||(O(M.y,-M.x,-M.x,-M.y,0,-1),O(-M.y,M.x,-M.x,-M.y,0,1)),_===r.RL.SQUARE&&(O(M.y-M.x,-M.x-M.y,-M.x,-M.y,0,-1),O(-M.y-M.x,M.x-M.y,-M.x,-M.y,0,1)),_===r.RL.ROUND&&(O(M.y-M.x,-M.x-M.y,-M.x,-M.y,1,-1),O(-M.y-M.x,M.x-M.y,-M.x,-M.y,1,1));continue}}let n,f,C=-d(M,E);if(Math.abs(C)<.01)p(M,E)>0?(N.x=M.x,N.y=M.y,C=1,n=Number.MAX_VALUE,f=!0):(c(N,E),C=1,n=1,f=!1);else{N.x=(M.x+E.x)/C,N.y=(M.y+E.y)/C,n=l(N);const t=(n-1)*v*y;f=n>4||t>F&&t>L}A=N.x,I=N.y;let Y=m;switch(m){case r.AH.BEVEL:n<1.05&&(Y=r.AH.MITER);break;case r.AH.ROUND:n<k&&(Y=r.AH.MITER);break;case r.AH.MITER:n>g&&(Y=r.AH.BEVEL)}switch(Y){case r.AH.MITER:if(O(N.x,N.y,-M.x,-M.y,0,-1),O(-N.x,-N.y,-M.x,-M.y,0,1),s)break;if(w){const t=W?0:V;R=this._writeVertex(S,T,A,I,E.x,E.y,N.x,N.y,0,-1,t),G=this._writeVertex(S,T,A,I,E.x,E.y,-N.x,-N.y,0,1,t)}break;case r.AH.BEVEL:{const t=C<0;let e,i,r,n;if(t){const t=R;R=G,G=t,e=z,i=D}else e=D,i=z;if(f)r=t?c(this._innerPrev,M):a(this._innerPrev,M),n=t?a(this._innerNext,E):c(this._innerNext,E);else{const e=t?h(this._inner,N):u(this._inner,N);r=e,n=e}const o=t?a(this._bevelStart,M):c(this._bevelStart,M);O(r.x,r.y,-M.x,-M.y,e.x,e.y);const l=O(o.x,o.y,-M.x,-M.y,i.x,i.y);if(s)break;const d=t?c(this._bevelEnd,E):a(this._bevelEnd,E);if(f){const t=this._writeVertex(S,T,A,I,-M.x,-M.y,0,0,0,0,V);R=this._writeVertex(S,T,A,I,E.x,E.y,n.x,n.y,e.x,e.y,V),G=this._writeVertex(S,T,A,I,E.x,E.y,d.x,d.y,i.x,i.y,V),this._writeTriangle(l,t,G)}else{if(w){const t=this._bevelMiddle;t.x=(o.x+d.x)/2,t.y=(o.y+d.y)/2,x(B,t,-M.x,-M.y),O(t.x,t.y,-M.x,-M.y,B.x,B.y),x(B,t,E.x,E.y),R=this._writeVertex(S,T,A,I,E.x,E.y,t.x,t.y,B.x,B.y,V),G=this._writeVertex(S,T,A,I,E.x,E.y,n.x,n.y,e.x,e.y,V)}else{const t=R;R=G,G=t}O(d.x,d.y,E.x,E.y,i.x,i.y)}if(t){const t=R;R=G,G=t}break}case r.AH.ROUND:{const t=C<0;let e,i;if(t){const t=R;R=G,G=t,e=z,i=D}else e=D,i=z;const r=t?h(this._inner,N):u(this._inner,N);let o,l;f?(o=t?c(this._innerPrev,M):a(this._innerPrev,M),l=t?a(this._innerNext,E):c(this._innerNext,E)):(o=r,l=r);const d=t?a(this._roundStart,M):c(this._roundStart,M),y=t?c(this._roundEnd,E):a(this._roundEnd,E),_=O(o.x,o.y,-M.x,-M.y,e.x,e.y),m=O(d.x,d.y,-M.x,-M.y,i.x,i.y);if(s)break;const g=this._writeVertex(S,T,A,I,-M.x,-M.y,0,0,0,0,V);f||this._writeTriangle(R,G,g);const k=h(this._outer,r),v=this._writeVertex(S,T,A,I,E.x,E.y,y.x,y.y,i.x,i.y,V);let b,P;const F=n>2;if(F){let e;n!==Number.MAX_VALUE?(k.x/=n,k.y/=n,e=p(M,k),e=(n*(e*e-1)+1)/e):e=-1,b=t?a(this._startBreak,M):c(this._startBreak,M),b.x+=M.x*e,b.y+=M.y*e,P=t?c(this._endBreak,E):a(this._endBreak,E),P.x+=E.x*e,P.y+=E.y*e}x(B,k,-M.x,-M.y);const L=this._writeVertex(S,T,A,I,-M.x,-M.y,k.x,k.y,B.x,B.y,V);x(B,k,E.x,E.y);const U=w?this._writeVertex(S,T,A,I,E.x,E.y,k.x,k.y,B.x,B.y,V):L,Y=g,W=w?this._writeVertex(S,T,A,I,E.x,E.y,0,0,0,0,V):g;let H=-1,X=-1;if(F&&(x(B,b,-M.x,-M.y),H=this._writeVertex(S,T,A,I,-M.x,-M.y,b.x,b.y,B.x,B.y,V),x(B,P,E.x,E.y),X=this._writeVertex(S,T,A,I,E.x,E.y,P.x,P.y,B.x,B.y,V)),w?F?(this._writeTriangle(Y,m,H),this._writeTriangle(Y,H,L),this._writeTriangle(W,U,X),this._writeTriangle(W,X,v)):(this._writeTriangle(Y,m,L),this._writeTriangle(W,U,v)):F?(this._writeTriangle(g,m,H),this._writeTriangle(g,H,X),this._writeTriangle(g,X,v)):(this._writeTriangle(g,m,L),this._writeTriangle(g,U,v)),f?(R=this._writeVertex(S,T,A,I,E.x,E.y,l.x,l.y,e.x,e.y,V),G=v):(R=w?this._writeVertex(S,T,A,I,E.x,E.y,l.x,l.y,e.x,e.y,V):_,this._writeTriangle(R,W,v),G=v),t){const t=R;R=G,G=t}break}}}}}},32458:(t,e,i)=>{i.d(e,{dx:()=>V,tZ:()=>U,bT:()=>R,so:()=>G});i(5992);var r=i(38958),s=i(82584),n=i(15540),o=i(14266);i(39994);function a(t,e,i,r,s,n,o){A=0;const a=(r-i)*n,u=s&&s.length,l=u?(s[0]-i)*n:a;let d,p,x,f,_,m=c(e,i,r,0,l,n,!0);if(m&&m.next!==m.prev){if(u&&(m=y(e,i,r,s,m,n)),a>80*n){d=x=e[0+i*n],p=f=e[1+i*n];for(let t=n;t<l;t+=n){const r=e[t+i*n],s=e[t+1+i*n];d=Math.min(d,r),p=Math.min(p,s),x=Math.max(x,r),f=Math.max(f,s)}_=Math.max(x-d,f-p),_=0!==_?1/_:0}h(m,t,n,d,p,_,o,0)}}function c(t,e,i,r,s,n,o){let a;if(o===function(t,e,i,r,s,n){let o=0;for(let i=r,a=s-n;i<s;i+=n)o+=(t[a+e*n]-t[i+e*n])*(t[i+1+e*n]+t[a+1+e*n]),a=i;return o}(t,e,0,r,s,n)>0)for(let i=r;i<s;i+=n)a=p(i+e*n,t[i+e*n],t[i+1+e*n],a);else for(let i=s-n;i>=r;i-=n)a=p(i+e*n,t[i+e*n],t[i+1+e*n],a);return a&&S(a,a.next)&&(x(a),a=a.next),a}function u(t,e=t){if(!t)return t;let i,r=t;do{if(i=!1,r.steiner||!S(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(x(r),r=e=r.prev,r===r.next)break;i=!0}}while(i||r!==e);return e}function h(t,e,i,r,s,n,o,a){if(!t)return;!a&&n&&(t=m(t,r,s,n));let c=t;for(;t.prev!==t.next;){const p=t.prev,f=t.next;if(n?d(t,r,s,n):l(t))e.push(p.index/i+o),e.push(t.index/i+o),e.push(f.index/i+o),x(t),t=f.next,c=f.next;else if((t=f)===c){a?1===a?h(t=P(t,e,i,o),e,i,r,s,n,o,2):2===a&&M(t,e,i,r,s,n,o):h(u(t),e,i,r,s,n,o,1);break}}}function l(t){const e=t.prev,i=t,r=t.next;if(g(e,i,r)>=0)return!1;let s=t.next.next;const n=s;let o=0;for(;s!==t.prev&&(0===o||s!==n);){if(o++,v(e.x,e.y,i.x,i.y,r.x,r.y,s.x,s.y)&&g(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function d(t,e,i,r){const s=t.prev,n=t,o=t.next;if(g(s,n,o)>=0)return!1;const a=s.x<n.x?s.x<o.x?s.x:o.x:n.x<o.x?n.x:o.x,c=s.y<n.y?s.y<o.y?s.y:o.y:n.y<o.y?n.y:o.y,u=s.x>n.x?s.x>o.x?s.x:o.x:n.x>o.x?n.x:o.x,h=s.y>n.y?s.y>o.y?s.y:o.y:n.y>o.y?n.y:o.y,l=b(a,c,e,i,r),d=b(u,h,e,i,r);let p=t.prevZ,x=t.nextZ;for(;p&&p.z>=l&&x&&x.z<=d;){if(p!==t.prev&&p!==t.next&&v(s.x,s.y,n.x,n.y,o.x,o.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,x!==t.prev&&x!==t.next&&v(s.x,s.y,n.x,n.y,o.x,o.y,x.x,x.y)&&g(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;p&&p.z>=l;){if(p!==t.prev&&p!==t.next&&v(s.x,s.y,n.x,n.y,o.x,o.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;x&&x.z<=d;){if(x!==t.prev&&x!==t.next&&v(s.x,s.y,n.x,n.y,o.x,o.y,x.x,x.y)&&g(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function p(t,e,i,r){const s=L.create(t,e,i);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function x(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function f(t){let e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function y(t,e,i,r,s,n){const o=new Array;for(let s=0,a=r.length;s<a;s++){const u=c(t,e,0,r[s]*n,s<a-1?r[s+1]*n:i*n,n,!1);u===u.next&&(u.steiner=!0),o.push(f(u))}o.sort(T);for(const t of o)s=_(t,s);return s}function _(t,e){const i=function(t,e){let i=e;const r=t.x,s=t.y;let n,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){const t=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(t<=r&&t>o){if(o=t,t===r){if(s===i.y)return i;if(s===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===o)return n.prev;const a=n,c=n.x,u=n.y;let h,l=1/0;for(i=n.next;i!==a;)r>=i.x&&i.x>=c&&r!==i.x&&v(s<u?r:o,s,c,u,s<u?o:r,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(r-i.x),(h<l||h===l&&i.x>n.x)&&w(i,t)&&(n=i,l=h)),i=i.next;return n}(t,e);if(!i)return e;const r=F(i,t);return u(r,r.next),u(i,i.next)}function m(t,e,i,r){let s;for(;s!==t;s=s.next){if(s=s||t,null===s.z&&(s.z=b(s.x,s.y,e,i,r)),s.prev.next!==s||s.next.prev!==s)return s.prev.next=s,s.next.prev=s,m(t,e,i,r);s.prevZ=s.prev,s.nextZ=s.next}return t.prevZ.nextZ=null,t.prevZ=null,function(t){let e,i=1;for(;;){let r,s=t;t=null,e=null;let n=0;for(;s;){n++,r=s;let o=0;for(;o<i&&r;o++)r=r.nextZ;let a=i;for(;o>0||a>0&&r;){let i;0===o?(i=r,r=r.nextZ,a--):0!==a&&r?s.z<=r.z?(i=s,s=s.nextZ,o--):(i=r,r=r.nextZ,a--):(i=s,s=s.nextZ,o--),e?e.nextZ=i:t=i,i.prevZ=e,e=i}s=r}if(e.nextZ=null,i*=2,n<2)return t}}(t)}function g(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function k(t,e,i,r){return!!(S(t,e)&&S(i,r)||S(t,r)&&S(i,e))||g(t,e,i)>0!=g(t,e,r)>0&&g(i,r,t)>0!=g(i,r,e)>0}function v(t,e,i,r,s,n,o,a){return(s-o)*(e-a)-(t-o)*(n-a)>=0&&(t-o)*(r-a)-(i-o)*(e-a)>=0&&(i-o)*(n-a)-(s-o)*(r-a)>=0}function w(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function b(t,e,i,r,s){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*s)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*s)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function S(t,e){return t.x===e.x&&t.y===e.y}function T(t,e){return t.x-e.x}function P(t,e,i,r){let s=t;do{const n=s.prev,o=s.next.next;!S(n,o)&&k(n,s,s.next,o)&&w(n,o)&&w(o,n)&&(e.push(n.index/i+r),e.push(s.index/i+r),e.push(o.index/i+r),x(s),x(s.next),s=t=o),s=s.next}while(s!==t);return s}function M(t,e,i,r,s,n,o){let a=t;do{let t=a.next.next;for(;t!==a.prev;){if(a.index!==t.index&&E(a,t)){let c=F(a,t);return a=u(a,a.next),c=u(c,c.next),h(a,e,i,r,s,n,o,0),void h(c,e,i,r,s,n,o,0)}t=t.next}a=a.next}while(a!==t)}function E(t,e){return t.next.index!==e.index&&t.prev.index!==e.index&&!function(t,e){let i=t;do{if(i.index!==t.index&&i.next.index!==t.index&&i.index!==e.index&&i.next.index!==e.index&&k(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&w(t,e)&&w(e,t)&&function(t,e){let i=t,r=!1;const s=(t.x+e.x)/2,n=(t.y+e.y)/2;do{i.y>n!=i.next.y>n&&i.next.y!==i.y&&s<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)}function F(t,e){const i=L.create(t.index,t.x,t.y),r=L.create(e.index,e.x,e.y),s=t.next,n=e.prev;return t.next=e,e.prev=t,i.next=s,s.prev=i,r.next=i,i.prev=r,n.next=r,r.prev=n,r}class L{constructor(){this.index=0,this.x=0,this.y=0,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}static create(t,e,i){const r=A<N.length?N[A++]:new L;return r.index=t,r.x=e,r.y=i,r.prev=null,r.next=null,r.z=null,r.prevZ=null,r.nextZ=null,r.steiner=!1,r}}const N=[];let A=0;for(let t=0;t<8096;t++)N.push(new L);const I=new s.bN(0,0,0,1,0),z=new s.bN(0,0,0,1,0);function D(t,e,i){let r=0;for(let s=1;s<i;s++){const i=t[2*(e+s-1)],n=t[2*(e+s-1)+1];r+=(t[2*(e+s)]-i)*(t[2*(e+s)+1]+n)}return r}function B(t,e,i,r,s){let n=0;for(let o=i;o<r;o+=3){const i=2*(t[o]-s),r=2*(t[o+1]-s),a=2*(t[o+2]-s);n+=Math.abs((e[i]-e[a])*(e[r+1]-e[i+1])-(e[i]-e[r])*(e[a+1]-e[i+1]))}return n}function R(t,e){const{coords:i,lengths:r}=e,s=t;let n=0;for(let t=0;t<r.length;){let e=t,o=r[t],c=D(i,n,o);const u=[];for(;++e<r.length;){const t=r[e],s=D(i,n+o,t);if(!(s>0))break;c+=s,u.push(n+o),o+=t}const h=s.length;a(s,i,n,n+o,u,2,0);const l=B(s,i,h,s.length,0),d=Math.abs(c);if(Math.abs((l-d)/Math.max(1e-7,d))>1e-5)return s.length=0,!1;t=e,n+=o}return!0}function G(t){const{coords:e,lengths:i}=t,{buffer:s}=(0,r.b)(e,i);return s}function U(t,e){if(null==t)return null;if(!function(t,e,i){let r=0;for(let s=0;s<t.lengths.length;s++){const n=t.lengths[s];for(let s=0;s<n;s++){const n=t.coords[2*(s+r)],o=t.coords[2*(s+r)+1];if(n<e||n>i||o<e||o>i)return!0}r+=n}return!1}(t,-128,o.i9+128))return t;I.setPixelMargin(e),I.reset(s.Vl.Polygon);let i=0;for(let e=0;e<t.lengths.length;e++){const r=t.lengths[e];let s=t.coords[2*(0+i)],n=t.coords[2*(0+i)+1];I.moveTo(s,n);for(let e=1;e<r;e++)s=t.coords[2*(e+i)],n=t.coords[2*(e+i)+1],I.lineTo(s,n);I.close(),i+=r}const r=I.result(!1);if(!r)return null;const a=[],c=[];for(const t of r){let e=0;for(const i of t)c.push(i.x),c.push(i.y),e++;a.push(e)}return new n.Z(a,c)}function V(t,e){z.setPixelMargin(e);const i=z,r=-e,n=o.i9+e;let a=[],c=!1;if(!t.nextPath())return null;let u=t.pathLength(),h=!0;for(;h;){t.seekPathStart();const e=[];if(!t.pathSize)return null;i.reset(s.Vl.LineString),t.nextPoint();let o=t.x,l=t.y;if(c)i.moveTo(o,l);else{if(o<r||o>n||l<r||l>n){c=!0;continue}e.push({x:o,y:l})}let d=!1;for(;t.nextPoint();)if(o=t.x,l=t.y,c)i.lineTo(o,l);else{if(o<r||o>n||l<r||l>n){d=!0;break}e.push({x:o,y:l})}if(d)c=!0;else{if(c){const t=i.resultWithStarts();if(t)for(const e of t)a.push({...e,pathLength:u})}else a.push({line:e,start:0,pathLength:u});h=t.nextPath(),u=h?t.pathLength():0,c=!1}}return a=a.filter((t=>t.line.length>1)),0===a.length?null:a}I.setExtent(o.i9),z.setExtent(o.i9)},69056:(t,e,i)=>{i.d(e,{Z:()=>o});var r=i(69091),s=i(91907);const n={createComputedParams:t=>t,optionalAttributes:{},attributes:{id:{type:s.g.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:s.g.UNSIGNED_BYTE,count:1},pos:{type:s.g.SHORT,count:2,pack:"position",packPrecisionFactor:10},inverseArea:{type:s.g.FLOAT,count:1,packTessellation:({inverseArea:t})=>t}}};class o extends r.r{constructor(){super(...arguments),this.vertexSpec=n}createTesselationParams(t){return{inverseArea:1/t.readGeometryArea()}}}},69091:(t,e,i)=>{i.d(e,{r:()=>c});var r=i(39994),s=i(38958),n=i(32458),o=i(63134);const a=(0,r.Z)("featurelayer-fast-triangulation-enabled");class c extends o.c{async loadDependencies(){await Promise.all([super.loadDependencies(),(0,s.j)()])}_write(t,e,i){const r=i?.asOptimized()??e.readGeometryForDisplay(),s=this._clip(r);s&&(t.recordStart(this.instanceId,this.attributeLayout),this._writeGeometry(t,e,s),t.recordEnd())}_clip(t){if(!t)return null;const e=this.hasEffects;return(0,n.tZ)(t,e?256:8)}_writeGeometry(t,e,i){const r=i.maxLength>100,s=[],o=this.createTesselationParams(e);if(!r&&a&&(0,n.bT)(s,i))return void(s.length&&this._writeVertices(t,e,i.coords,o,s));const c=(0,n.so)(i);this._writeVertices(t,e,c,o)}_writeVertices(t,e,i,r,s){const n=e.getDisplayId(),o=t.vertexCount(),a=this.hasEffects;let c=0;if(s)for(const e of s){const s=i[2*e],o=i[2*e+1];a&&t.recordBounds(s,o,0,0),this._writeVertex(t,n,s,o,r),c++}else for(let e=0;e<i.length;e+=2){const s=Math.round(i[e]),o=Math.round(i[e+1]);a&&t.recordBounds(s,o,0,0),this._writeVertex(t,n,s,o,r),c++}t.indexEnsureSize(c);for(let e=0;e<c;e++)t.indexWrite(e+o)}}},66150:(t,e,i)=>{i.d(e,{MG:()=>h,MW:()=>u,Mb:()=>l,h5:()=>d});var r=i(95550),s=i(93944),n=i(39414),o=i(27346),a=i(44255),c=i(91907);function u(t){const{sprite:e,aspectRatio:i,scaleProportionally:s}=t,n=(0,r.F2)(t.height),o=n>0?n:e.height;let a=n*i;return a<=0?a=e.width:s&&(a*=e.width/e.height),{width:a,height:o}}function h(t){const{applyRandomOffset:e,sampleAlphaOnly:i}=t;return(0,n.u)([[a.Ux,e],[a.GS,i]])}const l={createComputedParams:t=>t,optionalAttributes:o.w.optionalAttributes,attributes:{...o.w.attributes,bitset:{count:1,type:c.g.UNSIGNED_BYTE,pack:h},width:{count:1,type:c.g.HALF_FLOAT,pack:t=>u(t).width},height:{count:1,type:c.g.HALF_FLOAT,pack:t=>u(t).height},offset:{count:2,type:c.g.HALF_FLOAT,pack:({offsetX:t,offsetY:e})=>[(0,r.F2)(t),-(0,r.F2)(e)]},scale:{count:2,type:c.g.UNSIGNED_BYTE,packPrecisionFactor:16,pack:({scaleX:t,scaleY:e})=>[t,e]},angle:{count:1,type:c.g.UNSIGNED_BYTE,pack:({angle:t})=>(0,s.s5)(t)}}};class d extends o.H{constructor(){super(...arguments),this.vertexSpec=l}}},52798:(t,e,i)=>{i.d(e,{f:()=>f});var r=i(95550),s=i(25245),n=i(66150),o=i(39414),a=i(78908),c=i(44255),u=i(91907);const h=n.Mb,l=a.OQ,d={createComputedParams:t=>t,optionalAttributes:h.optionalAttributes,attributes:{...h.attributes,bitset:{type:u.g.UNSIGNED_BYTE,count:1,pack:t=>(0,n.MG)(t)},aux1:{count:1,type:u.g.HALF_FLOAT,pack:t=>(0,n.MW)(t).width},aux2:{count:1,type:u.g.HALF_FLOAT,pack:t=>(0,n.MW)(t).height},aux3:{count:2,type:u.g.HALF_FLOAT,pack:({offsetX:t,offsetY:e})=>[(0,r.F2)(t),(0,r.F2)(e)]},aux4:{count:2,type:u.g.UNSIGNED_BYTE,pack:({scaleX:t,scaleY:e})=>[t*c.$1,e*c.$1]}}},p={createComputedParams:t=>t,optionalAttributes:h.optionalAttributes,attributes:{...h.attributes,color:l.attributes.color,bitset:{type:u.g.UNSIGNED_BYTE,count:1,pack:t=>(0,o.u)([[c.WD,!0]])},aux1:{count:1,type:u.g.HALF_FLOAT,pack:t=>(0,r.F2)(.5*t.width)},aux2:{count:1,type:u.g.HALF_FLOAT,pack:t=>(0,r.F2)(.5*t.referenceWidth)},aux3:{count:2,type:u.g.HALF_FLOAT,packTessellation:({extrusionOffsetX:t,extrusionOffsetY:e})=>[t,e]},aux4:{count:2,type:u.g.UNSIGNED_BYTE,packTessellation:({normalX:t,normalY:e})=>[t*c.$1+c.NS,e*c.$1+c.NS]}}};class x extends a.B2{constructor(){super(...arguments),this.vertexSpec=p}}class f extends a.nT{constructor(){super(...arguments),this.vertexSpec=d}_createOutlineWriter(t,e,i,r){return new x(t,e,i,r)}_write(t,e,i){const r=i?.asOptimized()??e.readGeometryForDisplay(),n=this._clip(r);if(!n)return;const o=this.evaluatedMeshParams.sprite?.textureBinding;t.recordStart(this.instanceId,this.attributeLayout,o),this._writeGeometry(t,e,n),this._lineMeshWriter.writeLineVertices(t,s.z.fromOptimizedCIM(n,"esriGeometryPolyline"),e),t.recordEnd()}ensurePacked(t,e,i){super.ensurePacked(t,e,i),this._lineMeshWriter.ensurePacked(t,e,i)}enqueueRequest(t,e,i){super.enqueueRequest(t,e,i),this._lineMeshWriter.enqueueRequest(t,e,i)}async loadDependencies(){await Promise.all([super.loadDependencies(),this._lineMeshWriter.loadDependencies()])}}},64797:(t,e,i)=>{i.d(e,{Q:()=>c,a:()=>a});var r=i(14266),s=i(69091),n=i(39414),o=i(91907);const a={createComputedParams:t=>t,optionalAttributes:{zoomRange:{type:o.g.SHORT,count:2,packPrecisionFactor:r.JS,pack:({scaleInfo:t},{tileInfo:e})=>(0,n._f)(t,e)}},attributes:{id:{type:o.g.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:o.g.UNSIGNED_BYTE,count:1},pos:{type:o.g.SHORT,count:2,pack:"position",packPrecisionFactor:10},color:{type:o.g.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:t})=>(0,n.G7)(t)}}};class c extends s.r{constructor(){super(...arguments),this.vertexSpec=a}createTesselationParams(t){return null}}},54723:(t,e,i)=>{i.d(e,{L:()=>k});var r=i(25609),s=i(14266),n=i(69091),o=i(64797),a=i(33988),c=i(13802),u=i(19431),h=i(95550);class l{constructor(t,e){this._size=t,this._sizeUnits=e,this._relativeSize=null}get relativeSize(){return this._relativeSize??=this.calculateRelativeSize(),this._relativeSize}calculateRelativeSize(){if(this._sizeUnits===r.IH.Relative){const t=Math.min(this._size/100,1);return[t,t]}return this.calculateRelativeSizeFromAbsolute()}}class d extends l{constructor(t,e,i,r){super(e,i),this.rotationMatrix00=1,this.rotationMatrix01=0,this.rotationMatrix10=0,this.rotationMatrix11=1,this.bounds={xmin:1/0,ymin:1/0,xmax:-1/0,ymax:-1/0},this.rotationMatrix00=Math.cos(r),this.rotationMatrix01=-Math.sin(r),this.rotationMatrix10=-this.rotationMatrix01,this.rotationMatrix11=this.rotationMatrix00;const{bounds:s,rotationMatrix00:n,rotationMatrix01:o,rotationMatrix10:a,rotationMatrix11:c}=this;t.forEachVertex(((t,e)=>{const i=t*n+e*o,r=t*a+e*c;s.xmin=Math.min(s.xmin,i),s.ymin=Math.min(s.ymin,r),s.xmax=Math.max(s.xmax,i),s.ymax=Math.max(s.ymax,r)})),this.center=[(s.xmin+s.xmax)/2,(s.ymin+s.ymax)/2]}}class p extends d{constructor(t,e,i,r){super(t,e,i,r),this.method="linear"}getRelativePosition(t,e){const{rotationMatrix00:i,rotationMatrix01:r,bounds:s}=this,{xmin:n,xmax:o}=s;return[(t*i+e*r-n)/(o-n),0]}calculateRelativeSizeFromAbsolute(){const{_size:t,bounds:e}=this,{xmin:i,xmax:r}=e;return[(0,h.F2)(t)/(r-i),0]}}class x extends d{constructor(t,e,i,r){super(t,e,i,r),this.method="rectangular"}getRelativePosition(t,e){const{bounds:i,center:r,rotationMatrix00:s,rotationMatrix01:n,rotationMatrix10:o,rotationMatrix11:a}=this,c=t*o+e*a,u=t*s+e*n-r[0],h=c-r[1];return[u*(2/(i.xmax-i.xmin)),-h*(2/(i.ymax-i.ymin))]}calculateRelativeSizeFromAbsolute(){const{_size:t,bounds:e}=this,{xmin:i,ymin:r,xmax:s,ymax:n}=e;return[(0,h.F2)(2*t)/(s-i),(0,h.F2)(2*t)/(n-r)]}}class f extends d{constructor(t,e,i){super(t,e,i,0),this.method="circular";const{xmin:r,xmax:s,ymin:n,ymax:o}=this.bounds,a=s-r,c=o-n;this.radius=Math.sqrt(a*a+c*c)/2}getRelativePosition(t,e){const{center:i,radius:r}=this;return[(t-i[0])/r,-(e-i[1])/r]}calculateRelativeSizeFromAbsolute(){const{_size:t}=this;return[(0,h.F2)(t)/this.radius,0]}}function y(t,e){if(null==t)return null;const i=(0,u.Vl)(e.angle),r=e.gradientSize,s=e.gradientSizeUnits;switch(e.gradientMethod.toLowerCase()){case"linear":return new p(t,r,s,i);case"rectangular":return new x(t,r,s,i);case"circular":return new f(t,r,s);default:return c.Z.getLogger("esri.views.2d.engine.webgl.shaderGraph.techniques.fill.GradientSizeHelper").errorOnce(`Gradient fill method "${e.gradientMethod}" currently unsupported.`),null}}var _=i(39414),m=i(91907);const g={createComputedParams:t=>t,optionalAttributes:o.a.optionalAttributes,attributes:{...o.a.attributes,bitset:{type:m.g.UNSIGNED_BYTE,count:1,pack:({gradientSizeUnits:t,gradientType:e})=>{let i=0;return t===r.IH.Absolute&&(i|=(0,_.NF)(a.s.isAbsolute)),"discrete"===e.toLowerCase()&&(i|=(0,_.NF)(a.s.isDiscrete)),i}},tlbr:{count:4,type:m.g.UNSIGNED_SHORT,pack:({sprite:t})=>{const{rect:e,width:i,height:r}=t,n=e.x+s.s4+s.aV,o=e.y+s.s4;return[n,o,n+i-2*s.aV,o+r]}},relativePosition:{count:2,type:m.g.HALF_FLOAT,packTessellation:({gradientStats:t},e,i,r)=>t?.getRelativePosition(i,r)??[0,0]},relativeGradientSize:{count:2,type:m.g.HALF_FLOAT,packTessellation:({gradientStats:t})=>t?.relativeSize??[1,1]},gradientMethod:{count:1,type:m.g.UNSIGNED_BYTE,pack:({gradientMethod:t})=>{switch(t.toLowerCase()){case"rectangular":return a.T.rectangular;case"circular":return a.T.circular;default:return a.T.linear}}}}};class k extends n.r{constructor(){super(...arguments),this.vertexSpec=g}get _preventEffectClipping(){return!0}createTesselationParams(t){return{gradientStats:y(t.readGeometryForDisplay(),this.evaluatedMeshParams)}}_write(t,e,i){const r=i?.asOptimized()??e.readGeometryForDisplay(),s=this._clip(r);if(!s)return;const n=this.evaluatedMeshParams.sprite?.textureBinding;t.recordStart(this.instanceId,this.attributeLayout,n),this._writeGeometry(t,e,s),t.recordEnd()}}},78908:(t,e,i)=>{i.d(e,{B2:()=>p,OQ:()=>d,nT:()=>x,s9:()=>l});var r=i(25245),s=i(32458),n=i(64797),o=i(39414),a=i(14146),c=i(12441),u=i(44255),h=i(91907);const l={createComputedParams:t=>t,optionalAttributes:a.bT.optionalAttributes,attributes:{...a.bT.attributes,bitset:{type:h.g.UNSIGNED_BYTE,count:1,pack:t=>0},color:{type:h.g.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:t})=>(0,o.G7)(t)}}},d={createComputedParams:t=>t,optionalAttributes:a.bT.optionalAttributes,attributes:{...a.bT.attributes,bitset:{type:h.g.UNSIGNED_BYTE,count:1,pack:t=>(0,o.u)([[u.WD,!0]])},color:{type:h.g.UNSIGNED_BYTE,count:4,normalized:!0,pack:({outlineColor:t})=>(0,o.G7)(t)}}};class p extends a.ti{constructor(){super(...arguments),this.vertexSpec=d}}class x extends n.Q{constructor(t,e,i,r){super(t,e,i,r),this.vertexSpec=l,this._lineMeshWriter=this._createOutlineWriter(t,e,i,r)}_createOutlineWriter(t,e,i,r){return new p(t,e,i,r)}_write(t,e,i){const s=i?.asOptimized()??e.readGeometryForDisplay(),n=this._clip(s);n&&(t.recordStart(this.instanceId,this.attributeLayout),this._writeGeometry(t,e,n),this._lineMeshWriter.writeLineVertices(t,r.z.fromOptimizedCIM(n,"esriGeometryPolyline"),e),t.recordEnd())}_clip(t){return t?(0,s.tZ)(t,(0,c.b8)(this.evaluatedMeshParams)):null}ensurePacked(t,e,i){super.ensurePacked(t,e,i),this._lineMeshWriter.ensurePacked(t,e,i)}enqueueRequest(t,e,i){super.enqueueRequest(t,e,i),this._lineMeshWriter.enqueueRequest(t,e,i)}async loadDependencies(){await Promise.all([super.loadDependencies(),this._lineMeshWriter.loadDependencies()])}}},27346:(t,e,i)=>{i.d(e,{H:()=>a,w:()=>o});var r=i(14266),s=i(64797),n=i(91907);const o={createComputedParams:t=>t,optionalAttributes:s.a.optionalAttributes,attributes:{...s.a.attributes,tlbr:{count:4,type:n.g.UNSIGNED_SHORT,pack:({sprite:t})=>{const{rect:e,width:i,height:s}=t,n=e.x+r.s4,o=e.y+r.s4;return[n,o,n+i,o+s]}},inverseRasterizationScale:{count:1,type:n.g.BYTE,packPrecisionFactor:16,pack:({sprite:t})=>1/t.rasterizationScale}}};class a extends s.Q{constructor(){super(...arguments),this.vertexSpec=o}_write(t,e,i){const r=i?.asOptimized()??e.readGeometryForDisplay(),s=this._clip(r);if(!s)return;const n=this.evaluatedMeshParams.sprite?.textureBinding;t.recordStart(this.instanceId,this.attributeLayout,n),this._writeGeometry(t,e,s),t.recordEnd()}}},97344:(t,e,i)=>{i.d(e,{i:()=>u});var r=i(25245),s=i(78908),n=i(27346);const o={optionalAttributes:n.w.optionalAttributes,createComputedParams:t=>t,attributes:{...n.w.attributes,...s.s9.attributes}},a={optionalAttributes:n.w.optionalAttributes,createComputedParams:t=>t,attributes:{...n.w.attributes,...s.OQ.attributes}};class c extends s.B2{constructor(){super(...arguments),this.vertexSpec=a}}class u extends s.nT{constructor(){super(...arguments),this.vertexSpec=o}_createOutlineWriter(t,e,i,r){return new c(t,e,i,r)}_write(t,e,i){const s=i?.asOptimized()??e.readGeometryForDisplay(),n=this._clip(s);if(!n)return;const o=this.evaluatedMeshParams.sprite?.textureBinding;t.recordStart(this.instanceId,this.attributeLayout,o),this._writeGeometry(t,e,n),this._lineMeshWriter.writeLineVertices(t,r.z.fromOptimizedCIM(n,"esriGeometryPolyline"),e),t.recordEnd()}ensurePacked(t,e,i){super.ensurePacked(t,e,i),this._lineMeshWriter.ensurePacked(t,e,i)}enqueueRequest(t,e,i){super.enqueueRequest(t,e,i),this._lineMeshWriter.enqueueRequest(t,e,i)}async loadDependencies(){await Promise.all([super.loadDependencies(),this._lineMeshWriter.loadDependencies()])}}},39414:(t,e,i)=>{i.d(e,{G7:()=>h,L:()=>l,Lq:()=>d,NF:()=>c,QS:()=>p,_f:()=>a,kU:()=>x,u:()=>u});var r=i(30936),s=i(70375),n=i(13802),o=i(25609);function a(t,e){return[!!t?.minScale&&e.scaleToZoom(t.minScale)||0,!!t?.maxScale&&e.scaleToZoom(t.maxScale)||100]}function c(t){return 1<<t}function u(t){let e=0;for(const[i,r]of t)r&&(e|=1<<i);return e}function h(t){let e;if(!t)return[0,0,0,0];if("string"==typeof t){const i=r.Z.fromString(t);if(!i)return n.Z.getLogger("esri.views.2d.engine.webgl.shaderGraph.techniques.meshWriterUtils").errorOnce(new s.Z("mapview:mesh-processing","Unable to parse string into color",{color:t})),[0,0,0,0];e=i.toArray()}else e=t;const[i,o,a,c]=e;return[i*(c/255),o*(c/255),a*(c/255),c]}function l(t){switch(t){case"butt":case o.kP.Butt:return o.RL.BUTT;case"round":case o.kP.Round:return o.RL.ROUND;case"square":case o.kP.Square:return o.RL.SQUARE}}function d(t){switch(t){case"bevel":case o.r4.Bevel:return o.AH.BEVEL;case"miter":case o.r4.Miter:return o.AH.MITER;case"round":case o.r4.Round:return o.AH.ROUND}}function p(t,e){return Math.round(Math.min(Math.sqrt(t*e),255))}function x(t,e){return Math.round(t*e)/e}},78866:(t,e,i)=>{i.d(e,{E:()=>o});var r=i(63134),s=i(91907);const n={createComputedParams:t=>t,optionalAttributes:{},attributes:{pos:{type:s.g.SHORT,count:2,pack:"position",packPrecisionFactor:10},id:{type:s.g.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:s.g.UNSIGNED_BYTE,count:1},offset:{type:s.g.BYTE,count:2,packAlternating:{count:4,pack:()=>[[-1,-1],[1,-1],[-1,1],[1,1]]}}}};class o extends r.c{constructor(){super(...arguments),this.vertexSpec=n}_write(t,e){t.recordStart(this.instanceId,this.attributeLayout);const i=e.getDisplayId();if("esriGeometryPoint"===e.geometryType){const r=e.readXForDisplay(),s=e.readYForDisplay();this._writeQuad(t,i,r,s)}else if("esriGeometryMultipoint"===e.geometryType){e.readGeometryForDisplay()?.forEachVertex(((e,r)=>{e>=0&&e<=512&&r>=0&&r<=512&&this._writeQuad(t,i,e,r)}))}t.recordEnd()}_writeQuad(t,e,i,r){const s=t.vertexCount();this._writeVertex(t,e,i,r),t.indexWrite(s+0),t.indexWrite(s+1),t.indexWrite(s+2),t.indexWrite(s+1),t.indexWrite(s+3),t.indexWrite(s+2)}}},52519:(t,e,i)=>{i.d(e,{E:()=>d});var r=i(95550),s=i(25245),n=i(25609),o=i(14266),a=i(39414),c=i(18235),u=i(14146),h=i(91907);const l={createComputedParams:t=>t,optionalAttributes:u.bT.optionalAttributes,attributes:{...u.bT.attributes,bitset:{type:h.g.UNSIGNED_BYTE,count:1,pack:({gradientMethod:t,gradientSizeUnits:e,gradientType:i})=>(0,a.u)([[c.s.isAlongLine,"alongline"===t.toLowerCase()],[c.s.isAbsoluteSize,e===n.IH.Absolute],[c.s.isDiscrete,"discrete"===i.toLowerCase()]])},tlbr:{type:h.g.UNSIGNED_SHORT,count:4,pack:({sprite:t})=>{const{rect:e,width:i,height:r}=t,s=e.x+o.s4+o.aV,n=e.y+o.s4;return[s,n,s+i-2*o.aV,n+r]}},accumulatedDistance:{type:h.g.UNSIGNED_SHORT,count:1,packTessellation:({distance:t})=>t},gradientSize:{type:h.g.HALF_FLOAT,count:1,pack:({gradientSize:t,gradientSizeUnits:e})=>e===n.IH.Relative?t/100:(0,r.F2)(t)},totalLength:{type:h.g.HALF_FLOAT,count:1,packTessellation:({pathLength:t})=>t},segmentDirection:{type:h.g.BYTE,count:2,packPrecisionFactor:16,packTessellation:({directionX:t,directionY:e})=>[t,e]}}};class d extends u.ti{get _preventEffectClipping(){return!0}constructor(t,e,i,r){super(t,e,i,r),this.vertexSpec=l,this._tessellationOptions.textured=!0}_write(t,e,i){const r=i??s.z.fromFeatureSetReaderCIM(e);if(!r)return;const{sprite:n}=this.evaluatedMeshParams;this._writeGeometry(t,e,r,n?.textureBinding)}}},14146:(t,e,i)=>{i.d(e,{bT:()=>p,ti:()=>f});var r=i(95550),s=i(25245),n=i(14266),o=i(54475),a=i(32458),c=i(39414),u=i(63134),h=i(12441),l=i(91907);class d{constructor(){this.extrusionOffsetX=0,this.extrusionOffsetY=0,this.normalX=0,this.normalY=0,this.directionX=0,this.directionY=0,this.distance=0,this.pathLength=0}}const p={createComputedParams:t=>t,optionalAttributes:{zoomRange:{type:l.g.SHORT,count:2,packPrecisionFactor:n.JS,pack:({scaleInfo:t},{tileInfo:e})=>(0,c._f)(t,e)}},attributes:{id:{type:l.g.UNSIGNED_BYTE,count:3,pack:"id"},pos:{type:l.g.SHORT,count:2,pack:"position",packPrecisionFactor:10},bitset:{type:l.g.UNSIGNED_BYTE,count:1},color:{type:l.g.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:t})=>(0,c.G7)(t)},offset:{type:l.g.BYTE,count:2,packPrecisionFactor:16,packTessellation:({extrusionOffsetX:t,extrusionOffsetY:e})=>[(0,c.kU)(t,16),(0,c.kU)(e,16)]},normal:{type:l.g.BYTE,count:2,packPrecisionFactor:16,packTessellation:({normalX:t,normalY:e})=>[(0,c.kU)(t,16),(0,c.kU)(e,16)]},halfWidth:{type:l.g.HALF_FLOAT,count:1,pack:({width:t})=>(0,r.F2)(.5*t)},referenceHalfWidth:{type:l.g.HALF_FLOAT,count:1,pack:({referenceWidth:t})=>(0,r.F2)(.5*t)}}};class x{constructor(){this.id=0,this.bitset=0,this.indexCount=0,this.vertexCount=0,this.vertexFrom=0,this.vertexBounds=0,this.pathLength=0}}class f extends u.c{constructor(t,e,i,r){super(t,e,i,r),this.vertexSpec=p,this._currentWrite=new x,this._tessellationOptions={halfWidth:0,pixelCoordRatio:1,offset:0,wrapDistance:65535,textured:!1},this._tessParams=new d,this._initializeTessellator()}writeLineVertices(t,e,i){const r=this._getLines(e);null!=r&&this._writeVertices(t,i,r)}_initializeTessellator(){this._lineTessellator=new o.z(this._writeTesselatedVertex.bind(this),this._writeTriangle.bind(this),!0)}_write(t,e,i){const r=i??s.z.fromFeatureSetReaderCIM(e);r&&this._writeGeometry(t,e,r)}_writeGeometry(t,e,i,r){t.recordStart(this.instanceId,this.attributeLayout,r),this.writeLineVertices(t,i,e),t.recordEnd()}_getLines(t){return(0,a.dx)(t,(0,h.b8)(this.evaluatedMeshParams))}_writeVertices(t,e,i){const{_currentWrite:s,_tessellationOptions:o,evaluatedMeshParams:a}=this,{width:u,capType:h,joinType:l,miterLimit:d,hasSizeVV:p}=a,x=(0,r.F2)(.5*u);o.halfWidth=x,o.capType=(0,c.L)(h),o.joinType=(0,c.Lq)(l),o.miterLimit=d;const f=!p;s.out=t,s.id=e.getDisplayId(),s.vertexCount=0,s.indexCount=0,s.vertexFrom=t.vertexCount(),s.vertexBounds=f&&x<n.do?0:1;for(const{line:t,start:e,pathLength:r}of i)o.initialDistance=e%65535,s.pathLength=r,this._lineTessellator.tessellate(t,o,f)}_writeTesselatedVertex(t,e,i,r,s,n,o,a,c,u,h){const{out:l,id:d,vertexBounds:p,pathLength:x}=this._currentWrite;return this.hasEffects&&l.recordBounds(t,e,p,p),this._tessParams.extrusionOffsetX=o,this._tessParams.extrusionOffsetY=a,this._tessParams.normalX=c,this._tessParams.normalY=u,this._tessParams.directionX=s,this._tessParams.directionY=n,this._tessParams.distance=h,this._tessParams.pathLength=x,this._writeVertex(l,d,t,e,this._tessParams),this._currentWrite.vertexFrom+this._currentWrite.vertexCount++}_writeTriangle(t,e,i){const{out:r}=this._currentWrite;r.indexEnsureSize(3),r.indexWrite(t),r.indexWrite(e),r.indexWrite(i),this._currentWrite.indexCount+=3}}},48218:(t,e,i)=>{i.d(e,{I:()=>d});var r=i(95550),s=i(25245),n=i(25609),o=i(14266),a=i(39414),c=i(14146),u=i(44255),h=i(91907);const l={createComputedParams:t=>t,optionalAttributes:c.bT.optionalAttributes,attributes:{...c.bT.attributes,bitset:{type:h.g.UNSIGNED_BYTE,count:1,pack:({shouldSampleAlphaOnly:t,shouldScaleDash:e,isSDF:i})=>(0,a.u)([[u.GS,t],[u.Wq,e],[u.B7,i]])},tlbr:{type:h.g.UNSIGNED_SHORT,count:4,pack:({sprite:t})=>{const{rect:e,width:i,height:r}=t,s=e.x+o.s4,n=e.y+o.s4;return[s,n,s+i,n+r]}},accumulatedDistance:{type:h.g.UNSIGNED_SHORT,count:1,packTessellation:({distance:t})=>t},segmentDirection:{type:h.g.BYTE,count:2,packPrecisionFactor:16,packTessellation:({directionX:t,directionY:e})=>[t,e]},offsetAlongLine:{type:h.g.HALF_FLOAT,count:1,pack:({offsetAlongLine:t})=>(0,r.F2)(t)},capType:{type:h.g.UNSIGNED_BYTE,count:1,pack:({capType:t})=>{switch(t){case n.kP.Butt:case"butt":return 0;case n.kP.Square:case"square":return 1;case n.kP.Round:case"round":return 2;default:return 0}}}}};class d extends c.ti{constructor(t,e,i,r){super(t,e,i,r),this.vertexSpec=l,this._tessellationOptions.textured=!0}_write(t,e,i){const r=i??s.z.fromFeatureSetReaderCIM(e);if(!r)return;const{sprite:n}=this.evaluatedMeshParams;this._writeGeometry(t,e,r,n?.textureBinding)}}},44189:(t,e,i)=>{i.d(e,{A:()=>S});var r=i(95550),s=i(76231),n=i(43056),o=i(36531),a=i(25245),c=i(13952),u=i(25609),h=i(98186),l=i(14266),d=i(39414),p=i(60789);class x{static from(t){return"width"in t?this.fromSimpleMeshParams(t):this.fromComplexMeshParams(t)}static fromSimpleMeshParams(t){const e=new x(t.sprite,t.color,t.outlineColor,t.minPixelBuffer,t.placement,t.scaleInfo,t.effects),{type:i,width:s,height:n,angle:o,alignment:a,outlineSize:c,referenceSize:u,sprite:h,overrideOutlineColor:l}=t;return e.rawWidth=(0,r.F2)(s),e.rawHeight=(0,r.F2)(n),e.angle=o,e.alignment=a,e.outlineSize=(0,r.F2)(c),e.referenceSize=(0,r.F2)(u),e.overrideOutlineColor=l,e.offsetX=(0,r.F2)(t.offsetX),e.offsetY=(0,r.F2)(t.offsetY),"simple"!==i||h.sdf||(e.rawWidth=h.width,e.rawHeight=h.height),e._computeSize(t,!1),e}static fromComplexMeshParams(t){const e=new x(t.sprite,t.color,t.outlineColor,t.minPixelBuffer,t.placement,t.scaleInfo,t.effects);let{alignment:i,transforms:s,size:n,scaleX:o,anchorX:a,anchorY:c,angle:u,colorLocked:h,frameHeight:l,widthRatio:d,offsetX:f,offsetY:y,outlineSize:_,referenceSize:m,scaleFactor:g,sizeRatio:k,isAbsoluteAnchorPoint:v,rotateClockwise:w,scaleSymbolsProportionally:b,sprite:S}=t;if(s&&s.infos.length>0){const t=(0,p.yl)(n,u,w,f,y,s);n=t.size,u=t.rotation,f=t.offsetX,y=t.offsetY,w=!1}g&&(n*=g,f*=g,y*=g);const T=o*(S.width/S.height);e.alignment=i,e.rawHeight=(0,r.F2)(n),e.rawWidth=e.rawHeight*T,e.referenceSize=(0,r.F2)(m),e.sizeRatio=k,e.sdfDecodeCoeff=(S.sdfDecodeCoeff??1)*k,e.angle=u,e.rotateClockwise=w,e.anchorX=a,e.anchorY=c,e.offsetX=(0,r.F2)(f),e.offsetY=(0,r.F2)(y),v&&n&&(S.sdf?e.anchorX=a/(n*d):e.anchorX=a/(n*T),e.anchorY=c/n);const P=b&&l?n/l:1;return e.outlineSize=0===_||isNaN(_)?0:(0,r.F2)(_)*P,e.scaleSymbolsProportionally=b,e.colorLocked=h,e._computeSize(t,!0),e}constructor(t,e,i,r,s,n,o){this.sprite=t,this.color=e,this.outlineColor=i,this.minPixelBuffer=r,this.placement=s,this.scaleInfo=n,this.effects=o,this.rawWidth=0,this.rawHeight=0,this.angle=0,this.outlineSize=0,this.referenceSize=0,this.sizeRatio=1,this.sdfDecodeCoeff=1,this.alignment=u.v2.SCREEN,this.scaleSymbolsProportionally=!1,this.overrideOutlineColor=!1,this.colorLocked=!1,this.anchorX=0,this.anchorY=0,this.computedWidth=0,this.computedHeight=0,this.texXmin=0,this.texYmin=0,this.texXmax=0,this.texYmax=0,this.offsetX=0,this.offsetY=0,this.rotateClockwise=!0}get boundsInfo(){return{size:Math.max(this.computedHeight,this.computedWidth),offsetX:this.offsetX,offsetY:this.offsetY}}_computeSize(t,e){const{sprite:i,hasSizeVV:r}=t,s=!!i.sdf,n=i.sdfPaddingRatio??.5,{rawWidth:o,rawHeight:a,sizeRatio:c,outlineSize:u}=this,h=i.rect;let d=o*c,p=a*c,x=0,_=0;if(s){const t=1/(1-n);if(d*=t,p*=t,r)this.computedWidth=d,this.computedHeight=p;else{const t=e&&o>a?d:o,r=a,s=u+2;this.computedWidth=Math.min(t+s,d),this.computedHeight=Math.min(r+s,p);const n=Math.max(i.width,i.height)/Math.max(d,p);x=(this.computedWidth-d)*n,_=(this.computedHeight-p)*n}}else this.computedWidth=d*(h.width/i.width),this.computedHeight=p*(h.height/i.height),x=2*l.s4,_=2*l.s4;const m=h.x+l.s4-x/2,g=h.y+l.s4-_/2,k=m+i.width+x,v=g+i.height+_;this.texXmin=f(m),this.texYmin=f(g),this.texXmax=y(k),this.texYmax=y(v),this.computedWidth*=(this.texXmax-this.texXmin)/(k-m),this.computedHeight*=(this.texYmax-this.texYmin)/(v-g),this.anchorX*=d/this.computedWidth,this.anchorY*=p/this.computedHeight}}function f(t,e=1e-7){const i=Math.ceil(t);return i-t<e?i:Math.floor(t)}function y(t,e=1e-7){const i=Math.floor(t);return t-i<e?i:Math.ceil(t)}var _=i(70080),m=i(26218),g=i(63134),k=i(91907);const v=128/Math.PI;function w(t){return function(t,e){return t%=e,Math.abs(t>=0?t:t+e)}(t*v,256)}const b={createComputedParams:t=>x.from(t),optionalAttributes:{zoomRange:{type:k.g.SHORT,count:2,packPrecisionFactor:l.JS,pack:({scaleInfo:t},{tileInfo:e})=>(0,d._f)(t,e)}},attributes:{pos:{type:k.g.SHORT,count:2,pack:"position",packPrecisionFactor:10},id:{type:k.g.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:k.g.UNSIGNED_BYTE,count:1,pack:({sprite:t,alignment:e,scaleSymbolsProportionally:i,overrideOutlineColor:r,colorLocked:s})=>{let n=0;return t.sdf&&(n|=(0,d.NF)(_.m.bitset.isSDF)),e===u.v2.MAP&&(n|=(0,d.NF)(_.m.bitset.isMapAligned)),i&&(n|=(0,d.NF)(_.m.bitset.scaleSymbolsProportionally)),r&&(n|=(0,d.NF)(_.m.bitset.overrideOutlineColor)),s&&(n|=(0,d.NF)(_.m.bitset.colorLocked)),n}},offset:{type:k.g.HALF_FLOAT,count:2,packAlternating:{count:4,pack:({angle:t,computedWidth:e,computedHeight:i,anchorX:r,anchorY:a,offsetX:c,offsetY:u,rotateClockwise:h})=>{const l=function(t,e,i,r,o=!1){const a=(0,n.Ue)(),c=o?1:-1;return(0,s.yR)(a),(e||i)&&(0,s.Iu)(a,a,[e,-i]),r&&(0,s.U1)(a,a,.017453292519944444*c*-r),a}(0,c,u,-t,h),d=-(.5+r)*e,p=-(.5-a)*i,x=[d,p],f=[d+e,p],y=[d,p+i],_=[d+e,p+i];return(0,o.iu)(x,x,l),(0,o.iu)(f,f,l),(0,o.iu)(y,y,l),(0,o.iu)(_,_,l),[x,f,y,_]}}},textureUV:{type:k.g.SHORT,count:2,packPrecisionFactor:4,packAlternating:{count:4,pack:({texXmax:t,texXmin:e,texYmax:i,texYmin:r})=>[[e,r],[t,r],[e,i],[t,i]]}},color:{type:k.g.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:t})=>(0,d.G7)(t)},outlineColor:{type:k.g.UNSIGNED_BYTE,count:4,normalized:!0,pack:({outlineColor:t})=>(0,d.G7)(t)},sizing:{type:k.g.UNSIGNED_BYTE,count:4,pack:({rawWidth:t,rawHeight:e,outlineSize:i,referenceSize:r})=>{const s=Math.max(t,e);return[(0,d.QS)(s,128),(0,d.QS)(i,128),(0,d.QS)(r,128),0]}},placementAngle:{type:k.g.UNSIGNED_BYTE,count:1,packTessellation:({placementAngle:t})=>w(t)},sdfDecodeCoeff:{type:k.g.UNSIGNED_SHORT,count:1,packPrecisionFactor:64,pack:({sdfDecodeCoeff:t})=>t}}};class S extends g.c{constructor(){super(...arguments),this.vertexSpec=b}getBoundsInfo(){return this.evaluatedMeshParams.boundsInfo}_write(t,e,i){const r=this.evaluatedMeshParams.sprite?.textureBinding,s=e.getDisplayId();t.recordStart(this.instanceId,this.attributeLayout,r);const n=this.evaluatedMeshParams.minPixelBuffer,o=Math.max(this.evaluatedMeshParams.computedWidth,n),a=Math.max(this.evaluatedMeshParams.computedHeight,n),u=-this.evaluatedMeshParams.anchorX*this.evaluatedMeshParams.computedWidth,h=this.evaluatedMeshParams.anchorY*this.evaluatedMeshParams.computedHeight,l=this.evaluatedMeshParams.offsetX+u,d=-this.evaluatedMeshParams.offsetY+h;if(null!=this.evaluatedMeshParams.placement)this._writePlacedMarkers(t,e,i,o,a);else if(i?.nextPath()){i.nextPoint();const e=i.x,r=i.y;t.recordBounds(e+l,r+d,o,a),this._writeQuad(t,s,e,r)}else if("esriGeometryPolygon"===e.geometryType){const i=e.readCentroidForDisplay();if(!i)return;const[r,n]=i.coords;t.recordBounds(r+l,n+d,o,a),this._writeQuad(t,s,r,n)}else if("esriGeometryPoint"===e.geometryType){const i=e.readXForDisplay(),r=e.readYForDisplay();t.recordBounds(i+l,r+d,o,a),this._writeQuad(t,s,i,r)}else{e.readGeometryForDisplay()?.forEachVertex(((e,i)=>{t.recordBounds(e+l,i+d,o,a),Math.abs(e)>c.Lr||Math.abs(i)>c.Lr||this._writeQuad(t,s,e,i)}))}t.recordEnd()}_writePlacedMarkers(t,e,i,s,n){const o=i??a.z.fromFeatureSetReaderCIM(e)?.clone();if(!o)return;const u=h.i.getPlacement(o,-1,this.evaluatedMeshParams.placement,(0,r.F2)(1),t.id,(0,m.n)());if(!u)return;const l=e.getDisplayId();let d=u.next();const p=this.evaluatedMeshParams.offsetX,x=-this.evaluatedMeshParams.offsetY;for(;null!=d;){const e=d.tx,i=-d.ty;if(Math.abs(e)>c.Lr||Math.abs(i)>c.Lr){d=u.next();continue}const r=-d.getAngle();t.recordBounds(e+p,i+x,s,n),this._writeQuad(t,l,e,i,r),d=u.next()}}_writeQuad(t,e,i,r,s){const n=t.vertexCount(),o=null==s?null:{placementAngle:s};this._writeVertex(t,e,i,r,o),t.indexWrite(n+0),t.indexWrite(n+1),t.indexWrite(n+2),t.indexWrite(n+1),t.indexWrite(n+3),t.indexWrite(n+2)}}},63134:(t,e,i)=>{i.d(e,{c:()=>p});var r=i(25245),s=i(29882),n=i(26218),o=i(8530),a=(i(39994),i(12441)),c=i(91907);function u(t){switch(t){case c.g.BYTE:case c.g.UNSIGNED_BYTE:return 1;case c.g.SHORT:case c.g.UNSIGNED_SHORT:case c.g.HALF_FLOAT:return 2;case c.g.FLOAT:case c.g.INT:case c.g.UNSIGNED_INT:return 4}}class h{static fromVertexSpec(t,e){const{attributes:i,optionalAttributes:r}=t;let s,n,o;const a=[];for(const t in i){const e=i[t];"position"===e.pack?s={...e,name:t,offset:0}:"id"===e.pack?n={...e,name:t,offset:4}:"bitset"===t?o={...e,name:t,offset:7}:a.push({...e,name:t})}for(const t in r)if(!0===e[t]){const e=r[t];a.push({...e,name:t})}const c=function(t){const e=[],i=[],r=[];for(const s of t){const t=u(s.type)*s.count;switch(t%2||t%4||4){case 4:e.push(s);continue;case 2:i.push(s);continue;case 1:r.push(s);continue;default:throw new Error("Found unexpected dataType byte count")}}return e.push(...i),e.push(...r),e}(a),l=[];let d=8,p=1;for(const t of c)l.push({...t,offset:d}),d+=u(t.type)*t.count,t.packAlternating&&(p=Math.max(t.packAlternating.count,p));const x=Uint32Array.BYTES_PER_ELEMENT,f=d%x;return new h(s,n,o,l,d+(f?x-f:0),p)}constructor(t,e,i,r,s,n){this.position=t,this.id=e,this.bitset=i,this.standardAttributes=r,this.stride=s,this.packVertexCount=n,r.push(i),this._attributes=[t,e,i,...r]}get attributeLayout(){if(!this._attributeLayout){const t=(0,a.ig)(this._attributes),e=this._attributes.map((t=>({name:t.name,count:t.count,offset:t.offset,type:t.type,packPrecisionFactor:t.packPrecisionFactor,normalized:t.normalized??!1})));this._attributeLayout={attributes:e,hash:t,stride:this.stride}}return this._attributeLayout}}var l=i(91683);class d{static fromVertexSpec(t,e){const i=h.fromVertexSpec(t,e);return new d(i)}constructor(t){this._spec=t,this._packed=new Uint8Array(this._spec.stride*this._spec.packVertexCount),this._packedU32View=new Uint32Array(this._packed.buffer),this._dataView=new DataView(this._packed.buffer)}get attributeLayout(){return this._spec.attributeLayout}get stride(){return this._spec.stride}writeVertex(t,e,i,r,s,n){for(let t=0;t<this._spec.packVertexCount;t++){const o=t*this._spec.stride;this._packPosition(i,r,o),this._packId(e,o);const a=this._spec.bitset;if(n){if(a.packTessellation){const t=a.packTessellation(n,s,i,r);this._pack(t,a,o)}for(const t of this._spec.standardAttributes)if(null!=t.packTessellation){const e=t.packTessellation(n,s,i,r);this._pack(e,t,o)}else if(t.packAlternating?.packTessellation){const e=t.packAlternating.packTessellation(n,s,i,r);for(let i=0;i<this._spec.packVertexCount;i++){const r=e[i];this._pack(r,t,i*this._spec.stride)}}}}t.vertexWriteRegion(this._packedU32View)}pack(t,e){for(const i of this._spec.standardAttributes)if(i.pack&&"string"!=typeof i.pack){const r=i.pack(t,e);for(let t=0;t<this._spec.packVertexCount;t++)this._pack(r,i,t*this._spec.stride)}else if(i.packAlternating?.pack){const r=i.packAlternating.pack(t,e);for(let t=0;t<this._spec.packVertexCount;t++){const e=r[t];this._pack(e,i,t*this._spec.stride)}}}_packPosition(t,e,i){const{offset:r}=this._spec.position,s=this._spec.position.packPrecisionFactor??1,n=(0,o.UJ)(t*s,e*s);this._dataView.setUint32(i+r,n,!0)}_packId(t,e){const i=t*(this._spec.id.packPrecisionFactor??1),r=4278190080&this._dataView.getUint32(e+this._spec.id.offset,!0);this._dataView.setUint32(e+this._spec.id.offset,i|r,!0)}_pack(t,e,i){(0,l.G)(this._dataView,t,e,i)}}class p{constructor(t,e,i,r){this._instanceId=t,this._evaluator=e,this._enabledOptionalAttributes=i,this._viewParams=r,this._evaluator.evaluator=t=>this.vertexSpec.createComputedParams(t)}get _vertexPack(){if(!this._cachedVertexPack){const t=d.fromVertexSpec(this.vertexSpec,this._enabledOptionalAttributes);this._evaluator.hasDynamicProperties||t.pack(this._evaluator.evaluatedMeshParams,this._viewParams),this._cachedVertexPack=t}return this._cachedVertexPack}get evaluatedMeshParams(){return this._evaluator.evaluatedMeshParams}get hasEffects(){return!!this.evaluatedMeshParams.effects}get instanceId(){return this._instanceId}get attributeLayout(){return this._vertexPack.attributeLayout}get _preventEffectClipping(){return!1}setReferences(t){this._references=t}getBoundsInfo(){return null}getTileInfo(){return this._viewParams.tileInfo}async loadDependencies(){(function(t){if(!t)return!1;for(const e of t)switch(e.effect.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1})(this._evaluator.inputMeshParams.effects?.effectInfos)&&await(0,n.A)()}enqueueRequest(t,e,i){this._evaluator.hasDynamicProperties&&this._evaluator.enqueueRequest(t,e,i)}write(t,e,i,o,a){this.ensurePacked(e,i,o);const c=this.evaluatedMeshParams.effects;if(!c||0===c.length)return void this._write(t,i,void 0,a);const u=i.readGeometryForDisplay()?.clone();if(!u)return;const h=r.z.fromOptimizedCIM(u,i.geometryType),l=(0,n.n)();h.invertY();const d=t.id||"",p=s.j.executeEffects(c,h,d,l,this._preventEffectClipping);let x;for(;x=p.next();)x.invertY(),this._write(t,i,x,a)}ensurePacked(t,e,i){if(!this._evaluator.hasDynamicProperties)return;const r=this._evaluator.evaluateMeshParams(t,e,i);this._vertexPack.pack(r,this._viewParams)}hasArcadeDependency(t){return this._evaluator.hasArcadeDependency(t)}_writeVertex(t,e,i,r,s){const n=this.evaluatedMeshParams;this._vertexPack.writeVertex(t,e,i,r,n,s)}}},26218:(t,e,i)=>{i.d(e,{A:()=>n,n:()=>s});let r=null;function s(){return r}async function n(){r=await Promise.all([i.e(89067),i.e(91911)]).then(i.bind(i,8923))}},12441:(t,e,i)=>{i.d(e,{b8:()=>o,ig:()=>s,mx:()=>n});var r=i(21130);function s(t){const e=t.map((({name:t,count:e,type:i})=>`${t}.${e}.${i}`)).join(",");return(0,r.hP)(e)}function n(t,e,i,r,s,o,a){if(t.primitiveName===e){let e=r?.readWithDefault(s,o,t[i]&&a);return"text"===t.type&&(e=e.toString()),void(t[i]=e)}if("type"in t&&null!=t.type){if(t.effects)for(const c of t.effects)n(c,e,i,r,s,o,a);switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.symbolLayers)for(const c of t.symbolLayers)n(c,e,i,r,s,o,a);break;case"CIMTextSymbol":t.symbol&&n(t.symbol,e,i,r,s,o,a);break;case"CIMHatchFill":t.lineSymbol&&n(t.lineSymbol,e,i,r,s,o,a);break;case"CIMPictureMarker":case"CIMCharacterMarker":case"CIMVectorMarker":if(t.markerPlacement&&n(t.markerPlacement,e,i,r,s,o,a),"CIMVectorMarker"===t.type&&t.markerGraphics)for(const c of t.markerGraphics)n(c,e,i,r,s,o,a),n(c.symbol,e,i,r,s,o,a)}}}function o(t){const e=t.width;return null!=t.effects?400:Math.max(1.25*e,8)}},8436:(t,e,i)=>{i.d(e,{q:()=>c});var r=i(95550),s=i(39414),n=i(63134),o=i(91907);const a={createComputedParams:t=>t,optionalAttributes:{},attributes:{pos:{type:o.g.SHORT,count:2,packPrecisionFactor:10,pack:"position"},id:{type:o.g.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:o.g.UNSIGNED_BYTE,count:1,pack:t=>0},offset:{type:o.g.SHORT,count:2,packPrecisionFactor:16,packAlternating:{count:4,pack:({size:t})=>{const e=(0,r.F2)(t),i=-e/2,s=-e/2;return[[i,s],[i+e,s],[i,s+e],[i+e,s+e]]}}},texCoords:{type:o.g.SHORT,count:2,packPrecisionFactor:4,packAlternating:{count:4,pack:()=>[[0,1],[1,1],[0,0],[1,0]]}},size:{type:o.g.UNSIGNED_BYTE,count:2,pack:({size:t})=>[t,t]},referenceSize:{type:o.g.UNSIGNED_BYTE,count:1,pack:({size:t})=>(0,r.F2)(t)},zoomRange:{type:o.g.UNSIGNED_BYTE,count:2,pack:({scaleInfo:t},{tileInfo:e})=>(0,s._f)(t,e)}}};class c extends n.c{constructor(){super(...arguments),this.vertexSpec=a}_write(t,e){const i=e.getDisplayId(),s=this.evaluatedMeshParams.minPixelBuffer,n=Math.max((0,r.F2)(this.evaluatedMeshParams.size),s);let o,a;if("esriGeometryPoint"===e.geometryType)o=e.readXForDisplay(),a=e.readYForDisplay();else{const t=e.readCentroidForDisplay();if(!t)return;o=t?.coords[0],a=t?.coords[1]}t.recordStart(this.instanceId,this.attributeLayout),t.recordBounds(o,a,n,n);const c=t.vertexCount();this._writeVertex(t,i,o,a),t.indexWrite(c+0),t.indexWrite(c+1),t.indexWrite(c+2),t.indexWrite(c+1),t.indexWrite(c+3),t.indexWrite(c+2),t.recordEnd()}}},70571:(t,e,i)=>{i.d(e,{lW:()=>L,PW:()=>_});var r=i(19431),s=i(95550),n=i(25245),o=i(98186),a=i(31090),c=i(14266),u=i(58005),h=i(39414),l=i(26218),d=i(63134),p=i(44255),x=i(60789);class f{constructor(t){const{offsetX:e,offsetY:i,postAngle:r,fontSize:s,haloSize:n,outlineSize:o,scaleFactor:a,transforms:c}=t;if(this.offsetX=e,this.offsetY=i,this.postAngle=r,this.fontSize=Math.min(s,96),this.haloSize=n??0,this.outlineSize=o??0,this.transforms=c,c&&c.infos.length>1){const t=(0,x.yl)(s,r,!1,e,i,c,!1);this.fontSize=Math.min(t.size,96);const n=t.size/s;this.haloSize*=n,this.outlineSize*=n,this.postAngle=t.rotation,this.offsetX=t.offsetX,this.offsetY=t.offsetY}a&&(this.fontSize*=a,this.offsetX*=a,this.offsetY*=a)}}var y=i(91907);const _=28,m=[4,4],g=[16,4],k={topLeft:g,topRight:g,bottomLeft:g,bottomRight:g},v=[4,2],w=[4,6],b={topLeft:v,topRight:v,bottomLeft:w,bottomRight:w},S={topLeft:v,topRight:w,bottomLeft:v,bottomRight:w},T={topLeft:w,topRight:w,bottomLeft:m,bottomRight:m},P={topLeft:m,topRight:m,bottomLeft:w,bottomRight:w},M={topLeft:w,topRight:m,bottomLeft:w,bottomRight:m},E={topLeft:m,topRight:w,bottomLeft:m,bottomRight:w},F={createComputedParams:t=>t,optionalAttributes:{zoomRange:{type:y.g.UNSIGNED_SHORT,count:2,packPrecisionFactor:c.JS,packTessellation:({minZoom:t,maxZoom:e})=>[t||0,e||_]},clipAngle:{type:y.g.UNSIGNED_BYTE,count:1,packTessellation:({clipAngle:t})=>N(t||0)},referenceSymbol:{type:y.g.BYTE,count:4,packPrecisionFactor:1,packTessellation:(t,e)=>{const i=t.isLineLabel||!t.referenceBounds,r=(0,a.g)(i?"center":e.horizontalAlignment),n=(0,a.tf)(i?"middle":e.verticalAlignment),{offsetX:o,offsetY:c,size:u}=i?{offsetX:0,offsetY:0,size:0}:t.referenceBounds;return[(0,s.F2)(o),-(0,s.F2)(c),Math.round((0,s.F2)(u)),r+1<<2|n+1]}}},attributes:{pos:{type:y.g.SHORT,count:2,pack:"position",packPrecisionFactor:10},id:{type:y.g.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:y.g.UNSIGNED_BYTE,count:1,packTessellation:({isBackground:t,mapAligned:e})=>(0,h.u)([[p.mL,t],[p.$r,!!e]])},offset:{type:y.g.SHORT,count:2,packPrecisionFactor:8,packAlternating:{count:4,packTessellation:({offsets:t})=>{const{bottomLeft:e,bottomRight:i,topLeft:r,topRight:s}=t;return[r,s,e,i]}}},textureUV:{type:y.g.SHORT,count:2,packPrecisionFactor:4,packAlternating:{count:4,packTessellation:({texcoords:t})=>{const{bottomLeft:e,bottomRight:i,topLeft:r,topRight:s}=t;return[r,s,e,i]}}},color:{type:y.g.UNSIGNED_BYTE,count:4,normalized:!0,packTessellation:({color:t})=>t},fontSize:{type:y.g.UNSIGNED_SHORT,count:1,packPrecisionFactor:4,packTessellation:({fontSize:t})=>Math.round((0,s.F2)(t))},referenceSize:{type:y.g.UNSIGNED_BYTE,count:1,packPrecisionFactor:4,packTessellation:({fontSize:t},{referenceSize:e})=>Math.round((0,s.F2)(e??t))},outlineColor:{type:y.g.UNSIGNED_BYTE,count:4,normalized:!0,pack:({outlineColor:t})=>(0,h.G7)(t)},haloColor:{type:y.g.UNSIGNED_BYTE,count:4,normalized:!0,pack:({haloColor:t})=>(0,h.G7)(t)},outlineAndHaloSize:{type:y.g.UNSIGNED_SHORT,count:2,packPrecisionFactor:4,packTessellation:({outlineSize:t,haloSize:e})=>[Math.round((0,s.F2)(t)),Math.round((0,s.F2)(e))]}}};class L extends d.c{constructor(){super(...arguments),this.vertexSpec=F,this._textMeshParamsPropsInitialized=!1}ensurePacked(t,e,i){super.ensurePacked(t,e,i),this._textMeshParamsPropsInitialized&&!this._evaluator.hasDynamicProperties||(this._textMeshTransformProps=new f(this.evaluatedMeshParams),this._textMeshParamsPropsInitialized=!0)}_write(t,e,i){const r=this._getShaping();if(!r)return;const s=e.getDisplayId();if(null!=this.evaluatedMeshParams.placement)return this._writePlacedTextMarkers(t,e,r,i);if(i?.nextPath())return i.nextPoint(),this._writeGlyphs(t,s,i.x,i.y,r,0);if("esriGeometryPolygon"===e.geometryType){const i=e.readCentroidForDisplay();if(!i)return;const[n,o]=i.coords;return this._writeGlyphs(t,s,n,o,r,0)}if("esriGeometryMultipoint"===e.geometryType){return void e.readGeometryForDisplay()?.forEachVertex(((e,i)=>this._writeGlyphs(t,s,e,i,r,0)))}const n=e.readXForDisplay(),o=e.readYForDisplay();return this._writeGlyphs(t,s,n,o,r,0)}_writePlacedTextMarkers(t,e,i,r){const a=r??n.z.fromFeatureSetReaderCIM(e);if(!a)return;const c=o.i.getPlacement(a,-1,this.evaluatedMeshParams.placement,(0,s.F2)(1),t.id,(0,l.n)());if(!c)return;const u=e.getDisplayId();let h=c.next();for(;null!=h;){const e=h.tx,r=-h.ty,s=-h.getAngle();this._writeGlyphs(t,u,e,r,i,s),h=c.next()}}_getShaping(t){const e=this._textMeshTransformProps,i=this.evaluatedMeshParams;if(!i.glyphs?.glyphs.length)return null;const n=(0,s.F2)(e.fontSize),o=(0,s.F2)(e.offsetX),a=(0,s.F2)(e.offsetY),h=(0,r.uZ)((0,s.F2)(i.lineWidth),c.A5,c.NT),l=c.uk*(0,r.uZ)(i.lineHeightRatio,.25,4);return(0,u.Nr)(i.glyphs,{scale:n/c.iD,angle:e.postAngle,xOffset:o,yOffset:a,horizontalAlignment:i.horizontalAlignment,verticalAlignment:t||i.verticalAlignment,maxLineWidth:h,lineHeight:l,decoration:i.decoration,borderLineSizePx:(0,s.F2)(i.boxBorderLineSize),hasBackground:!!i.boxBackgroundColor,useCIMAngleBehavior:i.useCIMAngleBehavior})}_writeGlyphs(t,e,i,r,n,o,a,c){const u=this.evaluatedMeshParams,l=this._textMeshTransformProps,d=(0,s.F2)(l.fontSize),p=l.haloSize,x=l.outlineSize,f=(0,s.F2)(l.offsetX),y=(0,s.F2)(l.offsetY),[_,m]=(0,h._f)(u.scaleInfo,this.getTileInfo());0!==o&&n.setRotation(o);const g=n.bounds,k=i+g.x+f,v=r+g.y-y,w=2*(u.minPixelBuffer?u.minPixelBuffer/d:1),b=Math.max(g.width,g.height)*w;n.textBox&&(t.recordStart(this.instanceId,this.attributeLayout,n.glyphs[0].textureBinding),t.recordBounds(k,v,b,b),this._writeTextBox(t,e,i,r,n.textBox,a,c),t.recordEnd());for(const s of n.glyphs){t.recordStart(this.instanceId,this.attributeLayout,s.textureBinding),t.recordBounds(k,v,b,b);const{texcoords:n,offsets:o}=s;this._writeQuad(t,e,i,r,{texcoords:n,offsets:o,fontSize:d,haloSize:p,outlineSize:x,color:(0,h.G7)(u.color),isBackground:!1,referenceBounds:a,minZoom:_,maxZoom:m,...c}),t.recordEnd()}0!==o&&n.setRotation(-o)}_writeTextBox(t,e,i,r,s,n,o){const a=this.evaluatedMeshParams,{fontSize:c,haloSize:u,outlineSize:l}=this._textMeshTransformProps,{boxBackgroundColor:d,boxBorderLineColor:p}=a,x={isBackground:!0,fontSize:c,haloSize:u,outlineSize:l,referenceBounds:n,...o};d&&(this._writeQuad(t,e,i,r,{texcoords:k,offsets:s.main,color:(0,h.G7)(d),...x}),p||(this._writeQuad(t,e,i,r,{texcoords:T,offsets:s.top,color:(0,h.G7)(d),...x}),this._writeQuad(t,e,i,r,{texcoords:P,offsets:s.bot,color:(0,h.G7)(d),...x}),this._writeQuad(t,e,i,r,{texcoords:M,offsets:s.left,color:(0,h.G7)(d),...x}),this._writeQuad(t,e,i,r,{texcoords:E,offsets:s.right,color:(0,h.G7)(d),...x}))),p&&(this._writeQuad(t,e,i,r,{texcoords:b,offsets:s.top,color:(0,h.G7)(p),...x}),this._writeQuad(t,e,i,r,{texcoords:b,offsets:s.bot,color:(0,h.G7)(p),...x}),this._writeQuad(t,e,i,r,{texcoords:S,offsets:s.left,color:(0,h.G7)(p),...x}),this._writeQuad(t,e,i,r,{texcoords:S,offsets:s.right,color:(0,h.G7)(p),...x}))}_writeQuad(t,e,i,r,s){const n=t.vertexCount();this._writeVertex(t,e,i,r,s),t.indexWrite(n+0),t.indexWrite(n+1),t.indexWrite(n+2),t.indexWrite(n+1),t.indexWrite(n+3),t.indexWrite(n+2)}}const N=t=>Math.round(t*(254/360))}}]);