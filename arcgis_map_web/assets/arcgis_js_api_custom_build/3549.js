"use strict";(self.webpackChunkarcgis_webpack01=self.webpackChunkarcgis_webpack01||[]).push([[3549,8163],{53549:(n,e,t)=>{t.r(e),t.d(e,{executeScript:()=>an,extend:()=>on,extractFieldLiterals:()=>ln,findFunctionCalls:()=>fn,functionHelper:()=>rn,referencesFunction:()=>sn,referencesMember:()=>un,validateScript:()=>cn});var r=t(58780),o=t(56088),a=t(19249),i=t(94634),l=t(30359),c=t(46001),u=t(8965),s=t(94837),f=t(61125),w=t(33556),h=t(56101),p=t(88163),g=t(32200),d=t(63038),m=t(47154),y=t(36054),E=t(91772),I=t(20031),v=t(74304),N=t(53446),A=t(89542),b=t(90819),R=t(14685);function S(n){return n&&"function"==typeof n.then}const C=100;async function T(n,e){const t=[];for(let r=0;r<e.arguments.length;r++)t.push(await F(n,e.arguments[r]));return t}async function Z(n,e,t){return!0===e.preparsed?t(n,null,e.arguments):t(n,e,await T(n,e))}async function O(n,e,t){if(!0===e.preparsed){const r=t(n,null,e.arguments);return S(r),r}const r=t(n,e,await T(n,e));return S(r),r}async function F(n,e,t){if(e.breakpoint&&!0!==t){const t=e.breakpoint();return await t,F(n,e,!0)}switch(e.type){case"VariableDeclarator":return async function(n,e){let t=null;if(t=null===e.init?null:await F(n,e.init),null!==n.localScope){if(t===s.v&&(t=null),"Identifier"!==e.id.type)throw new Error("Can only assign a regular variable");const r=e.id.name.toLowerCase();return n.localScope[r]={value:t,valueset:!0,node:e.init},s.v}if("Identifier"!==e.id.type)throw new Error("Can only assign a regular variable");const r=e.id.name.toLowerCase();return t===s.v&&(t=null),n.globalScope[r]={value:t,valueset:!0,node:e.init},s.v}(n,e);case"VariableDeclaration":return z(n,e,0);case"BlockStatement":return async function(n,e){return k(n,e,0)}(n,e);case"FunctionDeclaration":return async function(n,e){const t=e.id.name.toLowerCase();return n.globalScope[t]={valueset:!0,node:null,value:new l.Z(e,n)},s.v}(n,e);case"ReturnStatement":return async function(n,e){if(null===e.argument)return new s.R(s.v);const t=await F(n,e.argument);return new s.R(t)}(n,e);case"IfStatement":return async function(n,e){if("AssignmentExpression"===e.test.type||"UpdateExpression"===e.test.type)throw new Error((0,f.H5)(e.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));const t=await F(n,e.test);if(!0===t)return F(n,e.consequent);if(!1===t)return null!==e.alternate?F(n,e.alternate):s.v;throw new Error((0,f.H5)(e.test,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"))}(n,e);case"ExpressionStatement":return async function(n,e){if("AssignmentExpression"===e.expression.type)return F(n,e.expression);if("CallExpression"===e.expression.type){const t=await F(n,e.expression);return t===s.v?s.v:new s.I(t)}const t=await F(n,e.expression);return t===s.v?s.v:new s.I(t)}(n,e);case"UpdateExpression":return async function(n,e){const t=e.argument;if("MemberExpression"===t.type){const r={t:null},o=await F(n,t.object);let i=null;r.t=o,!0===t.computed?i=await F(n,t.property):"Identifier"===t.property.type&&(i=t.property.name);const l=r.t;let c;if((0,s.l)(l)){if(!(0,s.a)(i))throw new Error("Invalid Parameter");if(i<0&&(i=l.length+i),i<0||i>=l.length)throw new Error("Assignment outside of array bounds");c=(0,s.f)(l[i]),l[i]="++"===e.operator?c+1:c-1}else if(l instanceof a.Z){if(!1===(0,s.b)(i))throw new Error("Dictionary accessor must be a string");if(!0!==l.hasField(i))throw new Error("Invalid Parameter");c=(0,s.f)(l.field(i)),l.setField(i,"++"===e.operator?c+1:c-1)}else{if(!(0,s.s)(l))throw(0,s.n)(l)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===(0,s.b)(i))throw new Error("Feature accessor must be a string");if(!0!==l.hasField(i))throw new Error("Invalid Parameter");c=(0,s.f)(l.field(i)),l.setField(i,"++"===e.operator?c+1:c-1)}return!1===e.prefix?c:"++"===e.operator?c+1:c-1}const r="Identifier"===e.argument.type?e.argument.name.toLowerCase():"";if(!r)throw new Error("Invalid identifier");let o;if(null!==n.localScope&&void 0!==n.localScope[r])return o=(0,s.f)(n.localScope[r].value),n.localScope[r]={value:"++"===e.operator?o+1:o-1,valueset:!0,node:e},!1===e.prefix?o:"++"===e.operator?o+1:o-1;if(void 0!==n.globalScope[r])return o=(0,s.f)(n.globalScope[r].value),n.globalScope[r]={value:"++"===e.operator?o+1:o-1,valueset:!0,node:e},!1===e.prefix?o:"++"===e.operator?o+1:o-1;throw new Error("Variable not recognised")}(n,e);case"AssignmentExpression":return async function(n,e){const t=e.left;if("MemberExpression"===t.type){const r=await F(n,e.right),o=await F(n,t.object);let i=null;if(!0===t.computed)i=await F(n,t.property);else{if("Identifier"!==t.property.type)throw new Error("Expected computed or identifier for assignemnt target");i=t.property.name}if((0,s.l)(o)){if(!(0,s.a)(i))throw new Error("Invalid Parameter");if(i<0&&(i=o.length+i),i<0||i>o.length)throw new Error("Assignment outside of array bounds");if(i===o.length){if("="!==e.operator)throw new Error("Invalid Parameter");o[i]=D(r,e.operator,o[i],e)}else o[i]=D(r,e.operator,o[i],e)}else if(o instanceof a.Z){if(!1===(0,s.b)(i))throw new Error("Dictionary accessor must be a string");if(!0===o.hasField(i))o.setField(i,D(r,e.operator,o.field(i),e));else{if("="!==e.operator)throw new Error("Invalid Parameter");o.setField(i,D(r,e.operator,null,e))}}else{if(!(0,s.s)(o))throw(0,s.n)(o)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===(0,s.b)(i))throw new Error("Feature accessor must be a string");if(!0===o.hasField(i))o.setField(i,D(r,e.operator,o.field(i),e));else{if("="!==e.operator)throw new Error("Invalid Parameter");o.setField(i,D(r,e.operator,null,e))}}return s.v}const r=t.name.toLowerCase();if(null!==n.localScope&&void 0!==n.localScope[r]){const t=await F(n,e.right);return n.localScope[r]={value:D(t,e.operator,n.localScope[r].value,e),valueset:!0,node:e.right},s.v}if(void 0!==n.globalScope[r]){const t=await F(n,e.right);return n.globalScope[r]={value:D(t,e.operator,n.globalScope[r].value,e),valueset:!0,node:e.right},s.v}throw new Error("Cannot assign undeclared variable")}(n,e);case"ForStatement":return function(n,e){try{return null!==e.init?F(n,e.init).then((()=>new Promise(((t,r)=>{U(n,e,{testResult:!0,lastAction:s.v},(n=>{t(n)}),(n=>{r(n)}),0)})))):new Promise(((t,r)=>{U(n,e,{testResult:!0,lastAction:s.v},(n=>{t(n)}),(n=>{r(n)}),0)}))}catch(n){return Promise.reject(n)}}(n,e);case"ForInStatement":return async function(n,e){return new Promise(((t,r)=>{F(n,e.right).then((o=>{try{let i=null;i="VariableDeclaration"===e.left.type?F(n,e.left):Promise.resolve(),i.then((()=>{try{let i="";if("VariableDeclaration"===e.left.type){const n=e.left.declarations[0].id;"Identifier"===n.type&&(i=n.name)}else"Identifier"===e.left.type&&(i=e.left.name);if(!i)throw new Error((0,f.H5)(e,"RUNTIME","INVALIDVARIABLE"));i=i.toLowerCase();let l=null;if(null!==n.localScope&&void 0!==n.localScope[i]&&(l=n.localScope[i]),null===l&&void 0!==n.globalScope[i]&&(l=n.globalScope[i]),null===l)return void r(new Error((0,f.H5)(e,"RUNTIME","VARIABLENOTDECLARED")));(0,s.l)(o)||(0,s.b)(o)?M(n,e,o,{reject:r,resolve:t},l):(0,s.n)(o)?function(n,e,t,r,o,a){try{if(void 0===a&&(a="i"),0===t.length)return void r.resolve(s.v);L(n,e,t,o,0,a,(n=>{r.resolve(n)}),(n=>{r.reject(n)}),0)}catch(n){r.reject(n)}}(n,e,o,{reject:r,resolve:t},l):o instanceof a.Z||(0,s.s)(o)?function(n,e,t,r,o){try{M(n,e,t.keys(),r,o,"k")}catch(n){r.reject(n)}}(n,e,o,{reject:r,resolve:t},l):(0,s.y)(o)?P(o.iterator(n.abortSignal),n,e,o,l,(n=>{t(n)}),(n=>{r(n)}),0):M(n,e,[],{reject:r,resolve:t},l)}catch(n){r(n)}}),r)}catch(n){r(n)}}),r)}))}(n,e);case"BreakStatement":return s.w;case"EmptyStatement":return s.v;case"ContinueStatement":return s.x;case"TemplateElement":return async function(n,e){return e.value?e.value.cooked:""}(0,e);case"TemplateLiteral":return async function(n,e){const t=[];for(let r=0;r<e.expressions.length;r++){const o=await F(n,e.expressions[r]);t[r]=(0,s.h)(o)}let r="",o=0;for(const n of e.quasis)r+=n.value?n.value.cooked:"",!1===n.tail&&(r+=t[o]?t[o]:"",o++);return r}(n,e);case"Identifier":return V(n,e);case"MemberExpression":return async function(n,e){const t=await F(n,e.object);if(null===t)throw new Error((0,f.H5)(e,"RUNTIME","NOTFOUND"));if(!1===e.computed){if("Identifier"===e.property.type){if(t instanceof a.Z||(0,s.s)(t))return t.field(e.property.name);if(t instanceof I.Z)return j(t,e.property.name,0,e);throw new Error((0,f.H5)(e,"RUNTIME","INVALIDTYPE"))}throw new Error((0,f.H5)(e,"RUNTIME","INVALIDTYPE"))}let r=await F(n,e.property);if(t instanceof a.Z||(0,s.s)(t)){if((0,s.b)(r))return t.field(r);throw new Error((0,f.H5)(e,"RUNTIME","INVALIDTYPE"))}if(t instanceof I.Z){if((0,s.b)(r))return j(t,r,0,e);throw new Error((0,f.H5)(e,"RUNTIME","INVALIDTYPE"))}if((0,s.l)(t)){if((0,s.a)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length+r),r>=t.length||r<0)throw new Error((0,f.H5)(e,"RUNTIME","OUTOFBOUNDS"));return t[r]}throw new Error((0,f.H5)(e,"RUNTIME","INVALIDTYPE"))}if((0,s.n)(t)){if((0,s.a)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length()+r),r>=t.length()||r<0)throw new Error((0,f.H5)(e,"RUNTIME","OUTOFBOUNDS"));return t.get(r)}throw new Error((0,f.H5)(e,"RUNTIME","INVALIDTYPE"))}if((0,s.b)(t)){if((0,s.a)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length+r),r>=t.length||r<0)throw new Error((0,f.H5)(e,"RUNTIME","OUTOFBOUNDS"));return t[r]}throw new Error((0,f.H5)(e,"RUNTIME","INVALIDTYPE"))}throw new Error((0,f.H5)(e,"RUNTIME","INVALIDTYPE"))}(n,e);case"Literal":return e.value;case"CallExpression":return async function(n,e){if("Identifier"!==e.callee.type)throw new Error((0,f.H5)(e,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==n.localScope&&void 0!==n.localScope[e.callee.name.toLowerCase()]){const t=n.localScope[e.callee.name.toLowerCase()];if(t.value instanceof s.N)return t.value.fn(n,e);if(t.value instanceof l.Z)return $(n,e,t.value.definition);throw new Error((0,f.H5)(e,"RUNTIME","NOTAFUNCTION"))}if(void 0!==n.globalScope[e.callee.name.toLowerCase()]){const t=n.globalScope[e.callee.name.toLowerCase()];if(t.value instanceof s.N)return t.value.fn(n,e);if(t.value instanceof l.Z)return $(n,e,t.value.definition);throw new Error((0,f.H5)(e,"RUNTIME","NOTAFUNCTION"))}throw new Error((0,f.H5)(e,"RUNTIME","NOTFOUND"))}(n,e);case"UnaryExpression":return async function(n,e){const t=await F(n,e.argument);if((0,s.i)(t)){if("!"===e.operator)return!t;if("-"===e.operator)return-1*(0,s.f)(t);if("+"===e.operator)return 1*(0,s.f)(t);if("~"===e.operator)return~(0,s.f)(t);throw new Error((0,f.H5)(e,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"))}if("-"===e.operator)return-1*(0,s.f)(t);if("+"===e.operator)return 1*(0,s.f)(t);if("~"===e.operator)return~(0,s.f)(t);throw new Error((0,f.H5)(e,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"))}(n,e);case"BinaryExpression":return async function(n,e){const t=[];t[0]=await F(n,e.left),t[1]=await F(n,e.right);const r=t[0],o=t[1];switch(e.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,s.r)((0,s.f)(r),(0,s.f)(o),e.operator);case"==":return(0,s.m)(r,o);case"!=":return!(0,s.m)(r,o);case"<":case">":case"<=":case">=":return(0,s.q)(r,o,e.operator);case"+":return(0,s.b)(r)||(0,s.b)(o)?(0,s.h)(r)+(0,s.h)(o):(0,s.f)(r)+(0,s.f)(o);case"-":return(0,s.f)(r)-(0,s.f)(o);case"*":return(0,s.f)(r)*(0,s.f)(o);case"/":return(0,s.f)(r)/(0,s.f)(o);case"%":return(0,s.f)(r)%(0,s.f)(o);default:throw new Error((0,f.H5)(e,"RUNTIME","OPERATORNOTRECOGNISED"))}}(n,e);case"LogicalExpression":return async function(n,e){if("AssignmentExpression"===e.left.type||"UpdateExpression"===e.left.type)throw new Error((0,f.H5)(e.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===e.right.type||"UpdateExpression"===e.right.type)throw new Error((0,f.H5)(e.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));const t=await F(n,e.left);let r=null;if(!(0,s.i)(t))throw new Error((0,f.H5)(e,"RUNTIME","ONLYBOOLEAN"));switch(e.operator){case"||":if(!0===t)return t;if(r=await F(n,e.right),(0,s.i)(r))return r;throw new Error((0,f.H5)(e,"RUNTIME","ONLYORORAND"));case"&&":if(!1===t)return t;if(r=await F(n,e.right),(0,s.i)(r))return r;throw new Error((0,f.H5)(e,"RUNTIME","ONLYORORAND"));default:throw new Error((0,f.H5)(e,"RUNTIME","ONLYORORAND"))}}(n,e);case"ArrayExpression":return async function(n,e){const t=[];for(let r=0;r<e.elements.length;r++)t.push(await F(n,e.elements[r]));for(let n=0;n<t.length;n++){if((0,s.o)(t[n]))throw new Error((0,f.H5)(e,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));t[n]===s.v&&(t[n]=null)}return t}(n,e);case"ObjectExpression":return async function(n,e){const t=[];for(let r=0;r<e.properties.length;r++)t[r]=await F(n,e.properties[r]);const r={};for(let n=0;n<t.length;n++){const e=t[n];if((0,s.o)(e.value))throw new Error("Illegal Argument");if(!1===(0,s.b)(e.key))throw new Error("Illegal Argument");e.value===s.v?r[e.key.toString()]=null:r[e.key.toString()]=e.value}const o=new a.Z(r);return o.immutable=!1,o}(n,e);case"Property":return async function(n,e){const t=await F(n,e.value);return"Identifier"===e.key.type?{key:e.key.name,value:t}:{key:await F(n,e.key),value:t}}(n,e);default:throw new Error((0,f.H5)(e,"RUNTIME","UNREOGNISED"))}}async function x(n,e,t){const r=await F(n,e.body);return t.lastAction=r,t.lastAction===s.w||t.lastAction instanceof s.R?(t.testResult=!1,t):null!==e.update?(await F(n,e.update),t):t}function U(n,e,t,r,o,a){try{(async function(n,e,t){if(null!==e.test){const r=await F(n,e.test);if(!0===n.abortSignal.aborted)throw new Error("Cancelled");if(t.testResult=r,!1===t.testResult)return t;if(!0!==t.testResult)throw new Error((0,f.H5)(e,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return x(n,e,t)}return x(n,e,t)})(n,e,t).then((()=>{try{!0===t.testResult?++a>C?(a=0,setTimeout((()=>{U(n,e,t,r,o,a)}),0)):U(n,e,t,r,o,a):t.lastAction instanceof s.R?r(t.lastAction):r(s.v)}catch(n){o(n)}}),(n=>{o(n)}))}catch(n){o(n)}}function H(n,e,t,r,o,a,i,l,c,u){try{if(r<=a)return void l(s.v);o.value="k"===i?t[a]:a,F(n,e.body).then((f=>{try{f instanceof s.R?l(f):f===s.w?l(s.v):++u>C?(u=0,setTimeout((()=>{H(n,e,t,r,o,a+1,i,l,c,u)}),0)):H(n,e,t,r,o,a+1,i,l,c,u)}catch(n){c(n)}}),(n=>{c(n)}))}catch(n){c(n)}}function L(n,e,t,r,o,a,i,l,c){try{if(t.length()<=o)return void i(s.v);r.value="k"===a?t.get(o):o,F(n,e.body).then((u=>{u instanceof s.R?i(u):u===s.w?i(s.v):++c>C?(c=0,setTimeout((()=>{L(n,e,t,r,o+1,a,i,l,c)}),0)):L(n,e,t,r,o+1,a,i,l,c)}),(n=>{l(n)}))}catch(n){l(n)}}function M(n,e,t,r,o,a){try{if(void 0===a&&(a="i"),0===t.length)return void r.resolve(s.v);H(n,e,t,t.length,o,0,a,(n=>{r.resolve(n)}),(n=>{r.reject(n)}),0)}catch(n){r.reject(n)}}function P(n,e,t,r,o,a,l,c){try{n.next().then((u=>{try{if(null===u)a(s.v);else{const f=i.Z.createFromGraphicLikeObject(u.geometry,u.attributes,r);f._underlyingGraphic=u,o.value=f,F(e,t.body).then((i=>{try{i===s.w?a(s.v):i instanceof s.R?a(i):++c>C?(c=0,setTimeout((()=>{P(n,e,t,r,o,a,l,c)}),0)):P(n,e,t,r,o,a,l,c)}catch(n){l(n)}}),(n=>{l(n)}))}}catch(n){l(n)}}),(n=>{l(n)}))}catch(n){l(n)}}function D(n,e,t,r){switch(e){case"=":return n===s.v?null:n;case"/=":return(0,s.f)(t)/(0,s.f)(n);case"*=":return(0,s.f)(t)*(0,s.f)(n);case"-=":return(0,s.f)(t)-(0,s.f)(n);case"+=":return(0,s.b)(t)||(0,s.b)(n)?(0,s.h)(t)+(0,s.h)(n):(0,s.f)(t)+(0,s.f)(n);case"%=":return(0,s.f)(t)%(0,s.f)(n);default:throw new Error((0,f.H5)(r,"RUNTIME","OPERATORNOTRECOGNISED"))}}async function k(n,e,t){if(t>=e.body.length)return s.v;const r=await F(n,e.body[t]);return r instanceof s.R||r===s.w||r===s.x||t===e.body.length-1?r:k(n,e,t+1)}async function z(n,e,t){return t>=e.declarations.length||(await F(n,e.declarations[t]),t===e.declarations.length-1||await z(n,e,t+1)),s.v}let _=0;function j(n,e,t,r){let o;switch(e=e.toLowerCase()){case"hasz":{const e=n.hasZ;return void 0!==e&&e}case"hasm":{const e=n.hasM;return void 0!==e&&e}case"spatialreference":{let e=n.spatialReference._arcadeCacheId;if(void 0===e){let t=!0;Object.freeze&&Object.isFrozen(n.spatialReference)&&(t=!1),t&&(_++,n.spatialReference._arcadeCacheId=_,e=_)}const t=new a.Z({wkt:n.spatialReference.wkt,wkid:n.spatialReference.wkid});return void 0!==e&&(t._arcadeCacheId="SPREF"+e.toString()),t}}switch(n.type){case"extent":switch(e){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{const t=n[e];return void 0!==t?t:null}case"type":return"Extent"}break;case"polygon":switch(e){case"rings":return o=n.cache._arcadeCacheId,void 0===o&&(_++,o=_,n.cache._arcadeCacheId=o),new c.Z(n.rings,n.spatialReference,!0===n.hasZ,!0===n.hasM,o);case"type":return"Polygon"}break;case"point":switch(e){case"x":case"y":case"z":case"m":return void 0!==n[e]?n[e]:null;case"type":return"Point"}break;case"polyline":switch(e){case"paths":return o=n.cache._arcadeCacheId,void 0===o&&(_++,o=_,n.cache._arcadeCacheId=o),new c.Z(n.paths,n.spatialReference,!0===n.hasZ,!0===n.hasM,o);case"type":return"Polyline"}break;case"multipoint":switch(e){case"points":return o=n.cache._arcadeCacheId,void 0===o&&(_++,o=_,n.cache._arcadeCacheId=o),new u.Z(n.points,n.spatialReference,!0===n.hasZ,!0===n.hasM,o,1);case"type":return"Multipoint"}}throw new Error((0,f.H5)(r,"RUNTIME","PROPERTYNOTFOUND"))}async function V(n,e){const t=e.name.toLowerCase();if(null!==n.localScope&&void 0!==n.localScope[t]){const e=n.localScope[t];if(!0===e.valueset)return e.value;if(null!==e.d)return e.d;e.d=F(n,e.node);const r=await e.d;return e.value=r,e.valueset=!0,r}if(void 0!==n.globalScope[t]){const e=n.globalScope[t];if(!0===e.valueset)return e.value;if(null!==e.d)return e.d;e.d=F(n,e.node);const r=await e.d;return e.value=r,e.valueset=!0,r}throw new Error((0,f.H5)(e,"RUNTIME","VARIABLENOTFOUND"))}const Y={};function B(n){return null===n?"":(0,s.l)(n)||(0,s.n)(n)?"Array":(0,s.j)(n)?"Date":(0,s.b)(n)?"String":(0,s.i)(n)?"Boolean":(0,s.a)(n)?"Number":n instanceof o.Z?"Attachment":n instanceof r.Z?"Portal":n instanceof a.Z?"Dictionary":(0,s.s)(n)?"Feature":n instanceof N.Z?"Point":n instanceof A.Z?"Polygon":n instanceof b.Z?"Polyline":n instanceof v.Z?"Multipoint":n instanceof E.Z?"Extent":(0,s.o)(n)?"Function":(0,s.y)(n)?"FeatureSet":(0,s.z)(n)?"FeatureSetCollection":n===s.v?"":"number"==typeof n&&isNaN(n)?"Number":"Unrecognised Type"}async function G(n,e,t,r){const o=await F(n,e.arguments[t]);if((0,s.m)(o,r))return F(n,e.arguments[t+1]);const a=e.arguments.length-t;return 1===a?F(n,e.arguments[t]):2===a?null:3===a?F(n,e.arguments[t+2]):G(n,e,t+2,r)}async function W(n,e,t,r){if(!0===r)return F(n,e.arguments[t+1]);if(3==e.arguments.length-t)return F(n,e.arguments[t+2]);const o=await F(n,e.arguments[t+2]);if(!1===(0,s.i)(o))throw new Error("WHEN needs boolean test conditions");return W(n,e,t+2,o)}async function J(n,e){const t=n.length,r=Math.floor(t/2);if(0===t)return[];if(1===t)return[n[0]];const o=[J(n.slice(0,r),e),J(n.slice(r,t),e)],a=await Promise.all(o);return q(a[0],a[1],e,[])}async function q(n,e,t,r){const o=r;if(!(n.length>0||e.length>0))return r;if(n.length>0&&e.length>0){let a=await t(n[0],e[0]);return isNaN(a)&&(a=1),a<=0?(o.push(n[0]),n=n.slice(1)):(o.push(e[0]),e=e.slice(1)),q(n,e,t,r)}return n.length>0?(o.push(n[0]),q(n=n.slice(1),e,t,r)):e.length>0?(o.push(e[0]),q(n,e=e.slice(1),t,r)):void 0}function K(n,e){const t=n.length,r=Math.floor(t/2);return e||(e=function(n,e){return n<e?-1:n===e?0:1}),0===t?[]:1===t?[n[0]]:function(n,e,t){const r=[];for(;n.length>0||e.length>0;)if(n.length>0&&e.length>0){let o=t(n[0],e[0]);isNaN(o)&&(o=1),o<=0?(r.push(n[0]),n=n.slice(1)):(r.push(e[0]),e=e.slice(1))}else n.length>0?(r.push(n[0]),n=n.slice(1)):e.length>0&&(r.push(e[0]),e=e.slice(1));return r}(K(n.slice(0,r),e),K(n.slice(r,t),e),e)}async function Q(n,e,t){const r=n.body;if(t.length!==n.params.length)throw new Error("Invalid Parameter calls to function.");for(let r=0;r<t.length;r++){const o=n.params[r];"Identifier"===o.type&&(e.localScope[o.name.toLowerCase()]={d:null,value:t[r],valueset:!0,node:null})}const o=await F(e,r);if(o instanceof s.R)return o.value;if(o===s.w)throw new Error("Cannot Break from a Function");if(o===s.x)throw new Error("Cannot Continue from a Function");return o instanceof s.I?o.value:o}function $(n,e,t){return O(n,e,(function(e,r,o){const a={spatialReference:n.spatialReference,services:n.services,console:n.console,lrucache:n.lrucache,interceptor:n.interceptor,localScope:{},abortSignal:n.abortSignal,globalScope:n.globalScope,depthCounter:n.depthCounter+1};if(a.depthCounter>64)throw new Error("Exceeded maximum function depth");return Q(t,a,o)}))}function X(n){return function(){const e={abortSignal:n.context.abortSignal,spatialReference:n.context.spatialReference,console:n.context.console,lrucache:n.context.lrucache,interceptor:n.context.interceptor,services:n.context.services,localScope:{},globalScope:n.context.globalScope,depthCounter:n.context.depthCounter+1};if(e.depthCounter>64)throw new Error("Exceeded maximum function depth");return Q(n.definition,e,arguments)}}(0,h.r)(Y,Z),(0,y.r)(Y,Z),(0,d.r)(Y,Z),(0,g.r)(Y,Z),(0,m.r)(Y,Z),(0,p.registerFunctions)({functions:Y,compiled:!1,signatures:null,evaluateIdentifier:null,arcadeCustomFunctionHandler:null,mode:"async",standardFunction:Z,standardFunctionAsync:O}),Y.typeof=function(n,e){return Z(n,e,(function(n,e,t){(0,s.p)(t,1,1);const r=B(t[0]);if("Unrecognised Type"===r)throw new Error("Unrecognised Type");return r}))},Y.iif=async function(n,e){(0,s.p)(null===e.arguments?[]:e.arguments,3,3);const t=await F(n,e.arguments[0]);if(!1===(0,s.i)(t))throw new Error("IF Function must have a boolean test condition");const r=[];return r[0]=await F(n,e.arguments[1]),r[1]=await F(n,e.arguments[2]),t?r[0]:r[1]},Y.decode=async function(n,e){if(e.arguments.length<2)throw new Error("Missing Parameters");if(2===e.arguments.length)return F(n,e.arguments[1]);if((e.arguments.length-1)%2==0)throw new Error("Must have a default value result.");return G(n,e,1,await F(n,e.arguments[0]))},Y.when=async function(n,e){if(e.arguments.length<3)throw new Error("Missing Parameters");if(e.arguments.length%2==0)throw new Error("Must have a default value result.");const t=await F(n,e.arguments[0]);if(!1===(0,s.i)(t))throw new Error("WHEN needs boolean test conditions");return W(n,e,0,t)},Y.sort=function(n,e){return O(n,e,(async function(n,e,t){(0,s.p)(t,1,2);let r=t[0];if((0,s.n)(r)&&(r=r.toArray()),!1===(0,s.l)(r))throw new Error("Illegal Argument");if(t.length>1){if(!1===(0,s.o)(t[1]))throw new Error("Illegal Argument");return J(r,X(t[1]))}let o=r;if(0===o.length)return[];const a={};for(let n=0;n<o.length;n++){const e=B(o[n]);""!==e&&(a[e]=!0)}if(!0===a.Array||!0===a.Dictionary||!0===a.Feature||!0===a.Point||!0===a.Polygon||!0===a.Polyline||!0===a.Multipoint||!0===a.Extent||!0===a.Function)return o.slice(0);let i=0,l="";for(const n in a)i++,l=n;return i>1||"String"===l?o=K(o,(function(n,e){if(null==n||n===s.v)return null==e||e===s.v?0:1;if(null==e||e===s.v)return-1;const t=(0,s.h)(n),r=(0,s.h)(e);return t<r?-1:t===r?0:1})):"Number"===l?o=K(o,(function(n,e){return n-e})):"Boolean"===l?o=K(o,(function(n,e){return n===e?0:e?-1:1})):"Date"===l&&(o=K(o,(function(n,e){return e-n}))),o}))};const nn={fixSpatialReference:s.A,parseArguments:T,standardFunction:Z,standardFunctionAsync:O,evaluateIdentifier:V,arcadeCustomFunction:X};for(const n in Y)Y[n]={value:new s.N(Y[n]),valueset:!0,node:null};const en=function(){};function tn(n){console.log(n)}(en.prototype=Y).infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},en.prototype.pi={value:Math.PI,valueset:!0,node:null};const rn=nn;function on(n){const e={mode:"async",compiled:!1,functions:{},signatures:[],standardFunction:Z,standardFunctionAsync:O,evaluateIdentifier:V,arcadeCustomFunctionHandler:X};for(let t=0;t<n.length;t++)n[t].registerFunctions(e);for(const n in e.functions)Y[n]={value:new s.N(e.functions[n]),valueset:!0,node:null},en.prototype[n]=Y[n];for(let n=0;n<e.signatures.length;n++)(0,f.gW)(e.signatures[n],"async")}async function an(n,e){let t=e.spatialReference;null==t&&(t=new R.Z({wkid:102100}));const r=function(n,e){const t=new en;null==n&&(n={}),null==e&&(e={});const r=new a.Z({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});r.immutable=!1,t.textformatting={value:r,valueset:!0,node:null};for(const n in e)t[n]={value:new s.N(e[n]),native:!0,valueset:!0,node:null};for(const e in n)n[e]&&"esri.Graphic"===n[e].declaredClass?t[e]={value:i.Z.createFromGraphic(n[e]),valueset:!0,node:null}:t[e]={value:n[e],valueset:!0,node:null};return t}(e.vars,e.customfunctions),o={spatialReference:t,services:e.services,abortSignal:void 0===e.abortSignal||null===e.abortSignal?{aborted:!1}:e.abortSignal,globalScope:r,console:e.console?e.console:tn,lrucache:e.lrucache,interceptor:e.interceptor,localScope:null,depthCounter:1};let c=await F(o,n.body[0].body);if(c instanceof s.R&&(c=c.value),c instanceof s.I&&(c=c.value),c===s.v&&(c=null),c===s.w)throw new Error("Cannot return BREAK");if(c===s.x)throw new Error("Cannot return CONTINUE");if(c instanceof s.N)throw new Error("Cannot return FUNCTION");if(c instanceof l.Z)throw new Error("Cannot return FUNCTION");return c}function ln(n,e){return(0,f.mb)(n)}function cn(n,e){return(0,f.FS)(n,e,"full")}function un(n,e){return(0,f.bV)(n,e)}function sn(n,e){return(0,f.w8)(n,e)}function fn(n){return(0,f.Vf)(n)}on([w.A])},88163:(n,e,t)=>{t.r(e),t.d(e,{registerFunctions:()=>E});var r=t(88256),o=t(4080),a=t(94837),i=t(5306),l=t(91772),c=t(20031),u=t(15917),s=t(74304),f=t(53446),w=t(89542),h=t(90819),p=t(53736),g=t(17321);function d(n){return 0===r.i8.indexOf("4.")?w.Z.fromExtent(n):new w.Z({spatialReference:n.spatialReference,rings:[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]})}function m(n){if((0,a.p)(n,2,2),n[0]instanceof c.Z&&n[1]instanceof c.Z);else if(n[0]instanceof c.Z&&null===n[1]);else if(n[1]instanceof c.Z&&null===n[0]);else if(null!==n[0]||null!==n[1])throw new Error("Illegal Argument")}async function y(n,e){if("polygon"!==n.type&&"polyline"!==n.type&&"extent"!==n.type)return 0;let t=1;(n.spatialReference.vcsWkid||n.spatialReference.latestVcsWkid)&&(t=(0,i._R)(n.spatialReference)/(0,g.c9)(n.spatialReference));let r=0;if("polyline"===n.type)for(const e of n.paths)for(let n=1;n<e.length;n++)r+=(0,i.AW)(e[n],e[n-1],t);else if("polygon"===n.type)for(const e of n.rings){for(let n=1;n<e.length;n++)r+=(0,i.AW)(e[n],e[n-1],t);(e[0][0]!==e[e.length-1][0]||e[0][1]!==e[e.length-1][1]||void 0!==e[0][2]&&e[0][2]!==e[e.length-1][2])&&(r+=(0,i.AW)(e[0],e[e.length-1],t))}else"extent"===n.type&&(r+=2*(0,i.AW)([n.xmin,n.ymin,0],[n.xmax,n.ymin,0],t),r+=2*(0,i.AW)([n.xmin,n.ymin,0],[n.xmin,n.ymax,0],t),r*=2,r+=4*Math.abs((0,a.C)(n.zmax,0)*t-(0,a.C)(n.zmin,0)*t));const o=new h.Z({hasZ:!1,hasM:!1,spatialReference:n.spatialReference,paths:[[0,0],[0,r]]});return(0,u.sz)(o,e)}function E(n){"async"===n.mode&&(n.functions.disjoint=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return m(t=(0,a.H)(t)),null===t[0]||null===t[1]||(0,u.ED)(t[0],t[1])}))},n.functions.intersects=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return m(t=(0,a.H)(t)),null!==t[0]&&null!==t[1]&&(0,u.kK)(t[0],t[1])}))},n.functions.touches=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return m(t=(0,a.H)(t)),null!==t[0]&&null!==t[1]&&(0,u.W4)(t[0],t[1])}))},n.functions.crosses=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return m(t=(0,a.H)(t)),null!==t[0]&&null!==t[1]&&(0,u.jU)(t[0],t[1])}))},n.functions.within=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return m(t=(0,a.H)(t)),null!==t[0]&&null!==t[1]&&(0,u.uh)(t[0],t[1])}))},n.functions.contains=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return m(t=(0,a.H)(t)),null!==t[0]&&null!==t[1]&&(0,u.r3)(t[0],t[1])}))},n.functions.overlaps=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return m(t=(0,a.H)(t)),null!==t[0]&&null!==t[1]&&(0,u.Nm)(t[0],t[1])}))},n.functions.equals=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return(0,a.p)(t,2,2),t[0]===t[1]||(t[0]instanceof c.Z&&t[1]instanceof c.Z?(0,u.fS)(t[0],t[1]):!(!(0,a.j)(t[0])||!(0,a.j)(t[1]))&&t[0].getTime()===t[1].getTime())}))},n.functions.relate=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,a.H)(t),(0,a.p)(t,3,3),t[0]instanceof c.Z&&t[1]instanceof c.Z)return(0,u.LV)(t[0],t[1],(0,a.h)(t[2]));if(t[0]instanceof c.Z&&null===t[1])return!1;if(t[1]instanceof c.Z&&null===t[0])return!1;if(null===t[0]&&null===t[1])return!1;throw new Error("Illegal Argument")}))},n.functions.intersection=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return m(t=(0,a.H)(t)),null===t[0]||null===t[1]?null:(0,u.wf)(t[0],t[1])}))},n.functions.union=function(e,t){return n.standardFunctionAsync(e,t,(function(n,t,r){const i=[];if(0===(r=(0,a.H)(r)).length)throw new Error("Function called with wrong number of Parameters");if(1===r.length)if((0,a.l)(r[0])){const n=(0,a.H)(r[0]);for(let e=0;e<n.length;e++)if(null!==n[e]){if(!(n[e]instanceof c.Z))throw new Error("Illegal Argument");i.push(n[e])}}else{if(!(0,a.n)(r[0])){if(r[0]instanceof c.Z)return(0,a.A)((0,o.r1)(r[0]),e.spatialReference);if(null===r[0])return null;throw new Error("Illegal Argument")}{const n=(0,a.H)(r[0].toArray());for(let e=0;e<n.length;e++)if(null!==n[e]){if(!(n[e]instanceof c.Z))throw new Error("Illegal Argument");i.push(n[e])}}}else for(let n=0;n<r.length;n++)if(null!==r[n]){if(!(r[n]instanceof c.Z))throw new Error("Illegal Argument");i.push(r[n])}return 0===i.length?null:(0,u.G0)(i)}))},n.functions.difference=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return m(t=(0,a.H)(t)),null!==t[0]&&null===t[1]?(0,o.r1)(t[0]):null===t[0]?null:(0,u.e5)(t[0],t[1])}))},n.functions.symmetricdifference=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return m(t=(0,a.H)(t)),null===t[0]&&null===t[1]?null:null===t[0]?(0,o.r1)(t[1]):null===t[1]?(0,o.r1)(t[0]):(0,u.Sp)(t[0],t[1])}))},n.functions.clip=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,a.H)(t),(0,a.p)(t,2,2),!(t[1]instanceof l.Z)&&null!==t[1])throw new Error("Illegal Argument");if(null===t[0])return null;if(!(t[0]instanceof c.Z))throw new Error("Illegal Argument");return null===t[1]?null:(0,u.oq)(t[0],t[1])}))},n.functions.cut=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,a.H)(t),(0,a.p)(t,2,2),!(t[1]instanceof h.Z)&&null!==t[1])throw new Error("Illegal Argument");if(null===t[0])return[];if(!(t[0]instanceof c.Z))throw new Error("Illegal Argument");return null===t[1]?[(0,o.r1)(t[0])]:(0,u.z7)(t[0],t[1])}))},n.functions.area=function(e,t){return n.standardFunctionAsync(e,t,(async function(n,t,r){if((0,a.p)(r,1,2),null===(r=(0,a.H)(r))[0])return 0;if((0,a.y)(r[0])){const n=await r[0].sumArea((0,o.EI)((0,a.C)(r[1],-1)),!1,e.abortSignal);if(e.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}if((0,a.l)(r[0])||(0,a.n)(r[0])){const n=(0,a.K)(r[0],e.spatialReference);return null===n?0:(0,u.CJ)(n,(0,o.EI)((0,a.C)(r[1],-1)))}if(!(r[0]instanceof c.Z))throw new Error("Illegal Argument");return(0,u.CJ)(r[0],(0,o.EI)((0,a.C)(r[1],-1)))}))},n.functions.areageodetic=function(e,t){return n.standardFunctionAsync(e,t,(async function(n,t,r){if((0,a.p)(r,1,2),null===(r=(0,a.H)(r))[0])return 0;if((0,a.y)(r[0])){const n=await r[0].sumArea((0,o.EI)((0,a.C)(r[1],-1)),!0,e.abortSignal);if(e.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}if((0,a.l)(r[0])||(0,a.n)(r[0])){const n=(0,a.K)(r[0],e.spatialReference);return null===n?0:(0,u.Y4)(n,(0,o.EI)((0,a.C)(r[1],-1)))}if(!(r[0]instanceof c.Z))throw new Error("Illegal Argument");return(0,u.Y4)(r[0],(0,o.EI)((0,a.C)(r[1],-1)))}))},n.functions.length=function(e,t){return n.standardFunctionAsync(e,t,(async function(n,t,r){if((0,a.p)(r,1,2),null===(r=(0,a.H)(r))[0])return 0;if((0,a.y)(r[0])){const n=await r[0].sumLength((0,o.Lz)((0,a.C)(r[1],-1)),!1,e.abortSignal);if(e.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}if((0,a.l)(r[0])||(0,a.n)(r[0])){const n=(0,a.J)(r[0],e.spatialReference);return null===n?0:(0,u.sz)(n,(0,o.Lz)((0,a.C)(r[1],-1)))}if(!(r[0]instanceof c.Z))throw new Error("Illegal Argument");return(0,u.sz)(r[0],(0,o.Lz)((0,a.C)(r[1],-1)))}))},n.functions.length3d=function(e,t){return n.standardFunctionAsync(e,t,(function(n,t,r){if((0,a.p)(r,1,2),null===(r=(0,a.H)(r))[0])return 0;if((0,a.l)(r[0])||(0,a.n)(r[0])){const n=(0,a.J)(r[0],e.spatialReference);return null===n?0:!0===n.hasZ?y(n,(0,o.Lz)((0,a.C)(r[1],-1))):(0,u.sz)(n,(0,o.Lz)((0,a.C)(r[1],-1)))}if(!(r[0]instanceof c.Z))throw new Error("Illegal Argument");return!0===r[0].hasZ?y(r[0],(0,o.Lz)((0,a.C)(r[1],-1))):(0,u.sz)(r[0],(0,o.Lz)((0,a.C)(r[1],-1)))}))},n.functions.lengthgeodetic=function(e,t){return n.standardFunctionAsync(e,t,(async function(n,t,r){if((0,a.p)(r,1,2),null===(r=(0,a.H)(r))[0])return 0;if((0,a.y)(r[0])){const n=await r[0].sumLength((0,o.Lz)((0,a.C)(r[1],-1)),!0,e.abortSignal);if(e.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}if((0,a.l)(r[0])||(0,a.n)(r[0])){const n=(0,a.J)(r[0],e.spatialReference);return null===n?0:(0,u.kQ)(n,(0,o.Lz)((0,a.C)(r[1],-1)))}if(!(r[0]instanceof c.Z))throw new Error("Illegal Argument");return(0,u.kQ)(r[0],(0,o.Lz)((0,a.C)(r[1],-1)))}))},n.functions.distance=function(e,t){return n.standardFunctionAsync(e,t,(function(n,t,r){r=(0,a.H)(r),(0,a.p)(r,2,3);let i=r[0];((0,a.l)(r[0])||(0,a.n)(r[0]))&&(i=(0,a.L)(r[0],e.spatialReference));let l=r[1];if(((0,a.l)(r[1])||(0,a.n)(r[1]))&&(l=(0,a.L)(r[1],e.spatialReference)),!(i instanceof c.Z))throw new Error("Illegal Argument");if(!(l instanceof c.Z))throw new Error("Illegal Argument");return(0,u.TE)(i,l,(0,o.Lz)((0,a.C)(r[2],-1)))}))},n.functions.distancegeodetic=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){t=(0,a.H)(t),(0,a.p)(t,2,3);const r=t[0],i=t[1];if(!(r instanceof f.Z))throw new Error("Illegal Argument");if(!(i instanceof f.Z))throw new Error("Illegal Argument");const l=new h.Z({paths:[],spatialReference:r.spatialReference});return l.addPath([r,i]),(0,u.kQ)(l,(0,o.Lz)((0,a.C)(t[2],-1)))}))},n.functions.densify=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,a.H)(t),(0,a.p)(t,2,3),null===t[0])return null;if(!(t[0]instanceof c.Z))throw new Error("Illegal Argument");const r=(0,a.f)(t[1]);if(isNaN(r))throw new Error("Illegal Argument");if(r<=0)throw new Error("Illegal Argument");return t[0]instanceof w.Z||t[0]instanceof h.Z?(0,u.Cz)(t[0],r,(0,o.Lz)((0,a.C)(t[2],-1))):t[0]instanceof l.Z?(0,u.Cz)(d(t[0]),r,(0,o.Lz)((0,a.C)(t[2],-1))):t[0]}))},n.functions.densifygeodetic=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,a.H)(t),(0,a.p)(t,2,3),null===t[0])return null;if(!(t[0]instanceof c.Z))throw new Error("Illegal Argument");const r=(0,a.f)(t[1]);if(isNaN(r))throw new Error("Illegal Argument");if(r<=0)throw new Error("Illegal Argument");return t[0]instanceof w.Z||t[0]instanceof h.Z?(0,u.j2)(t[0],r,(0,o.Lz)((0,a.C)(t[2],-1))):t[0]instanceof l.Z?(0,u.j2)(d(t[0]),r,(0,o.Lz)((0,a.C)(t[2],-1))):t[0]}))},n.functions.generalize=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,a.H)(t),(0,a.p)(t,2,4),null===t[0])return null;if(!(t[0]instanceof c.Z))throw new Error("Illegal Argument");const r=(0,a.f)(t[1]);if(isNaN(r))throw new Error("Illegal Argument");return(0,u.D$)(t[0],r,(0,a.g)((0,a.C)(t[2],!0)),(0,o.Lz)((0,a.C)(t[3],-1)))}))},n.functions.buffer=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,a.H)(t),(0,a.p)(t,2,3),null===t[0])return null;if(!(t[0]instanceof c.Z))throw new Error("Illegal Argument");const r=(0,a.f)(t[1]);if(isNaN(r))throw new Error("Illegal Argument");return 0===r?(0,o.r1)(t[0]):(0,u.f3)(t[0],r,(0,o.Lz)((0,a.C)(t[2],-1)))}))},n.functions.buffergeodetic=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,a.H)(t),(0,a.p)(t,2,3),null===t[0])return null;if(!(t[0]instanceof c.Z))throw new Error("Illegal Argument");const r=(0,a.f)(t[1]);if(isNaN(r))throw new Error("Illegal Argument");return 0===r?(0,o.r1)(t[0]):(0,u.rd)(t[0],r,(0,o.Lz)((0,a.C)(t[2],-1)))}))},n.functions.offset=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,a.H)(t),(0,a.p)(t,2,6),null===t[0])return null;if(!(t[0]instanceof w.Z||t[0]instanceof h.Z))throw new Error("Illegal Argument");const r=(0,a.f)(t[1]);if(isNaN(r))throw new Error("Illegal Argument");const i=(0,a.f)((0,a.C)(t[4],10));if(isNaN(i))throw new Error("Illegal Argument");const l=(0,a.f)((0,a.C)(t[5],0));if(isNaN(l))throw new Error("Illegal Argument");return(0,u.cv)(t[0],r,(0,o.Lz)((0,a.C)(t[2],-1)),(0,a.h)((0,a.C)(t[3],"round")).toLowerCase(),i,l)}))},n.functions.rotate=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){t=(0,a.H)(t),(0,a.p)(t,2,3);let r=t[0];if(null===r)return null;if(!(r instanceof c.Z))throw new Error("Illegal Argument");r instanceof l.Z&&(r=w.Z.fromExtent(r));const o=(0,a.f)(t[1]);if(isNaN(o))throw new Error("Illegal Argument");const i=(0,a.C)(t[2],null);if(null===i)return(0,u.U1)(r,o);if(i instanceof f.Z)return(0,u.U1)(r,o,i);throw new Error("Illegal Argument")}))},n.functions.centroid=function(e,t){return n.standardFunctionAsync(e,t,(function(n,t,r){if(r=(0,a.H)(r),(0,a.p)(r,1,1),null===r[0])return null;let u=r[0];if(((0,a.l)(r[0])||(0,a.n)(r[0]))&&(u=(0,a.L)(r[0],e.spatialReference)),null===u)return null;if(!(u instanceof c.Z))throw new Error("Illegal Argument");return u instanceof f.Z?(0,a.A)((0,o.r1)(r[0]),e.spatialReference):u instanceof w.Z?u.centroid:u instanceof h.Z?(0,i.s9)(u):u instanceof s.Z?(0,i.Ay)(u):u instanceof l.Z?u.center:null}))},n.functions.multiparttosinglepart=function(e,t){return n.standardFunctionAsync(e,t,(async function(n,t,r){r=(0,a.H)(r),(0,a.p)(r,1,1);const i=[];if(null===r[0])return null;if(!(r[0]instanceof c.Z))throw new Error("Illegal Argument");if(r[0]instanceof f.Z)return[(0,a.A)((0,o.r1)(r[0]),e.spatialReference)];if(r[0]instanceof l.Z)return[(0,a.A)((0,o.r1)(r[0]),e.spatialReference)];const g=await(0,u.og)(r[0]);if(g instanceof w.Z){const n=[],e=[];for(let t=0;t<g.rings.length;t++)if(g.isClockwise(g.rings[t])){const e=(0,p.im)({rings:[g.rings[t]],hasZ:!0===g.hasZ,hazM:!0===g.hasM,spatialReference:g.spatialReference.toJSON()});n.push(e)}else e.push({ring:g.rings[t],pt:g.getPoint(t,0)});for(let t=0;t<e.length;t++)for(let r=0;r<n.length;r++)if(n[r].contains(e[t].pt)){n[r].addRing(e[t].ring);break}return n}if(g instanceof h.Z){const n=[];for(let e=0;e<g.paths.length;e++){const t=(0,p.im)({paths:[g.paths[e]],hasZ:!0===g.hasZ,hazM:!0===g.hasM,spatialReference:g.spatialReference.toJSON()});n.push(t)}return n}if(r[0]instanceof s.Z){const n=(0,a.A)((0,o.r1)(r[0]),e.spatialReference);for(let e=0;e<n.points.length;e++)i.push(n.getPoint(e));return i}return null}))},n.functions.issimple=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,a.H)(t),(0,a.p)(t,1,1),null===t[0])return!0;if(!(t[0]instanceof c.Z))throw new Error("Illegal Argument");return(0,u.Gg)(t[0])}))},n.functions.simplify=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,a.H)(t),(0,a.p)(t,1,1),null===t[0])return null;if(!(t[0]instanceof c.Z))throw new Error("Illegal Argument");return(0,u.og)(t[0])}))})}},15917:(n,e,t)=>{t.d(e,{CJ:()=>L,Cz:()=>U,D$:()=>x,ED:()=>E,G0:()=>C,Gg:()=>N,LV:()=>v,Nm:()=>I,Sp:()=>R,TE:()=>p,U1:()=>F,W4:()=>m,Y4:()=>P,cv:()=>T,e5:()=>b,f3:()=>Z,fS:()=>g,j2:()=>H,jU:()=>h,kK:()=>d,kQ:()=>D,og:()=>A,oq:()=>s,r3:()=>w,rd:()=>O,sz:()=>M,uh:()=>y,wf:()=>S,z7:()=>f}),t(91957);var r=t(47109),o=(t(53446),t(53736));function a(n){return Array.isArray(n)?n[0]?.spatialReference:n?.spatialReference}function i(n){return n?Array.isArray(n)?n.map(i):n.toJSON?n.toJSON():n:n}function l(n){return Array.isArray(n)?n.map((n=>(0,o.im)(n))):(0,o.im)(n)}let c;async function u(n,e){return(await async function(){return c||(c=(0,r.bA)("geometryEngineWorker",{strategy:"distributed"})),c}()).invoke("executeGEOperation",{operation:n,parameters:i(e)})}async function s(n,e){return l(await u("clip",[a(n),n,e]))}async function f(n,e){return l(await u("cut",[a(n),n,e]))}function w(n,e){return u("contains",[a(n),n,e])}function h(n,e){return u("crosses",[a(n),n,e])}function p(n,e,t){return u("distance",[a(n),n,e,t])}function g(n,e){return u("equals",[a(n),n,e])}function d(n,e){return u("intersects",[a(n),n,e])}function m(n,e){return u("touches",[a(n),n,e])}function y(n,e){return u("within",[a(n),n,e])}function E(n,e){return u("disjoint",[a(n),n,e])}function I(n,e){return u("overlaps",[a(n),n,e])}function v(n,e,t){return u("relate",[a(n),n,e,t])}function N(n){return u("isSimple",[a(n),n])}async function A(n){return l(await u("simplify",[a(n),n]))}async function b(n,e){return l(await u("difference",[a(n),n,e]))}async function R(n,e){return l(await u("symmetricDifference",[a(n),n,e]))}async function S(n,e){return l(await u("intersect",[a(n),n,e]))}async function C(n,e=null){const t=function(n,e){let t;return Array.isArray(n)?t=n:(t=[],t.push(n),null!=e&&t.push(e)),t}(n,e);return l(await u("union",[a(t),t]))}async function T(n,e,t,r,o,i){return l(await u("offset",[a(n),n,e,t,r,o,i]))}async function Z(n,e,t,r=!1){const o=[a(n),n,e,t,r];return l(await u("buffer",o))}async function O(n,e,t,r,o,i){const c=[a(n),n,e,t,r,o,i];return l(await u("geodesicBuffer",c))}async function F(n,e,t){if(null==n)throw new Error("Illegal Argument Exception");const r=n.spatialReference;t=t??function(n){return"xmin"in n?n.center:"x"in n?n:n.extent.center}(n);const o=n.constructor.fromJSON(await u("rotate",[r,n,e,t]));return o.spatialReference=r,o}async function x(n,e,t,r){return l(await u("generalize",[a(n),n,e,t,r]))}async function U(n,e,t){return l(await u("densify",[a(n),n,e,t]))}async function H(n,e,t,r=0){return l(await u("geodesicDensify",[a(n),n,e,t,r]))}function L(n,e){return u("planarArea",[a(n),n,e])}function M(n,e){return u("planarLength",[a(n),n,e])}function P(n,e,t){return u("geodesicArea",[a(n),n,e,t])}function D(n,e,t){return u("geodesicLength",[a(n),n,e,t])}}}]);